{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Welcome to Swift for Android","text":"<p>Swift for Android is an open-source project and part of the Swift Stream family.</p> <p>It\u2019s built by developers, for developers \u2013 with love, to make creating Android apps in Swift simple and enjoyable.</p> <p>This project brings the power and expressiveness of Swift to Android, letting you build native applications with Swift\u2019s modern syntax, safety, and performance \u2013 all while working directly with Android\u2019s native UI components.</p> <p>Powered by JNIKit, Droid, and Swift Stream IDE, it provides a smooth workflow for writing, compiling, and deploying Swift code to Android devices.</p> <p>If you\u2019re new here, start with the \u2192 Setup Guide, then explore the \u2192 Application and \u2192 Library sections to begin building with Swift for Android.</p>"},{"location":"contributing/","title":"Contributing Guide","text":"<p>Contributions are what make the open-source community such an amazing place to learn, inspire, and create. Any contributions you make are greatly appreciated.</p>"},{"location":"contributing/#documentation","title":"Documentation","text":"<ol> <li>Clone \u2192 the repository and open it in VSCode.</li> <li>Hit <code>Ctrl/Cmd + Shift + P</code> and select <code>Run Task -&gt; Pull Material Docker Image</code>.</li> <li>Hit <code>Ctrl/Cmd + Shift + P</code> and select <code>Run Task -&gt; Run Material Server</code>.</li> <li>Open 0.0.0.0:8000 in your browser to preview the documentation.</li> <li>Make your changes in the markdown files located in the <code>docs/</code> folder.</li> <li>Once you are satisfied with your changes, commit and push them.</li> <li>Open a pull request to the main repository for review.</li> </ol>"},{"location":"contributing/#droid","title":"Droid","text":"<ol> <li>Clone \u2192 the repository and open it in VSCode.</li> <li>Make your changes in the codebase.</li> <li>Once you are satisfied with your changes, commit and push them.</li> <li>Open a pull request to the main repository for review.</li> </ol>"},{"location":"contributing/#jnikit","title":"JNIKit","text":"<ol> <li>Clone \u2192 the repository and open it in VSCode.</li> <li>Make your changes in the codebase.</li> <li>Once you are satisfied with your changes, commit and push them.</li> <li>Open a pull request to the main repository for review.</li> </ol>"},{"location":"contributing/#runtime-libraries","title":"Runtime Libraries","text":"<p>Each Swift release has its own set of runtime libraries that need to be maintained and updated.</p> <p>The process of updating the runtime libraries takes few manual steps:</p> <ol> <li>Find the link to the latest Swift Android SDK release.</li> <li>Execute <code>./copy-so-files.sh &lt;SDK-URL&gt;</code> to download and extract the shared libraries.</li> <li>Commit and push the changes.</li> </ol> <p>If you want to help with this process, please reach out! This process can be automated in the future, feel free to help with that.</p> <p>Thank you for considering contributing to Swift for Android!</p> <p>Don't forget to give the project a star! Thanks again!</p>"},{"location":"app/","title":"Application Development","text":"<p>You are in the most incredible place to start building Android apps in Swift!</p> <p>This code is absolute reality now:</p> <pre><code>ConstraintLayout {\n    VStack {\n        TextView(\"Hello from Swift!\")\n            .width(.matchParent)\n            .height(.wrapContent)\n            .textColor(.green)\n            .marginBottom(16)\n        MaterialButton(\"Tap Me\")\n            .onClick {\n                print(\"Button tapped!\")\n            }\n    }\n    .centerVertical()\n    .leftToParent()\n    .rightToParent()\n}\n</code></pre> <p>You can create stunning user interfaces natively in Swift!</p> <p>Droid framework is the foundation for building rich Android apps with native UI and UX.</p> <p>It provides an extensive set of components, including AndroidX, Flexbox, and Material Design.</p> <p>Offering a SwiftUI-like declarative syntax for everything, Droid framework simplifies the process of developing Android applications in Swift by providing a high-level API that abstracts away many complexities of the Android platform and completely hides the underlying JNI layer.</p> <p>The application documentation is under active development. If you encounter any 404 pages or typos, please be patient \u2013 new content is being added every day.</p>"},{"location":"app/activities/","title":"Activities","text":"<p>Activity in Android represents a single screen. Unlike iOS, where the whole app lives on a single screen, Android apps are made up of multiple activities that users can navigate between. Each activity is independent and has its own lifecycle.</p> <p>However activities is not the only way to create screens in Android. You can also use \u2192 fragments, which are modular sections of an activity. Fragments allow for more flexible UI designs.</p>"},{"location":"app/activities/#starting-an-activity","title":"Starting an Activity","text":"<p>In classic Android development, you are starting an Activity via intents. With Droid framework you can do it in a more Swiftly way.</p> <p>Simply initialize the activity class you want to start and call <code>startActivity</code> method with it:</p> <pre><code>let secondActivity = SecondActivity()\nstartActivity(secondActivity)\n</code></pre> <p>This way gives you an ablity to pass parameters to the activity via its initializer rather than using intent extras.</p> <p>You also can start multiple activities at once by passing an array of activities to <code>startActivity</code> method:</p> <pre><code>let activity1 = FirstActivity()\nlet activity2 = SecondActivity()\nstartActivity(activity1, activity2)\n</code></pre> <p>And you can start activities for result using <code>startActivityForResult</code> method:</p> <pre><code>let thirdActivity = ThirdActivity()\nstartActivityForResult(thirdActivity, requestCode: 1001)\n</code></pre> <p>The way with intents is also supported, mostly for an ability to start activities from outside of the Droid framework.</p> <pre><code>let intent = Intent(...)\nstartActivity(intent)\n</code></pre>"},{"location":"app/activities/#launcher-activity","title":"Launcher Activity","text":"<p>Some activities can be designated as launcher activities. These are the entry points of your app, the first screen users see when they launch your app from the home screen or app drawer.</p> <p>Normally, the main launcher activity is defined in your app's manifest file with a specific intent filter. But with Droid framework you have to define it simply in your activity class:</p> <pre><code>final class MainActivity: AppCompatActivity {\n    override class var intentFilter: IntentFilter? { .mainLauncher }\n    /// ...\n}\n</code></pre> <p>This will automatically set up the necessary intent filter in the generated Android manifest file.</p>"},{"location":"app/activities/#creating-an-activity","title":"Creating an Activity","text":"<p>To create a new activity you need to do only two things.</p>"},{"location":"app/activities/#activity-class","title":"Activity class","text":"<p>Create a new class that extends <code>Activity</code> (or its subclass like <code>AppCompatActivity</code>, depending on your theme):</p> <pre><code>import Droid\n\nfinal class YourActivity: AppCompatActivity {\n    override var body: any Body {\n        TextView(\"Hello world!\")\n            .width(.matchParent)\n            .height(.matchParent)\n            .gravity(.center)\n    }\n}\n</code></pre>"},{"location":"app/activities/#manifest-declaration","title":"Manifest Declaration","text":"<p>Declare the activity in your <code>App.swift</code> file in the <code>Manifest</code>:</p> <pre><code>@main\npublic final class App: DroidApp {\n    @AppBuilder public override var body: Content {\n        /// ...\n        Manifest\n            /// ...\n            .activities(\n                /// ...\n                YourActivity.self,\n                /// ...\n            )\n    }\n}\n</code></pre> <p>Corresponding Kotlin code for the activity will be generated automatically during the build process.</p> <p>That's it! You have created a new activity for your Android app.</p>"},{"location":"app/activities/#lifecycle","title":"Lifecycle","text":"<p>Activities have a well-defined lifecycle managed by the Android operating system.</p> <p>It's crucial to call <code>super</code> for each lifecycle method you override to ensure the proper functioning of the activity.</p>"},{"location":"app/activities/#oncreate","title":"onCreate","text":"<p>Called when the activity is first created.</p> <p>Here it receives an <code>ActivityContext</code> which can later be accessed via the <code>self.context</code> property anytime.</p> <pre><code>override func onCreate(_ context: ActivityContext) {\n    super.onCreate(context)\n    Log.i(\"onCreate\")\n}\n</code></pre>"},{"location":"app/activities/#body","title":"body","text":"<p>This is where you build your UI declaratively using SwiftUI-like syntax.</p> <p>Is a convenient minimalistic way to define the UI declaratively.</p> <p>It is called after <code>onCreate</code> and before <code>buildUI</code>.</p> <pre><code>override var body: any Body {\n    TextView(\"Hello world!\")\n        .width(.matchParent)\n        .height(.matchParent)\n        .gravity(.center)\n}\n</code></pre> <p>It can be used in mix with <code>buildUI</code> method, or alone.</p>"},{"location":"app/activities/#buildui","title":"buildUI","text":"<p>Alternative to <code>body</code>, could be more useful if you need to declare some variables or calculate something before building the UI.</p> <p>It is called after <code>onCreate</code> and <code>body</code>.</p> <pre><code>override func buildUI() {\n    super.buildUI()\n    let customText = \"Hello from buildUI!\"\n    body {\n        TextView(customText)\n            .width(.matchParent)\n            .height(.matchParent)\n            .gravity(.center)\n    }\n}\n</code></pre>"},{"location":"app/activities/#onstart","title":"onStart","text":"<p>Called when the activity is becoming visible to the user.</p> <p>Happens after <code>onCreate()</code> (for a new instance) or <code>onRestart()</code> (for a restarted one).</p> <pre><code>override func onStart() {\n    super.onStart()\n    Log.i(\"onStart\")\n}\n</code></pre>"},{"location":"app/activities/#onrestart","title":"onRestart","text":"<p>Called after the activity has been stopped and right before it starts again.</p> <p>This method is typically followed by calls to <code>onStart()</code> and then <code>onResume()</code>. Override <code>onRestart()</code> when you need to restore resources or state that were released or adjusted in <code>onStop()</code>.</p> <pre><code>override func onRestart() {\n    super.onRestart()\n    Log.i(\"onRestart\")\n}\n</code></pre>"},{"location":"app/activities/#onresume","title":"onResume","text":"<p>Called when the activity is about to resume interaction with the user.</p> <p>At this point, the activity is in the foreground and ready for user input.</p> <p>Resume any tasks that were paused (e.g. restarting animations or refreshing data).</p> <pre><code>override func onResume() {\n    super.onResume()\n    Log.i(\"onResume\")\n}\n</code></pre>"},{"location":"app/activities/#onpause","title":"onPause","text":"<p>Called when the activity is about to enter a paused state.</p> <p>This means another activity is coming into the foreground, but this one is still partially visible. </p> <p>Use this to pause animations, video playback, or other ongoing tasks.</p> <pre><code>override func onPause() {\n    super.onPause()\n    Log.i(\"onPause\")\n}\n</code></pre>"},{"location":"app/activities/#onstop","title":"onStop","text":"<p>Called when the activity is no longer visible to the user.</p> <p>This happens when a new activity covers it or the app goes to the background.</p> <p>Use this to release resources that don\u2019t need to be kept while the activity is not visible.</p> <pre><code>override func onStop() {\n    super.onStop()\n    Log.i(\"onStop\")\n}\n</code></pre>"},{"location":"app/activities/#ondestroy","title":"onDestroy","text":"<p>Called before the activity is completely destroyed.</p> <p>This may occur when: - The activity is finishing (<code>finish()</code> was called), or - The system needs to reclaim memory.</p> <p>Use this to perform final cleanup, like releasing resources or saving persistent data.</p> <pre><code>override func onDestroy() {\n    super.onDestroy()\n    Log.i(\"onDestroy\")\n}\n</code></pre>"},{"location":"app/activities/#onstatenotsaved","title":"onStateNotSaved","text":"<p>Called when the system is about to save the activity's state, but before that state has actually been committed.</p> <p>Typically invoked before <code>onStop()</code>. </p> <p>Override this to do lightweight cleanup tasks that should not be persisted in the saved instance state.</p> <pre><code>override func onStateNotSaved() {\n    super.onStateNotSaved()\n    Log.i(\"onStateNotSaved\")\n}\n</code></pre>"},{"location":"app/activities/#onattachedtowindow","title":"onAttachedToWindow","text":"<p>Called when the activity's window has been attached to the window manager.</p> <p>This is the point where your activity can safely interact with the actual window.</p> <p>Useful for performing final UI setup that depends on the window being ready.</p> <pre><code>override func onAttachedToWindow() {\n    super.onAttachedToWindow()\n    Log.i(\"onAttachedToWindow\")\n}\n</code></pre>"},{"location":"app/activities/#onbackpressed","title":"onBackPressed","text":"<p>Called when the user presses the Back button.</p> <p>By default, this finishes the current activity.</p> <p>Override this to implement custom back navigation logic (e.g., showing a confirmation dialog before exit).</p> <pre><code>override func onBackPressed() {\n    Log.i(\"onBackPressed\")\n    finish() // finish activity manually\n}\n</code></pre>"},{"location":"app/activities/#onactivityresult","title":"onActivityResult","text":"<p>Called when an activity you launched with <code>startActivityForResult()</code> finishes.</p> <p>Parameters:</p> <ul> <li>requestCode: The integer request code originally supplied</li> <li>resultCode: The integer result code returned by the child activity</li> <li>intent: Optional data returned from the child activity</li> <li>componentCaller: The caller component that initiated the request</li> </ul> <p>Override this to handle results from sub-activities (e.g., picking an image or capturing video).</p> <pre><code>override func onActivityResult(\n    requestCode: Int,\n    resultCode: Int,\n    intent: Intent?,\n    componentCaller: ComponentCaller?\n) {\n    super.onActivityResult(\n        requestCode: requestCode,\n        resultCode: resultCode,\n        intent: intent,\n        componentCaller: componentCaller\n    )\n    Log.i(\"onActivityResult request: \\(requestCode), result: \\(resultCode)\")\n}\n</code></pre>"},{"location":"app/activities/#onmultiwindowmodechanged","title":"onMultiWindowModeChanged","text":"<p>Called when the activity's multi-window mode changes.</p> <p>If <code>isInMultiWindowMode</code> is <code>true</code> then activity is in multi-window mode now.</p> <p>Override this to adjust your UI or behavior based on whether the activity is in multi-window mode.</p> <pre><code>override func onMultiWindowModeChanged(isInMultiWindowMode: Bool) {\n    super.onMultiWindowModeChanged(isInMultiWindowMode: isInMultiWindowMode)\n    Log.i(\"onMultiWindowModeChanged: \\(isInMultiWindowMode)\")\n}\n</code></pre>"},{"location":"app/activities/#onrequestpermissionsresult","title":"onRequestPermissionsResult","text":"<p>Called when the user responds to a permission request.</p> <p>Parameters:</p> <ul> <li>requestCode: The integer request code originally supplied to <code>requestPermissions()</code></li> <li>results: An array of <code>ActivityPermissionResult</code> indicating the permissions requested and whether they were granted</li> <li>deviceId: The ID of the device for which the permissions were requested</li> </ul> <p>Override this to handle the user's response to permission requests.</p> <pre><code>override func onRequestPermissionsResult(\n    requestCode: Int,\n    results: [ActivityPermissionResult],\n    deviceId: Int\n) {\n    super.onRequestPermissionsResult(\n        requestCode: requestCode,\n        results: results,\n        deviceId: deviceId\n    )\n    for result in results {\n        Log.i(\"Permission: \\(result.permission), granted: \\(result.granted)\")\n    }\n}\n</code></pre> <p>Learn how to easily request \u2192 permissions</p>"},{"location":"app/activities/#oncreateoptionsmenu","title":"onCreateOptionsMenu","text":"<p>Called when the options menu is created.</p> <p>Override this to build your activity's options menu.</p> <pre><code>override func onCreateOptionsMenu(menu: Menu) -&gt; Bool {\n    menu.add(\"One\").showAsAction(.collapseActionView)\n    menu.add(\"Two\").showAsAction(.collapseActionView)\n    menu.add(\"Three\").showAsAction(.collapseActionView)\n    return true\n}\n</code></pre>"},{"location":"app/activities/#onprepareoptionsmenu","title":"onPrepareOptionsMenu","text":"<p>Prepare the Screen's standard options menu to be displayed.</p> <p>This is called right before the menu is shown, every time it is shown.</p> <p>You can use this method to efficiently enable/disable items or otherwise dynamically modify the contents.</p> <pre><code>override func onPrepareOptionsMenu(menu: Menu) -&gt; Bool {\n    menu.clear()\n    menu.add(\"Four\").showAsAction(.collapseActionView)\n    menu.add(\"Five\").showAsAction(.collapseActionView)\n    menu.add(\"Six\").showAsAction(.collapseActionView)\n    let subMenu = menu.addSubMenu(\"Sub 1\")!\n    subMenu.add(\"Seven\").showAsAction(.always)\n    subMenu.add(\"Eight\").showAsAction(.always)\n    subMenu.add(\"Nine\").showAsAction(.always)\n    return true\n}\n</code></pre>"},{"location":"app/activities/#onoptionsitemselected","title":"onOptionsItemSelected","text":"<p>This hook is called whenever an item in your options menu is selected.</p> <pre><code>override func onOptionsItemSelected(item: MenuItem) -&gt; Bool {\n    if let title = item.title() {\n        Log.i(\"You clicked \\(title)\")\n        return true\n    }\n    return false\n}\n</code></pre>"},{"location":"app/activities/#onoptionsmenuclosed","title":"onOptionsMenuClosed","text":"<p>This hook is called whenever the options menu is being closed.</p> <pre><code>override func onOptionsMenuClosed(menu: Menu) {\n    Log.i(\"Options menu closed\")\n}\n</code></pre>"},{"location":"app/activities/#finishing-activity","title":"Finishing Activity","text":""},{"location":"app/activities/#finish","title":"finish","text":"<p>Call this when your activity is done and should be closed.</p> <pre><code>finish()\n</code></pre>"},{"location":"app/activities/#finishaffinity","title":"finishAffinity","text":"<p>Call this to finish the current activity and all activities immediately below it in the current task that have the same affinity.</p> <pre><code>finishAffinity()\n</code></pre>"},{"location":"app/activities/#finishaftertransition","title":"finishAfterTransition","text":"<p>Call this to finish the activity after completing any ongoing transitions.</p> <pre><code>finishAfterTransition()\n</code></pre>"},{"location":"app/activities/#finishactivity","title":"finishActivity","text":"<p>Call this to finish another activity that you had previously started with <code>startActivityForResult()</code>.</p> <pre><code>finishActivity(requestCode: 1001)\n</code></pre>"},{"location":"app/activities/#configuration","title":"Configuration","text":""},{"location":"app/activities/#classname","title":"className","text":"<p>Class name of the activity which can be overriden for the new activity types. For example, classic activity class is <code>android/app/Activity</code>, <code>AppCompatActivity</code> is <code>androidx/appcompat/app/AppCompatActivity</code>, but you may want to create an activity based on some custom class and then you have to override this property.</p> <pre><code>open class MyCustomActivity: AppCompatActivity {\n    open class override var className: JClassName { \"com/domain/Activity\" }\n}\n</code></pre>"},{"location":"app/activities/#gradle-dependencies","title":"gradle dependencies","text":"<p>When you are wrapping some custom activity class from a library, you may need to add corresponding gradle dependencies to your project. You can do it by overriding this property:</p> <pre><code>open class MyCustomActivity: AppCompatActivity {\n    open class override var gradleDependencies: [GradleDependency] {\n        [ .implementation(\"com.domain:library:1.0.0\") ]\n    }\n}\n</code></pre>"},{"location":"app/activities/#java-imports","title":"java imports","text":"<p>If you are using some custom activity class, you may need to add corresponding Java imports to the generated Kotlin code. You can do it by overriding this property:</p> <pre><code>open class MyCustomActivity: AppCompatActivity {\n    open class override var javaImports: [String] {\n        [ \"com.domain.library.*\" ]\n    }\n}\n</code></pre>"},{"location":"app/activities/#parent-class","title":"parent class","text":"<p>The default is <code>DroidActivity()</code>.</p> <p>When you are creating an activity it is based on some activity class, you may need to override the parent class declaration in the generated Kotlin code:</p> <pre><code>open class MyCustomActivity: AppCompatActivity {\n    open class override var parentClass: String { \"DroidActivity()\" }\n}\n</code></pre>"},{"location":"app/activities/#allowembedded","title":"allowEmbedded","text":"<p>Indicate that the activity can be launched as the embedded child of another activity \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var allowEmbedded: Bool { true }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#allowtaskreparenting","title":"allowTaskReparenting","text":"<p>/// Whether or not the activity can move from the task that started it to the task it has an affinity for when that task is next brought to the front \u2013 \"true\" if it can move, and \"false\" if it must remain with the task where it started \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var allowTaskReparenting: Bool { true }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#alwaysretaintaskstate","title":"alwaysRetainTaskState","text":"<p>/// Whether or not the state of the task that the activity is in will always be maintained by the system \u2013 \"true\" if it will be, and \"false\" if the system is allowed to reset the task to its initial state in certain situations \u2192 docs</p> <p>The default value is \"false\".</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var alwaysRetainTaskState: Bool { true }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#autoremovefromrecents","title":"autoRemoveFromRecents","text":"<p>Whether or not tasks launched by activities with this attribute remains in the overview screen until the last activity in the task is completed. If true, the task is automatically removed from the overview screen \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var autoRemoveFromRecents: Bool { true }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#banner","title":"banner","text":"<p>A drawable resource providing an extended graphical banner for its associated item \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var banner: String? { \"@drawable/banner\" }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#cleartaskonlaunch","title":"clearTaskOnLaunch","text":"<p>Whether or not all activities will be removed from the task, except for the root activity, whenever it is re-launched from the home screen \u2013 \"true\" if the task is always stripped down to its root activity, and \"false\" if not \u2192 docs</p> <p>The default value is \"false\".</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var clearTaskOnLaunch: Bool { true }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#colormode","title":"colorMode","text":"<p>Requests the activity to be displayed in wide color gamut mode on compatible devices \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var colorMode: ActivityColorMode { .hdr }\n    /// ...\n}   \n</code></pre>"},{"location":"app/activities/#configchanges","title":"configChanges","text":"<p>Lists configuration changes that the activity will handle itself. For the rest activity will be simply restarted \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var configChanges: [ActivityConfigChange] {\n        [ .keyboard, .orientation, .screenSize, .screenLayout ]\n    }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#directbootaware","title":"directBootAware","text":"<p>Whether or not the activity is direct-boot aware; that is, whether or not it can run before the user unlocks the device \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var directBootAware: Bool { true }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#documentlaunchmode","title":"documentLaunchMode","text":"<p>Specifies how a new instance of an activity should be added to a task each time it is launched \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var documentLaunchMode: ActivityDocumentLaunchMode {\n        .intoExisting\n    }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#enabled","title":"enabled","text":"<p>Whether or not the activity can be instantiated by the system \u2013 \"true\" if it can be, and \"false\" if not \u2192 docs</p> <p>The default value is \"true\".</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var enabled: Bool { false }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#excludefromrecents","title":"excludeFromRecents","text":"<p>Whether or not the task initiated by this activity should be excluded from the list of recently used applications, the overview screen \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var excludeFromRecents: Bool { true }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#exported","title":"exported","text":"<p>Whether it can be launched by components of other applications \u2192 docs</p> <p>If \"true\", the activity is accessible to any app, and is launchable by its exact class name.</p> <p>If \"false\", the activity can be launched only by components of the same application, applications with the same user ID, or privileged system components.</p> <p>\"false\" is the default value when there are no intent filters.</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var exported: Bool { true }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#finishontasklaunch","title":"finishOnTaskLaunch","text":"<p>Whether or not an existing instance of the activity should be shut down (finished), except for the root activity, whenever the user again launches its task (chooses the task on the home screen) \u2013 \"true\" if it should be shut down, and \"false\" if not \u2192 docs</p> <p>The default value is \"false\".</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var finishOnTaskLaunch: Bool { true }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#hardwareaccelerated","title":"hardwareAccelerated","text":"<p>Whether or not hardware-accelerated rendering should be enabled for this Activity \u2013 \"true\" if it should be enabled, and \"false\" if not \u2192 docs</p> <p>The default value is \"false\".</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var hardwareAccelerated: Bool { true }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#icon","title":"icon","text":"<p>An icon representing the activity \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var icon: String? { \"@mipmap/ic_launcher\" }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#roundicon","title":"roundIcon","text":"<p>A default round icon for all application components \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var roundIcon: String? { \"@mipmap/ic_launcher_round\" }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#immersive","title":"immersive","text":"<p>Sets the immersive mode setting for the current activity \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var immersive: Bool { true }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#label","title":"label","text":"<p>A user-readable label for the activity \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var label: String? { \"My Activity\" }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#launchmode","title":"launchMode","text":"<p>An instruction on how the activity should be launched \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var launchMode: LaunchMode { .singleTop }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#locktaskmode","title":"lockTaskMode","text":"<p>Specifies how this activity should behave when the device is in lock task mode \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var lockTaskMode: LockTaskMode { .ifWhitelisted }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#maxrecents","title":"maxRecents","text":"<p>he maximum number of tasks rooted at this activity in the overview screen \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var maxRecents: Int { 3 }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#maxaspectratio","title":"maxAspectRatio","text":"<p>The maximum aspect ratio the activity supports \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var maxAspectRatio: Float { 2.0 }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#multiprocess","title":"multiprocess","text":"<p>Whether an instance of the activity can be launched into the process of the component that started it \u2013 \"true\" if it can be, and \"false\" if not \u2192 docs</p> <p>The default value is \"false\".</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var multiprocess: Bool { true }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#nohistory","title":"noHistory","text":"<p>Whether or not the activity should be removed from the activity stack and finished (its finish() method called) when the user navigates away from it and it's no longer visible on screen \u2013 \"true\" if it should be finished, and \"false\" if not \u2192 docs</p> <p>The default value is \"false\".</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var noHistory: Bool { true }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#parentactivityname","title":"parentActivityName","text":"<p>The class name of the logical parent of the activity \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var parentActivityName: AnyActivity.Type? {\n        ParentActivity.self\n    }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#persistablemode","title":"persistableMode","text":"<p>Defines how an instance of an activity is preserved within a containing task across device restarts \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var persistableMode: PersistableMode { .acrossReboots }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#permission","title":"permission","text":"<p>The name of a permission that clients must have to launch the activity or otherwise get it to respond to an intent \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var permission: ManifestPermission? { .sendSms }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#process","title":"process","text":"<p>The name of the process in which the activity should run \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var process: String? { \":remote\" }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#relinquishtaskidentity","title":"relinquishTaskIdentity","text":"<p>Whether or not the activity relinquishes its task identifiers to an activity above it in the task stack \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var relinquishTaskIdentity: Bool { true }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#resizeableactivity","title":"resizeableActivity","text":"<p>Specifies whether the app supports multi-window mode \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var resizeableActivity: Bool { true }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#screenorientation","title":"screenOrientation","text":"<p>The orientation of the activity's display on the device \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var screenOrientation: ScreenOrientation {\n        .portrait\n    }\n    /// ...\n}\n</code></pre> <p>The system ignores this attribute if the activity is running in multi-window mode</p>"},{"location":"app/activities/#showforallusers","title":"showForAllUsers","text":"<p>Whether or not the activity is shown when the device's current user is different than the user who launched the activity. You can set this attribute to a literal value \u2013 \"true\" or \"false\" \u2013 or you can set the attribute to a resource or theme attribute that contains a boolean value \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var showForAllUsers: Bool { true }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#statenotneeded","title":"stateNotNeeded","text":"<p>Whether or not the activity can be killed and successfully restarted without having saved its state \u2014 \"true\" if it can be restarted without reference to its previous state, and \"false\" if its previous state is required \u2192 docs</p> <p>The default value is \"false\".</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var stateNotNeeded: Bool { true }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#supportspictureinpicture","title":"supportsPictureInPicture","text":"<p>Specifies whether the activity supports Picture-in-Picture display \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var supportsPictureInPicture: Bool { true }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#taskaffinity","title":"taskAffinity","text":"<p>The task that the activity has an affinity for \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var taskAffinity: String? { \"com.example.task\" }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#theme","title":"theme","text":"<p>The theme name applied to the activity as soon as it is created, before any views are instantiated. If not specified, the application-level theme defined in your app's manifest is used. If no application-level theme is set, the default system theme will be applied \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var theme: Style? { .material3DayNightNoActionBar }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#uioptions","title":"uiOptions","text":"<p>Extra options for an activity's UI \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var uiOptions: ApplicationUIOptions {\n        .splitActionBarWhenNarrow\n    }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#windowsoftinputmode","title":"windowSoftInputMode","text":"<p>How the main window of the activity interacts with the window containing the on-screen soft keyboard \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var windowSoftInputMode: [WindowSoftInputMode] {\n        [.adjustResize, .stateHidden]\n    }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#intentfilter","title":"intentFilter","text":"<p>Specifies the types of intents that an activity can respond to \u2192 docs</p> <pre><code>final class MainActivity: AppCompatActivity {\n    override class var intentFilters: [IntentFilter] {\n        [.action(.main).category(.launcher)]\n    }\n    /// ...\n}\n</code></pre>"},{"location":"app/activities/#metadata","title":"metaData","text":"<p>A name-value pair for an item of additional, arbitrary data that can be supplied to the parent component \u2192 docs</p> <pre><code>final class YourActivity: AppCompatActivity {\n    override class var metaData: [MetaData] {\n        [.name(\"key\").value(\"value\")]\n    }\n    /// ...\n}\n</code></pre>"},{"location":"app/assets/","title":"Assets","text":"<p>In an Android app project, resources are non-code files and static content used by the application, stored primarily in the <code>res</code> directory.</p> <p>Externalizing these resources from the code allows for independent maintenance and the provision of alternative resources for different device configurations (e.g., different languages, screen sizes, or densities). </p> <p>Resources management should be done in the <code>res</code> folder of your Android app project which is located at <code>Application/&lt;target&gt;/src/main/res</code> where <code>&lt;target&gt;</code> is the name of your target (e.g., <code>androidapp</code>).</p>"},{"location":"app/assets/#types","title":"Types","text":"<p>The main types of resources, organized by their subdirectory within res/, are:</p> <ul> <li><code>animator</code>: XML files that define property animations</li> <li><code>anim</code>: XML files that define tween animations</li> <li><code>color</code>: XML files that define a list of colors that can change based on the view's state (Color State Lists)</li> <li><code>drawable</code>: bitmap files (PNG, JPG, GIF, WebP) or XML files that define various graphics like shapes, state lists, or layer lists</li> <li><code>font</code>: font files (TTF, OTF, TTC) or XML files that define font families</li> <li><code>mipmap</code>: drawable files for launcher icons, optimized for different screen densities</li> <li><code>raw</code>: arbitrary raw files (e.g., MP3 audio files, JSON data, video files) that you need to access in their original format</li> <li><code>xml</code>: arbitrary XML configuration files that can be read at runtime, such as a searchable configuration or preference headers</li> <li><code>values</code>: XML files that contain simple values and primitives, including:<ul> <li><code>colors.xml</code>: color values (hexadecimal colors).</li> <li><code>strings.xml</code>: string values, string arrays, and plurals for text in the UI</li> <li><code>themes.xml</code>: definitions for reusable themes and styles</li> </ul> </li> </ul>"},{"location":"app/assets/#accessing-resources","title":"Accessing Resources","text":"<p>Accessing resources in Swift code is done via the generated Java <code>R</code> class.</p> <p>For example, to access a string resource:</p> <pre><code>let myStringId: Int32 = R.string.my_string_resource\n</code></pre> <p>More about resource IDs can be found in the \u2192 R section</p>"},{"location":"app/colors/","title":"Colors","text":"<p>Android provides us with a rich palette of colors to enhance the visual appeal of our applications \u2192 official docs</p> <p>With Droid framework, you can easily access and utilize these colors through the <code>GraphicsColor</code> struct.</p> <p>You can set colors for various UI components using the predefined color properties or by directly specifying hex color values.</p> <pre><code>TextView(\"Hello, World!\")\n    .textColor(.red)            // Using predefined red color\n    .backgroundColor(0xFF00FF)  // Using hex value for green color\n</code></pre>"},{"location":"app/colors/#hexadecimal","title":"Hexadecimal","text":"<p>You can specify colors using hexadecimal values, following the Android convention.</p> <p>The format is <code>0xAARRGGBB</code>, where <code>AA</code> defines the alpha (transparency), <code>RR</code> is red, <code>GG</code> is green, and <code>BB</code> is blue.</p> <p>If the alpha component is omitted (<code>0xRRGGBB</code>), it is automatically set to <code>FF</code>, meaning the color is fully opaque.</p> <p>Shorter forms are also supported: <code>0xRGB</code> (12-bit) and <code>0xARGB</code> (16-bit). These are expanded internally to 8-bit per component values.</p> <pre><code>TextView(\"Hello, World!\")\n    // Opaque blue\n    .textColor(0xFF0000FF)\n    // Semi-transparent red\n    .textColor(0x80FF0000)\n    // Opaque orange\n    .textColor(.fromHex(0xFFFFA500))\n    // 12-bit shorthand (expands to opaque pinkish tone)\n    .textColor(.fromHex(0xF0A))\n    // 16-bit shorthand with alpha\n    .textColor(.fromHex(0x8F0A))\n</code></pre>"},{"location":"app/colors/#rgb-and-argb","title":"RGB and ARGB","text":"<p>You can create custom colors using RGB and ARGB values.</p> <p>The <code>GraphicsColor</code> struct provides initializers for both.</p> <pre><code>TextView(\"Hello, World!\")\n    // Bright red color\n    .textColor(.from(red: 255, green: 0, blue: 0))\n    // Dark green color\n    .textColor(.from(red: 0, green: 128, blue: 0))\n    // Semi-transparent blue color\n    .textColor(.from(red: 0, green: 0, blue: 255, alpha: 128))\n</code></pre>"},{"location":"app/colors/#predefined-colors","title":"Predefined Colors","text":"<pre><code>.transparent    // 0x00000000\n.black          // 0xFF000000\n.white          // 0xFFFFFFFF\n.red            // 0xFFFF0000\n.green          // 0xFF00FF00\n.blue           // 0xFF0000FF\n.yellow         // 0xFFFFFF00\n.cyan           // 0xFF00FFFF\n.magenta        // 0xFFFF00FF\n.gray           // 0xFF808080\n.darkGray       // 0xFF444444\n.lightGray      // 0xFFCCCCCC\n.maroon         // 0xFF800000\n.olive          // 0xFF808000\n.navy           // 0xFF000080\n.teal           // 0xFF008080\n.purple         // 0xFF800080\n.silver         // 0xFFC0C0C0\n.lime           // 0xFF00FF00\n.aqua           // 0xFF00FFFF\n.fuchsia        // 0xFFFF00FF\n.orange         // 0xFFFFA500\n.brown          // 0xFFA52A2A\n.gold           // 0xFFFFD700\n.indigo         // 0xFF4B0082\n.violet         // 0xFF8A2BE2\n.pink           // 0xFFFFC0CB\n</code></pre>"},{"location":"app/entry-point/","title":"Entry Point","text":"<p>The entry point of your Swift Android application is defined in the <code>App.swift</code> file located in the <code>Sources/App</code> directory:</p> <pre><code>\ud83d\udce6 Project Root\n\u251c\u2500\u2500 \ud83d\udcc4 Package.swift\n\u2514\u2500\u2500 \ud83d\udcc2 Sources\n    \u2514\u2500\u2500 \ud83d\udcc2 App\n        \u2514\u2500\u2500 \ud83d\udcc4 App.swift\n</code></pre> <p>This file imports the Droid framework, defines @main class of your app, and configures lifecycle, gradle dependencies, and manifest.</p> <pre><code>import Droid\n\n@main\npublic final class App: DroidApp {\n    @AppBuilder public override var body: Content {\n        Lifecycle.didFinishLaunching{\n            App.setLogLevel(.debug)\n            App.setInnerLogLevel(.debug)\n            Log.i(\"\ud83d\ude80 didFinishLaunching\")\n        }\n        Manifest\n            .usesPermissions(.camera)\n            .usesFeatures(.hardwareCamera)\n            .application {\n                .allowBackup()\n                .icon(\"@mipmap/ic_launcher\")\n                .roundIcon(\"@mipmap/ic_launcher_round\")\n                .label(\"My app\")\n                .activities(\n                    MainActivity.self,\n                    SecondActivity.self,\n                    ThirdActivity.self,\n                    FourthActivity.self\n                )\n            }\n        GradleDependencies\n            .implementation(\"com.some.company:library:1.0.0\")\n            .debugImplementation(\"com.some.company:library:1.0.0-nightly\")\n            .testImplementation(\"com.some.company:test-library:1.0.0\")\n    }\n}\n</code></pre>"},{"location":"app/entry-point/#lifecycle","title":"Lifecycle","text":"<p>This allows catching different lifecycle events of your application.</p> <p>Only <code>didFinishLaunching</code> is currently supported.</p>"},{"location":"app/entry-point/#manifest","title":"Manifest","text":"<p>It represents the \u2192 AndroidManifest.xml in a convenient declarative way. </p> <p>Swift Stream IDE then generates the corresponding XML file during the build process.</p> <p>Head to \u2192 manifest section for more details.</p>"},{"location":"app/entry-point/#gradle-dependencies","title":"Gradle Dependencies","text":"<p>You can declare additional Gradle dependencies for your app directly as shown above.</p> <p>But most of them are automatically managed based on the components you use in your Swift code. For example, once you use Android X components, the corresponding dependencies are added automatically, same for the Material, Flexbox, etc.</p>"},{"location":"app/for-each/","title":"ForEach","text":"<p>This element allows you to create multiple similar elements based on a collection or a range.</p> <p><code>ForEach</code> can be used anywhere, but it is most commonly used inside \u2192 VStack and \u2192 HStack</p> <p>\u2192 RecyclerView uses a different approach for dynamic content</p>"},{"location":"app/for-each/#static-example","title":"Static example","text":"<pre><code>let names = [\"Bob\", \"John\", \"Annie\"]\n\nVStack {\n    ForEach(names) { name in\n        TextView(name)\n    }\n    ForEach(names) { index, name in\n        TextView(\"\\(index). \\(name)\")\n    }\n\n    // or with range\n\n    ForEach(1...20) { item in\n        TextView(\"\\(item)\")\n    }\n    ForEach(1...20) { index, item in\n        TextView(\"\\(index). \\(item)\")\n    }\n\n    // and even like this\n\n    20.times {\n        TextView(\"repeating\")\n    }\n    20.times { item in\n        TextView(\"\\(item)\")\n    }\n    20.times { index, item in\n        TextView(\"\\(index). \\(item)\")\n    }\n}\n</code></pre>"},{"location":"app/for-each/#dynamic-example","title":"Dynamic example","text":"<pre><code>@State var names = [\"Bob\", \"John\", \"Annie\"]\n\nVStack {\n    ForEach($names) { name in\n        TextView(name)\n    }\n\n    // or with index\n\n    ForEach($names) { index, name in\n        TextView(\"\\(index). \\(name)\")\n    }\n}\n\nButton(\"Change 1\").onClick { [weak self] in\n    // this will append new Div with name automatically\n    self?.names.append(\"George\")\n}\n\nButton(\"Change 2\").onClick { [weak self] in\n    // this will replace and update Divs with names automatically\n    self?.names = [\"Bob\", \"Peppa\", \"George\"]\n}\n</code></pre>"},{"location":"app/for-each/#conveniences","title":"Conveniences","text":"<pre><code>VStack {\n    ForEach(...) {}\n}\n</code></pre> <p>can be replaced with</p> <pre><code>VForEach(...) {}\n</code></pre> <p>As well as</p> <pre><code>HStack {\n    ForEach(...) {}\n}\n</code></pre> <p>can be replaced with</p> <pre><code>HForEach(...) {}\n</code></pre>"},{"location":"app/getting-started/","title":"Getting Started with an App","text":"<p>As you already \u2192 setup your development environment, it's time to create the project.</p> <p>On the left sidebar in VSCode, click the Swift Stream icon (the bird).</p> <p></p> <p>and hit Start New Project</p> <p>Now, enter your project name, for example, <code>MyAndroidApp</code>.</p> <p></p> <p>You'll see that the new project will be created in your home folder by default.</p> <p>Tip</p> <p>You can choose a different folder by clicking the three-dots button.</p> <p>The next step is to choose <code>Android -&gt; Application</code> project type.</p> <p></p> <p>Click Create Project</p> <p>Next, enter the Java namespace for your app. This is usually your domain name in reverse (e.g., <code>com.example.myapp</code>).</p> <p></p> <p>After entering the namespace, hit Enter to move to the next step, where you'll choose the <code>Android Min SDK Version</code>.</p> <p> The best choice is 28, to support the widest range of devices, hit <code>Enter</code>.</p> <p>Note</p> <p>The official Swift for Android SDK supports SDKs from 28 to 35.</p> <p>Next choose the <code>Android Compile SDK Version</code>.</p> <p></p> <p>Choose 35 and hit <code>Enter</code> one more time to start the project creation process.</p> <p>At this point, VSCode will create a folder with all the project files and begin downloading the Docker image with a ready-to-use Android development environment.</p> <p>Once the image is downloaded, it will start the container and open a new VSCode window with your project inside it. The container will then download the Swift toolchain, Swift for Android SDK, Gradle, Android NDK, and Android SDK.</p> <p>Note</p> <p>These tools are cached on shared Docker volumes, so your next project will be created in seconds.</p> <p>However, this first launch might take some time, so please be patient.</p> <p>Warning</p> <p>If you see a popup saying that the Swift toolchain is not found, please wait for several minutes until the toolchain is fully downloaded inside the container. This popup is from the official Swift extension for VSCode, and it cannot detect the toolchain while it's being downloaded.</p> <p>Please wait until you see the following:</p> <p></p> <p>And you're all set! Ready to write some code!</p> <p>Important</p> <p>If you seen the popup about missing Swift toolchain, then once everything is ready, please hit Ctrl/Cmd+Shift+P and choose Reload Window to make the Swift extension detect the toolchain.</p>"},{"location":"app/logging/","title":"Logging","text":""},{"location":"app/logging/#simply-print","title":"Simply Print","text":"<p>You can simply use <code>print</code> statements and they will appear in LogCat.</p> <pre><code>print(\"Hello from Swift!\")\n</code></pre> <p>In LogCat it will look like this:</p> <pre><code>I/Swift: Hello from Swift!\n</code></pre> <p>So all <code>print</code> statements are logged with the <code>Swift</code> tag and the <code>INFO</code> log level.</p> <p>These <code>print</code> calls are the simplest form of logging which works without any additional setup</p>"},{"location":"app/logging/#fine-grained-logging","title":"Fine Grained Logging","text":"<p>You have an option to use more advanced logging to see different log levels in LogCat.</p>"},{"location":"app/logging/#setup","title":"Setup","text":"<p>Set it up in \u2192 entry point of your application like this:</p> <pre><code>@main\npublic final class App: DroidApp {\n    @AppBuilder public override var body: Content {\n        Lifecycle.didFinishLaunching{\n            App.setLogLevel(.debug)\n            App.setInnerLogLevel(.debug)\n            Log.i(\"\ud83d\ude80 didFinishLaunching\")\n        }\n        // ...\n    }\n}\n</code></pre> <p>This sets the global log level to DEBUG so all log messages with level DEBUG and higher will be shown in LogCat.</p> <pre><code>App.setLogLevel(.debug)\n</code></pre> <p>It is for your own log messages.</p> <pre><code>App.setInnerLogLevel(.debug)\n</code></pre> <p>It is for internal log messages from the Droid framework. Enable it for debugging purposes. Disabled by default.</p>"},{"location":"app/logging/#log-levels","title":"Log Levels","text":"<p>You can use the following log levels:</p> <ul> <li><code>trace</code>: Very detailed logging, typically only enabled for development.</li> <li><code>debug</code>: Detailed logging for debugging purposes.</li> <li><code>info</code>: General information about the application's operation.</li> <li><code>notice</code>: Important information that is not an error.</li> <li><code>warning</code>: Indications of potential issues or important situations.</li> <li><code>error</code>: Errors that occur during the application's operation.</li> <li><code>critical</code>: Severe errors that require immediate attention.</li> </ul>"},{"location":"app/logging/#usage","title":"Usage","text":"<p>You can use the following methods to log messages at different levels:</p> <pre><code>Log.t(\"Trace message\")    // V/App: Trace message\nLog.d(\"Debug message\")    // D/App: Debug message\nLog.i(\"Info message\")     // I/App: Info message\nLog.n(\"Notice message\")   // I/App: Notice message\nLog.w(\"Warning message\")  // W/App: Warning message\nLog.e(\"Error message\")    // E/App: Error message\nLog.c(\"Critical message\") // F/App: Critical message\n</code></pre> <p>If you set the log level to DEBUG, you will see all messages from DEBUG to CRITICAL. So only the TRACE messages will be ignored.</p> <p>These log calls can be used anywhere in your Swift code and even can be enabled/disabled at runtime</p>"},{"location":"app/logging/#jni-logs","title":"JNI Logs","text":"<p>Underlying JNIKit also has its own logging mechanism.</p> <p>You can enable it in sidebar panel of Swift Stream IDE by enabling <code>JNI Logs</code> option.</p> <p>Be careful, it will produce a lot of noise in LogCat, but it can be useful for crash investigations</p>"},{"location":"app/manifest/","title":"Manifest","text":"<pre><code>\ud83d\udce6 Project Root\n\u251c\u2500\u2500 \ud83d\udcc4 Package.swift\n\u2514\u2500\u2500 \ud83d\udcc2 Sources\n    \u2514\u2500\u2500 \ud83d\udcc2 App\n        \u2514\u2500\u2500 \ud83d\udcc4 App.swift  # Entry Point\n</code></pre> <p>As described in \u2192 entry point <code>App.swift</code> is the main place where you define your Android application structure, including the manifest:</p> <pre><code>@main\npublic final class App: DroidApp {\n    @AppBuilder public override var body: Content {\n        Manifest\n            .usesPermissions(.camera)\n            .application {\n                .label(\"My app\")\n                .activities(\n                    MainActivity.self\n                )\n            }\n    }\n}\n</code></pre> <p>Swift Stream IDE then executes special <code>AppManifest</code> proxy target to generate the corresponding \u2192 AndroidManifest.xml file based on your declarative manifest definition in <code>App.swift</code>.</p> <p>Droid framework carefully provides all possible manifest options, so you can fully configure your app\u2019s manifest right from Swift code.</p>"},{"location":"app/manifest/#application","title":"application","text":"<p>Defines your app's core settings, like its name, icon, backup options, activities, and more.</p>"},{"location":"app/manifest/#activity","title":"activity","text":"<p>List all the activities of your application here:</p> <pre><code>.activities(\n    MainActivity.self,\n    SecondActivity.self,\n    ThirdActivity.self,\n    FourthActivity.self\n)\n</code></pre> <p>Or list them one by one:</p> <pre><code>.activity(MainActivity.self)\n.activity(SecondActivity.self)\n.activity(ThirdActivity.self)\n.activity(FourthActivity.self)\n</code></pre> <p>Setup of each activity is done in its own file, see \u2192 activities</p>"},{"location":"app/manifest/#activity-alias","title":"activity-alias","text":"<p>An activity alias provides an alternate entry point to an existing activity, allowing you to define additional intent filters or metadata for the same activity.</p> <pre><code>.activityAlias {\n    .enabled(true)\n    .exported(false)\n    .icon(\"@mipmap/ic_activity_alias\")\n    .label(\"Activity Alias Example\")\n    .name(\"ActivityAliasName\")\n    .permission(.camera)\n    .targetActivity(MainActivity.self)\n    .intentFilter {\n        .category(.launcher)\n        .action(.mediaMounted)\n        // and other params...\n    }\n    .metaData {\n        .name(\"key\").value(\"value\").resource(\"\")\n    }\n}\n</code></pre> <p>Details about each attribute in the official \u2192 documentation</p>"},{"location":"app/manifest/#allowtaskreparenting","title":"allowTaskReparenting","text":"<p>Whether activities that the application defines can move from the task that started them to the task they have an affinity for when that task is next brought to the front \u2192 learn more</p> <pre><code>.allowTaskReparenting(true)\n</code></pre>"},{"location":"app/manifest/#allowbackup","title":"allowBackup","text":"<p>Whether to let the application participate in the backup and restore infrastructure \u2192 learn more</p> <pre><code>.allowBackup(true)\n</code></pre>"},{"location":"app/manifest/#allowclearuserdata","title":"allowClearUserData","text":"<p>Whether to let the application reset user data \u2192 learn more</p> <pre><code>.allowClearUserData(true)\n</code></pre>"},{"location":"app/manifest/#allownativeheappointertagging","title":"allowNativeHeapPointerTagging","text":"<p>Whether the app enables the Heap pointer tagging feature \u2192 learn more</p> <pre><code>.allowNativeHeapPointerTagging(true)\n</code></pre>"},{"location":"app/manifest/#appcategory","title":"appCategory","text":"<p>Declares the category of this app. Categories are used to cluster multiple apps together into meaningful groups, such as when summarizing battery, network, or disk usage. Only define this value for apps that fit well into one of the specific categories \u2192 learn more</p> <pre><code>.appCategory(.game)\n</code></pre>"},{"location":"app/manifest/#backupagent","title":"backupAgent","text":"<p>The name of the backup agent class for the application \u2192 learn more</p> <pre><code>.backupAgent(\"com.example.MyBackupAgent\")\n</code></pre>"},{"location":"app/manifest/#banner","title":"banner","text":"<p>A drawable resource to use as the application's banner \u2192 learn more</p> <pre><code>.banner(\"@drawable/app_banner\")\n</code></pre>"},{"location":"app/manifest/#dataextractionrules","title":"dataExtractionRules","text":"<p>Pointer to XML resource with the rules determining which files and directories can be copied from the device as part of backup or transfer operations. \u2192 learn more</p> <pre><code>.dataExtractionRules(\"@xml/data_extraction_rules\")\n</code></pre>"},{"location":"app/manifest/#debuggable","title":"debuggable","text":"<p>Whether the application can be debugged, even when running on a device in user mode \u2192 learn more</p> <pre><code>.debuggable(true)\n</code></pre>"},{"location":"app/manifest/#description","title":"description","text":"<p>User-readable text about the application, which is longer and more descriptive than the application label \u2192 learn more</p> <pre><code>.description(\"This is my awesome Swift Android application!\")\n</code></pre>"},{"location":"app/manifest/#enabled","title":"enabled","text":"<p>Whether the Android system can instantiate components of the application \u2192 learn more</p> <pre><code>.enabled(true)\n</code></pre>"},{"location":"app/manifest/#enableonbackinvokedcallback","title":"enableOnBackInvokedCallback","text":"<p>This flag lets you opt out of predictive system animations at the app level \u2192 learn more</p> <pre><code>.enableOnBackInvokedCallback(true)\n</code></pre>"},{"location":"app/manifest/#extractnativelibs","title":"extractNativeLibs","text":"<p>Starting with AGP 4.2.0 it is replaced by <code>useLegacyPackaging</code></p> <p>Indicates whether the package installer extracts native libraries from the APK to the file system. If set to \"false\", your native libraries are stored uncompressed in the APK. Although your APK might be larger, your application loads faster because the libraries load directly from the APK at runtime \u2192 learn more</p> <pre><code>.extractNativeLibs(true)\n</code></pre> <p>The default value depends on <code>minSdkVersion</code> and the version of AGP you're using. In most cases, the default behavior is probably what you want, and you don't have to set this attribute explicitly.</p>"},{"location":"app/manifest/#fullbackupcontent","title":"fullBackupContent","text":"<p>Points to an XML file that contains full backup rules for Auto Backup \u2192 learn more</p> <pre><code>.fullBackupContent(\"@xml/full_backup_content\")\n</code></pre>"},{"location":"app/manifest/#fullbackuponly","title":"fullBackupOnly","text":"<p>Indicates whether to use Auto Backup on devices where it is available \u2192 learn more</p> <pre><code>.fullBackupOnly(true)\n</code></pre>"},{"location":"app/manifest/#gwpasanmode","title":"gwpAsanMode","text":"<p>Indicates whether to use GWP-ASan, a native memory allocator feature that helps find use-after-free and heap-buffer-overflow bugs \u2192 learn more</p> <pre><code>.gwpAsanMode(.never)\n</code></pre>"},{"location":"app/manifest/#hascode","title":"hasCode","text":"<p>Whether the application contains any DEX code \u2192 learn more</p> <pre><code>.hasCode(true)\n</code></pre>"},{"location":"app/manifest/#hasfragileuserdata","title":"hasFragileUserData","text":"<p>Whether to show the user a prompt to keep the app's data when the user uninstalls the app \u2192 learn more</p> <pre><code>.hasFragileUserData(true)\n</code></pre>"},{"location":"app/manifest/#hardwareaccelerated","title":"hardwareAccelerated","text":"<p>Whether hardware-accelerated rendering is enabled for all activities and views in this application \u2192 learn more</p> <pre><code>.hardwareAccelerated(true)\n</code></pre>"},{"location":"app/manifest/#icon","title":"icon","text":"<p>An icon for the application as whole and the default icon for each of the application's components \u2192 learn more</p> <pre><code>.icon(\"@mipmap/ic_launcher\")\n</code></pre>"},{"location":"app/manifest/#ismonitoringtool","title":"isMonitoringTool","text":"<p>Indicates that this application is designed to monitor other individuals \u2192 learn more and \u2192 even more</p> <pre><code>.isMonitoringTool(.childMonitoring)\n</code></pre>"},{"location":"app/manifest/#killafterrestore","title":"killAfterRestore","text":"<p>Whether the application terminates after its settings have been restored during a full-system restore operation \u2192 learn more</p> <pre><code>.killAfterRestore(true)\n</code></pre>"},{"location":"app/manifest/#largeheap","title":"largeHeap","text":"<p>Whether the application's processes are created with a large Dalvik heap \u2192 learn more</p> <pre><code>.largeHeap(true)\n</code></pre>"},{"location":"app/manifest/#label","title":"label","text":"<p>The <code>label</code> attribute specifies the name of the application as it appears to users on their device, such as on the home screen or in the app settings. It helps users identify your app among others \u2192 learn more</p> <pre><code>.label(\"My app\")\n</code></pre>"},{"location":"app/manifest/#logo","title":"logo","text":"<p>Specifies a drawable resource used as your app\u2019s branding image in certain system UI elements, such as the Action Bar or app title area. It\u2019s optional and distinct from the main app icon. If not set, the icon or no image is shown instead \u2192 learn more</p> <pre><code>.logo(\"@drawable/logo\")\n</code></pre>"},{"location":"app/manifest/#managespaceactivity","title":"manageSpaceActivity","text":"<p>Specifies a custom Activity that the system can launch to let users manage your app\u2019s storage (e.g., clear cached or downloaded data). You must implement this activity and declare it in your manifest \u2192 learn more</p> <pre><code>.manageSpaceActivity(\"ManageSpaceActivity.self\")\n</code></pre> <p>Assuming that you already have <code>ManageSpaceActivity</code> activity class.</p> <p>Modern Android versions often handle this automatically, so this attribute is optional and rarely needed</p>"},{"location":"app/manifest/#name","title":"name","text":"<p>The fully qualified name of an Application subclass implemented for the application \u2192 learn more</p> <pre><code>.name(\"com.example.MyApplication\")\n</code></pre> <p>This setting is already set under the hood to <code>stream.swift.droid.appkit.DroidApp</code>. Changing it may lead to unexpected behavior!</p>"},{"location":"app/manifest/#networksecurityconfig","title":"networkSecurityConfig","text":"<p>Points to an XML resource file that configures the network security settings for the application \u2192 learn more and \u2192 even more</p> <pre><code>.networkSecurityConfig(\"@xml/network_security_config\")\n</code></pre>"},{"location":"app/manifest/#permission","title":"permission","text":"<p>Specifies a default permission that other apps must hold to interact with your app\u2019s components (e.g., activities, services, receivers). It applies globally unless overridden by individual components\u2019 own <code>permission</code>. Useful for restricting access to exported features of your app \u2192 learn more and check \u2192 security tips</p> <pre><code>.permission(\"com.example.myapp.ACCESS_APP_FEATURES\")\n</code></pre>"},{"location":"app/manifest/#persistent","title":"persistent","text":"<p>Whether the application remains running at all times \u2192 learn more</p> <pre><code>.persistent(true)\n</code></pre> <p>Applications don't normally set this flag Persistence mode is intended only for certain system applications</p>"},{"location":"app/manifest/#process","title":"process","text":"<p>Defines the name of the process in which the app or component should run. If set on the <code>application</code>, it applies to all components unless overridden individually. Process names starting with <code>:</code> create private secondary processes, fully qualified names allow shared processes across apps. Useful for isolating heavy or background tasks \u2192 learn more</p> <pre><code>.process(\":remote\")\n</code></pre> <p>And if you have a service it may have e.g. <code>:background</code> process name.</p>"},{"location":"app/manifest/#restoreanyversion","title":"restoreAnyVersion","text":"<p>Indicates that the application is prepared to attempt a restore of any backed-up data set, even if the backup was stored by a newer version of the application than is currently installed on the device \u2192 learn more</p> <pre><code>.restoreAnyVersion(true)\n</code></pre>"},{"location":"app/manifest/#requestlegacyexternalstorage","title":"requestLegacyExternalStorage","text":"<p>Specifies whether the app should use the legacy external storage model (pre\u2013Android 10). When set to <code>true</code>, it allows unrestricted file access on Android 10 (API 29) devices. Ignored on Android 11 (API 30) and higher, where scoped storage is always enforced \u2192 learn more</p> <pre><code>.requestLegacyExternalStorage(true)\n</code></pre> <p>Intended only as a temporary migration aid</p>"},{"location":"app/manifest/#requiredaccounttype","title":"requiredAccountType","text":"<p>Specifies the account type that your app requires, usually corresponding to an account managed by Android\u2019s AccountManager (e.g., for sync or authentication) \u2192 learn more</p> <pre><code>.requiredAccountType(\"com.example.account\")\n</code></pre> <p>Used mainly by system or enterprise apps that depend on a specific account type</p>"},{"location":"app/manifest/#resizeableactivity","title":"resizeableActivity","text":"<p>Specifies whether your app or activity supports multi-window mode (split-screen, freeform, or PiP). When true, the activity can be resized; when false, it runs fullscreen \u2192 learn more</p> <pre><code>.resizeableActivity(true)\n</code></pre> <p>Starting with Android 16 (API 36), this attribute is ignored on large-screen devices (\u2265 600dp smallest width), as all apps are treated as resizable</p>"},{"location":"app/manifest/#restrictedaccounttype","title":"restrictedAccountType","text":"<p>Specifies the type of account that the app can create and manage within restricted user profiles (e.g., limited-access tablet profiles). Typically used with <code>AccountManager</code> and custom account types \u2192 learn more</p> <pre><code>.restrictedAccountType(\"com.example.restricted\")\n</code></pre> <p>Mostly relevant for enterprise or education apps</p>"},{"location":"app/manifest/#supportsrtl","title":"supportsRtl","text":"<p>Declares whether your application is willing to support right-to-left (RTL) layouts \u2192 learn more</p> <pre><code>.supportsRtl(true)\n</code></pre>"},{"location":"app/manifest/#taskaffinity","title":"taskAffinity","text":"<p>Specifies the logical task group an activity belongs to. Activities with the same affinity share the same task (back stack). Changing this value allows activities to open in separate tasks \u2014 useful for document-style apps, deep links, or isolating flows \u2192 learn more</p> <pre><code>.taskAffinity(\"com.example.myapp.TASK_AFFINITY\")\n</code></pre> <p>Defaults to the app\u2019s package name</p>"},{"location":"app/manifest/#testonly","title":"testOnly","text":"<p>Indicates whether this application is only for testing purposes \u2192 learn more</p> <pre><code>.testOnly(true)\n</code></pre>"},{"location":"app/manifest/#theme","title":"theme","text":"<p>A reference to a style resource defining a default theme for all activities in the application. Individual activities can override the default by \u2192 setting their own theme \u2192 learn more</p> <pre><code>.theme(.material3DayNightNoActionBar)\n</code></pre>"},{"location":"app/manifest/#uioptions","title":"uiOptions","text":"<p>Specifies special UI behavior for the application or activity, mainly affecting the Action Bar. Common values include splitActionBarWhenNarrow, which moves overflow items to a bottom bar on narrow screens \u2192 learn more</p> <pre><code>.uiOptions(.splitActionBarWhenNarrow)\n</code></pre> <p>Rarely needed in modern apps using Toolbar or Material Design components</p>"},{"location":"app/manifest/#usescleartexttraffic","title":"usesCleartextTraffic","text":"<p>Specifies whether the app allows cleartext (unencrypted) network traffic such as HTTP. Set to <code>true</code> only if your app must connect to legacy HTTP servers \u2192 learn more</p> <pre><code>.usesCleartextTraffic(false)\n</code></pre> <p>The default value for apps that target API level 27 or lower is \"true\". Apps that target API level 28 or higher default to \"false\".</p> <p>WebView honors this attribute for applications targeting API level 26 and higher</p>"},{"location":"app/manifest/#vmsafemode","title":"vmSafeMode","text":"<p>Indicates whether the app should run in VM safe mode, disabling certain Dalvik/ART optimizations for stability \u2192 learn more</p> <pre><code>.vmSafeMode(true)\n</code></pre> <p>Intended for debugging or very old devices and ignored on modern Android versions</p>"},{"location":"app/manifest/#backupinforeground","title":"backupInForeground","text":"<p>Whether backups can be performed while the application is in the foreground \u2192 learn more</p> <pre><code>.backupInForeground(true)\n</code></pre>"},{"location":"app/manifest/#compatiblescreen","title":"compatibleScreen","text":"<p>Specifies the screen sizes with which the application is compatible \u2192 learn more</p> <pre><code>.compatibleScreens {\n    .screen(.normal, .hdpi)\n    .screen(.normal, .xhdpi)\n    .screen(.large, .hdpi)\n}\n</code></pre> <p>Using this element can greatly reduce the potential user base for your application, by not allowing it to be installed on devices with screen configurations not listed here. Normally, you should not use this manifest element at all.</p>"},{"location":"app/manifest/#installlocation","title":"installLocation","text":"<p>The preferred install location for the application \u2192 learn more</p> <pre><code>.installLocation(.auto)\n</code></pre> <p>Accepts <code>internalOnly</code>, <code>preferExternal</code>, and <code>auto</code> values.</p>"},{"location":"app/manifest/#instrumentation","title":"instrumentation","text":"<p>Specifies an instrumentation class that runs against the application \u2192 learn more</p> <pre><code>.instrumentation {\n    .functionalTest(true)\n    .handleProfiling(true)\n    .icon(\"@mipmap/some_icon\")\n    .label(\"Instrumentation Label\")\n    .name(\"InstrumentationName\")\n    .targetPackage(\"com.example.targetpackage\")\n    .targetProcesses(\"com.example.targetprocess\")\n}\n</code></pre>"},{"location":"app/manifest/#package","title":"package","text":"<p>A full Java-language-style package name for the Android app \u2192 learn more</p> <pre><code>.package(\"com.example.myapp\")\n</code></pre>"},{"location":"app/manifest/#permission_1","title":"permission","text":"<p>Declares a security permission that the application must have in order to be granted access to a particular component or set of components \u2192 learn more</p> <pre><code>.permission {\n    .description(\"Allows access to the camera device\")\n    .icon(\"@drawable/ic_camera_permission\")\n    .label(\"Camera Access\")\n    .name(.camera)\n    .permissionGroup(.camera)\n    .protectionLevel(.dangerous)\n}\n</code></pre>"},{"location":"app/manifest/#permissiongroup","title":"permissionGroup","text":"<p>Declares a group of related security permissions \u2192 learn more</p> <pre><code>.permissionGroup {\n    .description(\"Group of permissions related to camera access\")\n    .icon(\"@drawable/ic_camera_group\")\n    .label(\"Camera Permissions\")\n    .name(.camera)\n}\n</code></pre>"},{"location":"app/manifest/#permissiontree","title":"permissionTree","text":"<p>Declares a tree of related security permissions \u2192 learn more</p> <pre><code>.permissionTree {\n    .icon(\"@drawable/ic_permission_tree\")\n    .label(\"Permission Tree Example\")\n    .name(\"com.example.permission.TREE\")\n}\n</code></pre>"},{"location":"app/manifest/#protectionlevel","title":"protectionLevel","text":"<p>Specifies the level of protection for the permission being declared \u2192 learn more</p> <pre><code>.protectionLevel(.dangerous)\n</code></pre> <p>Accepts <code>normal</code>, <code>dangerous</code>, <code>signature</code>, and <code>signatureOrSystem</code> values</p>"},{"location":"app/manifest/#shareduserid","title":"sharedUserId","text":"<p>The name of a Linux user ID that will be shared with other applications \u2192 learn more</p> <pre><code>.sharedUserId(\"com.example.shareduserid\")\n</code></pre> <p>This constant is deprecated as of API level 29</p>"},{"location":"app/manifest/#shareduserlabel","title":"sharedUserLabel","text":"<p>The user-visible label for the shared user ID \u2192 learn more</p> <pre><code>.sharedUserLabel(\"Shared User\")\n</code></pre> <p>This constant is deprecated as of API level 29</p>"},{"location":"app/manifest/#usespermission","title":"usesPermission","text":"<p>Declares permissions that the application must have in order to access a particular feature or API \u2192 learn more</p> <pre><code>.usesPermissions(.camera)\n.usesPermissions(.camera, .bluetooth)\n</code></pre>"},{"location":"app/manifest/#usesfeature","title":"usesFeature","text":"<p>Declares a hardware or software features that the application requires or can use \u2192 learn more</p> <pre><code>.usesFeatures(.hardwareCamera)\n.usesFeatures(.hardwareCamera, .hardwareBluetooth)\n.usesFeatures(.hardwareCamera, .hardwareBluetooth, required: false)\n</code></pre> <p><code>required</code> is <code>true</code> by default so can be omitted</p>"},{"location":"app/manifest/#versioncode","title":"versionCode","text":"<p>An integer value that represents the version of the application code, relative to other versions \u2192 learn more</p> <pre><code>.versionCode(1)\n</code></pre>"},{"location":"app/manifest/#versionname","title":"versionName","text":"<p>A string value that represents the release version of the application code, as it should be shown to users \u2192 learn more</p> <pre><code>.versionName(\"1.0.0\")\n</code></pre>"},{"location":"app/permissions/","title":"Permissions","text":"<p>In Android permissions are declared in the <code>Manifest</code>, read more in \u2192 uses-permission section.</p> <p>When all permissions are declared you can request them at runtime.</p> <p><code>Activity</code> has built-in support for requesting permissions:</p>"},{"location":"app/permissions/#asyncawait","title":"Async/Await","text":"<p>The most Swiftly way to request permissions is using async/await:</p> <pre><code>let results = await self.requestPermissions(.camera, .bluetooth)\nfor result in results {\n    print(\"\\(result.permission): \\(result.granted)\")\n}\n</code></pre>"},{"location":"app/permissions/#closure-callback","title":"Closure Callback","text":"<p>If async/await is not an option you can use closure callback:</p> <pre><code>self.requestPermissions(.camera, .bluetooth) { results in\n    for result in results {\n        print(\"\\(result.permission): \\(result.granted)\")\n    }\n}\n</code></pre> <p>Random <code>requestCode</code> is generated internally to identify the request, but you can also provide your own.</p>"},{"location":"app/permissions/#classic-experience","title":"Classic Experience","text":"<p>This way is exactly like in native Android development: you check permission, request it, and handle the result in <code>onRequestPermissionsResult</code> method.</p> <pre><code>final class MyActivity: AppCompatActivity {\n    override var body: any Body {\n        Button(\"Request Camera\")\n            .onClick { [weak self] in\n                guard let self else { return }\n                if self.checkPermission(.camera) {\n                    print(\"Permission already granted\")\n                } else {\n                    self.requestPermissions(.camera, requestCode: 123)\n                }\n            }\n    }\n\n    override func onRequestPermissionsResult(\n        requestCode: Int,\n        results: [ActivityPermissionResult],\n        deviceId: Int\n    ) {\n        super.onRequestPermissionsResult(\n            requestCode: requestCode,\n            results: results,\n            deviceId: deviceId\n        )\n        Log.d(\"\"\"onRequestPermissionsResult \n            requestCode: \\(requestCode)\n            deviceId: \\(deviceId)\n            results.count: \\(results.count)\n        \"\"\")\n        for result in results {\n            Log.i(\"Permission for \\(result.permission): \\(result.granted)\")\n        }\n    }\n}\n</code></pre> <p>When <code>checkPermission</code> called it also checks if the permission is declared in the <code>Manifest</code>. If not, a warning is logged.</p> <p><code>\u26a0\ufe0f You forgot to add `.usesPermissions(.camera)` to your `DroidApp` manifest!</code></p> <p>Read more how to fix it in \u2192 uses-permission section.</p>"},{"location":"app/r/","title":"Resource IDs","text":"<p>Resources are accessed via the generated Java <code>R</code> class. Each resource in your <code>res</code> directory is assigned a unique integer ID in this class, which is typically used to reference the resource in Java or Kotlin code.</p> <p>The Droid framework does not generate a separate Swift <code>R</code> class. It just bridges Swift code to the generated Java <code>R</code> class using <code>@dynamicMemberLookup</code> feature, allowing you to access resource IDs as Swift properties directly.</p> <p>In Android you can use simple <code>R.type.name</code> syntax to access resource IDs, where <code>type</code> is the resource type (like <code>string</code>, <code>drawable</code>, etc.) and <code>name</code> is the resource name defined in XML files.</p> <p>It is important to note that not all resources are accessible directly through <code>R</code>. Certain resources, such as those provided by the Android framework, must be accessed using a class prefix like <code>android.R</code>.</p> <p>Droid framework covers both cases as easy as:</p> <pre><code>let stringId: Int32 = R.string.my_string_resource\nlet iconId: Int32 = android.R.drawable.ic_dialog_email\n</code></pre> <p>If you need to access resource ID with a custom class then you have to write a small helper:</p> <pre><code>@MainActor\nstruct mylib: ~Copyable {\n    static let R = InnerR(\"com/mycompany/mylib\")\n}\n</code></pre> <p>and use it like this:</p> <pre><code>let myStringId: Int32 = mylib.R.string.my_string_resource\n</code></pre> <p>Here <code>mylib.R</code> represents <code>com.mycompany.mylib.R</code> Java class.</p>"},{"location":"app/r/#types","title":"Types","text":"<p>The generated <code>R</code> class contains nested classes for each resource type, such as:</p> <ul> <li><code>R.id</code>: for view IDs</li> <li><code>R.attr</code>: for custom attributes</li> <li><code>R.menu</code>: for menu resources</li> <li><code>R.drawable</code>: for drawable resources</li> <li><code>R.string</code>: for string resources</li> <li><code>R.anim</code>: for animation resources</li> <li><code>R.animator</code>: for animator resources</li> <li><code>R.array</code>: for array resources</li> <li><code>R.bool</code>: for boolean resources</li> <li><code>R.color</code>: for color resources</li> <li><code>R.dimen</code>: for dimension resources</li> <li><code>R.fraction</code>: for fraction resources</li> <li><code>R.integer</code>: for integer resources</li> <li><code>R.interpolator</code>: for interpolator resources</li> <li><code>R.layout</code>: for layout resources</li> <li><code>R.mipmap</code>: for mipmap resources</li> <li><code>R.plurals</code>: for plural resources</li> <li><code>R.raw</code>: for raw resources</li> <li><code>R.style</code>: for style resources</li> <li><code>R.transition</code>: for transition resources</li> <li><code>R.xml</code>: for XML resources</li> </ul>"},{"location":"app/shared-preferences/","title":"Shared Preferences","text":"<p>Shared Preferences is a key-value storage mechanism that allows you to store and retrieve small amounts of primitive data types in your Android application. It is commonly used for storing user preferences, settings, and other application-specific data.</p>"},{"location":"app/shared-preferences/#preferences-class","title":"Preferences Class","text":"<p>You can access it via context's <code>sharedPreferences</code> method:</p> <pre><code>let prefs: SharedPreferences? = self.context.sharedPreferences(\"my_prefs\")\n</code></pre> <p>on <code>Activity</code> or <code>Service</code> you can use it directly:</p> <pre><code>let prefs: SharedPreferences? = self.sharedPreferences(\"my_prefs\")\n</code></pre> <p>This method takes the name of the preferences file as a parameter and returns an instance of <code>SharedPreferences</code>.</p>"},{"location":"app/shared-preferences/#storing-data","title":"Storing Data","text":"<p>To store data in Shared Preferences, you need to use the <code>edit</code> method to obtain an instance of <code>SharedPreferences.Editor</code>. You can then use the editor to put key-value pairs and commit the changes.</p> <pre><code>if let editor = prefs?.edit() {\n    editor.putString(\"username\", \"john_doe\")\n    editor.putInt(\"age\", 30)\n    editor.putBoolean(\"isLoggedIn\", true)\n    editor.apply() // or editor.commit()\n}\n</code></pre>"},{"location":"app/shared-preferences/#retrieving-data","title":"Retrieving Data","text":"<p>To retrieve data from Shared Preferences, you can use the various <code>get</code> methods provided by the <code>SharedPreferences</code> class. You need to provide the key and a default value in case the key does not exist.</p> <pre><code>let username: String? = prefs?.getString(\"username\", defaultValue: \"guest\")\nlet age: Int32 = prefs?.getInt(\"age\", defaultValue: 0)\nlet isLoggedIn: Bool = prefs?.getBoolean(\"isLoggedIn\", defaultValue: false)\n</code></pre>"},{"location":"app/shared-preferences/#removing-data","title":"Removing Data","text":"<p>To remove a specific key-value pair from Shared Preferences, you can use the <code>remove</code> method of the <code>SharedPreferences.Editor</code>.</p> <pre><code>if let editor = prefs?.edit() {\n    editor.remove(\"username\")\n    editor.apply() // or editor.commit()\n}\n</code></pre>"},{"location":"app/shared-preferences/#clearing-all-data","title":"Clearing All Data","text":"<p>To clear all data from Shared Preferences, you can use the <code>clear</code> method of the <code>SharedPreferences.Editor</code>.</p> <pre><code>if let editor = prefs?.edit() {\n    editor.clear()\n    editor.apply() // or editor.commit()\n}\n</code></pre> <p>This will remove all key-value pairs from the specified Shared Preferences file.</p>"},{"location":"app/shared-preferences/#commit-vs-apply","title":"Commit vs Apply","text":"<p>When saving changes to Shared Preferences, you have two options: <code>commit</code> and <code>apply</code>.</p> <ul> <li> <p><code>commit</code>: This method writes the changes synchronously and returns a boolean indicating whether the operation was successful. It is recommended to use this method when you need to ensure that the changes are saved immediately.</p> </li> <li> <p><code>apply</code>: This method writes the changes asynchronously and does not return a value. It is generally faster than <code>commit</code> and is recommended for most use cases where immediate confirmation of the save operation is not required.</p> </li> </ul>"},{"location":"app/state/","title":"Reactivity with @State","text":"<p><code>@State</code> plays a central role in modern declarative UI development.</p> <p>The Droid framework utilizes the unified <code>@State</code> property wrapper from the SwiftStream crossplatform ecosystem.</p> <p>Even though it looks like SwiftUI's one, it is implemented differently under the hood. There is no global state machine that tracks and redraws everything. Android views are not temporary structs but classes. When you mark a property with <code>@State</code>, it automatically notifies only the views that actually depend on its value.</p> <p>Here the text view listens to changes in a state variable.</p> <pre><code>@State var text = \"Hello, World!\"\n\nVStack {\n    TextView($text)\n        .textColor(.blue)\n    Button(\"Change Text\").onClick {\n        text = \"Text Updated!\"\n    }\n}\n</code></pre> <p>The text inside the <code>TextView</code> updates automatically when the button is pressed because <code>setText</code> called under the hood whenever <code>text</code> state changes.</p> <p>Note the <code>$</code> prefix when passing the state variable to the <code>TextView</code> This is required to pass the state reference instead of its current value</p>"},{"location":"app/state/#mapping","title":"Mapping","text":"<p>The <code>map</code> function allows you to transform the value of a <code>@State</code> property into another value. This is useful for creating derived states based on the original state.</p> <p>Classic example with counter:</p> <pre><code>@State var count = 0\n\nVStack {\n    TextView($count.map { \"Count: \\($0)\" })\n    Button(\"Increment\") {\n        count += 1\n    }\n}\n</code></pre> <p>As you can see you can't use just string interpolation <code>\"Count: \\(count)\"</code> with <code>@State</code> properties. Instead, you need to use <code>map</code> to transform the integer value into a string.</p> <p>Example with boolean:</p> <pre><code>@State var enabled = true\n\nVStack {\n    TextView($enabled.map { $0 ? \"Enabled\" : \"Disabled\" })\n    Button(\"Toggle\") {\n        enabled.toggle()\n    }\n}\n</code></pre> <p>Even though the state holds a boolean, you can show a string that depends on it.</p> <p>More complex example with enum:</p> <pre><code>enum Status: String {\n    case active = \"Active\"\n    case inactive = \"Inactive\"\n}\n\n@State var active: Status = .active\n\nTextView($active.map { $0.rawValue })\n    .textColor($active.map { status in\n        switch status {\n        case .active: return .green\n        case .inactive: return .red\n        }\n    })\n    // or shorter\n    .textColor($active.map { $0 == .active ? .green : .red })\n</code></pre> <p>Here when status changes, both the text and text color will update accordingly.</p>"},{"location":"app/state/#mapping-two-states","title":"Mapping two states","text":"<p>The <code>and</code> function allows you to combine two <code>@State</code> properties into a single derived state. This is useful when you want to create a new state based on the logical relationship between two existing states.</p> <pre><code>@State var one = true\n@State var two = true\n\nTextView(\"Hey\")\n    .visibility($one.and($two).map { one, two in\n        // returns .visible if both one and two are true\n        one &amp;&amp; two ? .visible : .gone\n    })\n</code></pre> <p>Here the visibility of the <code>TextView</code> will be updated based on the values of both <code>one</code> and <code>two</code> states, showing the view only when both are <code>true</code>.</p>"},{"location":"app/state/#mapping-more","title":"Mapping more","text":"<p>You can chain multiple <code>and</code> calls to combine more than two <code>@State</code> properties.</p> <pre><code>@State var a = true\n@State var b = true\n@State var c = 15\n\nTextView(\"Hey\")\n    .visibility($a.and($b).and(c).map { a, b, c in\n        // returns .visible if a is true and b is true and c is 15\n        a &amp;&amp; b &amp;&amp; c == 15 ? .visible : .gone\n    })\n</code></pre> <p>Combine up to 7 states this way.</p> <p>Or infinitely many using nested maps:</p> <pre><code>@State var a = true\n@State var b = true\n@State var c = 15\n\nTextView(\"Hey\")\n    .visibility($a.and($b).map { a, b in\n        // returns true if both a and b are true\n        a &amp;&amp; b\n    }\n    // here ab is a result of the previous mapping\n    .and($c).map { ab, c in\n        // returns .visible if ab is true and c is 15\n        ab &amp;&amp; c == 15 ? .visible : .gone\n    })\n</code></pre>"},{"location":"app/state/#merge","title":"Merge","text":"<p>The <code>merge</code> function allows you to combine the value of a <code>@State</code> property with another <code>@State</code> property. This is useful when you want to synchronize the values of two states.</p> <pre><code>class SomeView: View {\n    @State var active: Bool = false\n\n    override var body: any Body {\n        SomeSubview()\n            .enabled($active)\n    }\n}\nclass SomeSubview: View {\n    @State var enabled: Bool = true\n\n    func enabled(_ state: State&lt;Bool&gt;) -&gt; Self {\n        $enabled.merge(with: state).hold(in: self)\n        return self\n    }\n\n    override var body: any Body {\n        TextView($enabled.map { $0 ? \"Enabled\" : \"Disabled\" })\n    }\n}\n</code></pre> <p>In this example, when the <code>active</code> state in <code>SomeView</code> changes, it will automatically update the <code>enabled</code> state in <code>SomeSubview</code>, and if <code>SomeSubview</code> changes its own <code>enabled</code> state, it will update the external <code>active</code> state as well. So both states stay in sync, creating a two-way binding.</p> <p>Merge operation generates two listeners which you should hold to control their lifecycle. In the example above we use <code>.hold(in: self)</code> to attach them to the <code>SomeSubview</code> instance. So when the subview is destroyed, the listeners are released automatically. Read more about that in \u2192 management</p> <p>If you want to destroy these listeners earlier you can pass <code>TempStatesHolder</code> to the <code>hold(in:)</code> method. Store this holder where appropriate, listeners will be released when the holder is deallocated or when you call <code>releaseStates()</code> on it.</p>"},{"location":"app/state/#reset","title":"Reset","text":"<p>You can reset a <code>@State</code> property to its initial value using the <code>reset()</code> method.</p> <pre><code>@State var counter: Int = 0\n/// ... some code that changes counter ...\ncounter.reset() // counter is now 0\n</code></pre>"},{"location":"app/state/#listeners","title":"Listeners","text":"<p>The <code>listen</code> function allows you to observe changes to a <code>@State</code> property. This is useful for executing custom logic whenever the state changes.</p> <p>You can listen to the new value of the state, or both the old and new values, depending on your requirements.</p> <pre><code>enum Countries {\n    case australia, mexico, brazil\n}\n\n@State var selectedCountry: Countries = .australia\n\n$selectedCountry.listen {\n    Log.i(\"Country changed\")\n}\n$selectedCountry.listen { newValue in\n    Log.i(\"Country changed to \\(newValue)\")\n}\n$selectedCountry.listen { oldValue, newValue in\n    Log.i(\"Country changed from \\(oldValue) to \\(newValue)\")\n}\n</code></pre> <p>Listening Only When the Value Actually Changes</p> <p>In many scenarios, a <code>@State</code> property may be set to the same value multiple times, either because of UI updates, background synchronization, or simply the way the component logic is structured.</p> <p>Calling listeners for value assignments that don\u2019t actually change anything can lead to unnecessary work, redundant UI updates, or wasted processing.</p> <p>If the value conforms to <code>Equatable</code>, you can use the <code>listenDistinct</code> method to observe state changes only when the value is truly different.</p> <pre><code>// Only called when the value actually changes\n$selectedCountry.listenDistinct { newValue in\n    Log.i(\"Country changed to \\(newValue)\")\n}\n$selectedCountry.listenDistinct { oldValue, newValue in\n    Log.i(\"Country changed from \\(oldValue) to \\(newValue)\")\n}\n</code></pre> <p>If <code>selectedCountry</code> is set to <code>.australia</code> while it is already <code>.australia</code>, the <code>listenDistinct</code> will not fire, while the regular <code>listen</code> method would still be called.</p> <p>Avoid using <code>self</code> directly inside listener closures to prevent retain cycles. Use <code>[weak self]</code> instead.</p>"},{"location":"app/state/#management","title":"Management","text":"<p>When you attach a listener to a <code>@State</code> value using <code>.listen { ... }</code>, the call returns a <code>StateListener</code> object. This object represents the connection between the state and the listener you just created and can be controlled either manually or automatically with <code>StatesHolder</code>.</p> <pre><code>let listener = $counter.listen { newValue in\n    Log.i(\"Counter changed: \\(newValue)\")\n}\n</code></pre> <p>By default, listeners stay alive as long as the <code>@State</code> exists. This is great for global state, but in other cases without control it can easily lead to memory leaks.</p>"},{"location":"app/state/#built-in-cleanup","title":"Built-in Cleanup","text":"<p>The good news is that when you build UI using framework-provided views, you do not need to manage listeners yourself. All built-in views such as <code>TextView</code>, <code>Button</code>, <code>EditText</code>, etc., already know how to:</p> <ul> <li>attach listeners to the states they receive</li> <li>call <code>.hold(in: self)</code> internally</li> <li>automatically clean everything up when the view is destroyed</li> </ul> <p>This means that code like:</p> <pre><code>@State var counter: Int = 0\n\noverride var body: any Body {\n    TextView($counter.map { \"Count: \\($0)\" })\n}\n</code></pre> <p>requires absolutely no additional work.</p> <p>Here <code>TextView</code> internally attaches a listener to <code>$counter</code> and holds it in the view instance. When the <code>TextView</code> object is deallocated, the listener is released automatically.</p> <p>TL;DR</p> <p>No need to think about <code>StatesHolder</code>, <code>.hold(in:)</code>, or <code>releaseStates()</code> when using standard Droid views.</p>"},{"location":"app/state/#automatic-cleanup","title":"Automatic Cleanup","text":"<p>Every view or object that wants to own <code>@State</code> should conform to <code>StatesHolder</code>.</p> <p>If you write a custom view class that accepts a <code>State</code> and wants to react to it, then you must explicitly hold the listener. <code>View</code> already conforms to <code>StatesHolder</code>, so you can use <code>self</code> to hold the listener.</p> <pre><code>class CustomView: View {\n    init(id: Int32? = nil, _ state: State&lt;String&gt;) {\n        super.init(id: id)\n        state.listenDistinct { [weak self] old, new in\n            guard old != new else { return }\n            self?.updateLabel(new)\n        }\n        .hold(in: self) // required: attach listener to this view\n    }\n\n    private func updateLabel(_ newValue: String) {\n        // Update Android UI here\n    }\n}\n</code></pre> <p>How it works:</p> <ul> <li><code>.hold(in: self)</code> stores the listener inside your view</li> <li>when your view is destroyed, <code>deinit</code> calls <code>releaseStates()</code></li> </ul> <p>If you create another class that own listeners (for example, a controller, service, or lifetime-managed object), you should also conform it to <code>StatesHolder</code>. In that case, you are responsible for calling <code>releaseStates()</code> in its <code>deinit</code>, just like <code>View</code> does internally:</p> <pre><code>final class MyController: StatesHolder {\n    let statesValues = StatesHolderValuesBox()\n\n    deinit { \n        releaseStates() // required\n    }\n}\n</code></pre> <p>Now you can safely store listeners inside it.</p>"},{"location":"app/state/#manual-cleanup","title":"Manual Cleanup","text":"<p>If you want manual control, you can keep the returned <code>StateListener</code> and call <code>.cancel()</code> yourself:</p> <pre><code>let listener = $status.listen { new in\n    Log.i(\"Status changed: \\(new)\")\n}\n// ...\nlistener.cancel() // manually disconnect the listener\n</code></pre> <p>This can be useful in cases where you want to:</p> <ul> <li>remove a listener at a specific moment</li> <li>swap listeners dynamically</li> </ul> <p>But for view lifecycles, automatic cleanup through <code>StatesHolder</code> is strongly recommended.</p> <p>Additionally you can remove all listeners attached to a <code>@State</code> property using the <code>removeListeners()</code> method.</p> <pre><code>@State var value: String = \"Initial\"\n/// ... some code that adds listeners to value ...\nvalue.removeListeners() // All listeners are now removed\n</code></pre> <p>This may be useful if you don't want to keep references to certain listeners and want to clear them all at once.</p>"},{"location":"app/state/#universal-value","title":"Universal Value","text":"<p>Make your methods accept both regular values and <code>@State</code> references using the <code>StateValuable</code> protocol.</p> <p>Instead of writing two methods:</p> <pre><code>func text(_ value: String) -&gt; Self\nfunc text(_ state: State&lt;String&gt;) -&gt; Self\n</code></pre> <p>You write just one:</p> <pre><code>func text&lt;S: StateValuable&gt;(_ value: S) where S.Value == String\n</code></pre> <p>For example, consider a custom <code>TitleView</code>. You want to set the title as either a <code>String</code> or a <code>State&lt;String&gt;</code>. Instead of writing two separate methods, you can use <code>StateValuable</code> to handle both cases in one method:</p> <pre><code>class TitleView: View {\n    func text&lt;S&gt;(_ value: S) where S: StateValuable, S.Value == String {\n        // Set the initial value (for both static and state values)\n        updateLabel(value.simpleValue)\n        // Listen for updates if the value is a State\n        value.stateValue?.listenDistinct { [weak self] new in\n            self?.updateLabel(new)\n        }.hold(in: self)\n    }\n}\n</code></pre> <p>Now your view can be used in both ways:</p> <pre><code>TitleView()\n    .text(\"Hello\")    // static\n    .text($titleText) // dynamic\n</code></pre> <p>This approach keeps your code clean and maintainable while providing you with the desired flexibility.</p> <p>Base types like <code>String</code>, <code>Int</code>, <code>Bool</code>, etc., already conform to <code>StateValuable</code></p>"},{"location":"app/state/#conforming-custom-types","title":"Conforming Custom Types","text":"<p>If you have a custom type, you can make it conform to <code>StateValuable</code> as follows:</p> <pre><code>extension CustomType: StateValuable {\n    public var simpleValue: CustomType { self }\n    public var stateValue: State&lt;CustomType&gt;? { nil }\n}\n</code></pre> <p>This also ensures that <code>State&lt;CustomType&gt;</code> automatically conforms to <code>StateValuable</code>.</p>"},{"location":"app/structure/","title":"Project Structure","text":"<p>At its heart, the project integrates both Swift Package Manager (SPM) for Swift code and Gradle for Android application code.</p>"},{"location":"app/structure/#sources","title":"Sources","text":"<pre><code>\ud83d\udce6 Project Root\n\u251c\u2500\u2500 \ud83d\udcc4 Package.swift              # Swift package configuration\n\u251c\u2500\u2500 \ud83d\udcc2 Sources\n\u2502   \u251c\u2500\u2500 \ud83d\udcc2 App\n\u2502   |   \u251c\u2500\u2500 \ud83d\udcc4 App.swift          # Entry point for the application\n\u2502   |   \u2514\u2500\u2500 \ud83d\udcc2 Activities\n\u2502   |       \u2514\u2500\u2500 \ud83d\udcc4 MainActivity.swift    # Main Android activity\n\u2502   \u2514\u2500\u2500 \ud83d\udcc2 AppManifest\n\u2502   |    \u2514\u2500\u2500 \ud83d\udcc4 Manifest.swift    # Proxy target for manifest declared in App\n\u2502   \u2514\u2500\u2500 \ud83d\udcc2 AppUI\n\u2502       \u2514\u2500\u2500 \ud83d\udcc4 AppUI.swift        # Proxy target which points to App\n</code></pre> <p>App target contains your main application code. Read more in \u2192 entry point section.</p> <p>AppManifest target is a proxy target which you shouldn't modify, it is required to generate the AndroidManifest.xml file for your app.</p> <p>AppUI target is a proxy target which also shouldn't be modified, it is required to generate the Android library module for your app.</p>"},{"location":"app/structure/#application","title":"Application","text":"<pre><code>\u251c\u2500\u2500 \ud83d\udcc2 Application\n\u2502   \u251c\u2500\u2500 \ud83d\udcc4 settings.gradle.kts    # App project settings\n\u2502   \u251c\u2500\u2500 \ud83d\udcc4 build.gradle.kts       # Root app build configuration\n\u2502   \u2514\u2500\u2500 \ud83d\udcc2 androidapp\n\u2502       \u251c\u2500\u2500 \ud83d\udcc4 build.gradle.kts   # Android app module build configuration\n\u2502       \u2514\u2500\u2500 \ud83d\udcc2 src\n\u2502           \u2514\u2500\u2500 \ud83d\udcc2 main\n\u2502               \u251c\u2500\u2500 \ud83d\udcc4 AndroidManifest.xml  # Manifest Placeholder\n\u2502               \u2514\u2500\u2500 \ud83d\udcc2 res                  # Assets\n</code></pre> <p>Automatically generated Android application (a Gradle project) which could be opened in Android Studio. Files here are generated once and then managed by you.</p>"},{"location":"app/structure/#library","title":"Library","text":"<pre><code>\u251c\u2500\u2500 \ud83d\udcc2 Library\n\u2502   \u251c\u2500\u2500 \ud83d\udcc4 settings.gradle.kts    # Lib project settings\n\u2502   \u251c\u2500\u2500 \ud83d\udcc4 build.gradle.kts       # Root lib build configuration\n\u2502   \u2514\u2500\u2500 \ud83d\udcc2 appui\n\u2502       \u251c\u2500\u2500 \ud83d\udcc4 build.gradle.kts   # Android lib module build configuration\n\u2502       \u2514\u2500\u2500 \ud83d\udcc2 src\n\u2502           \u2514\u2500\u2500 \ud83d\udcc2 main\n\u2502               \u251c\u2500\u2500 \ud83d\udcc4 AndroidManifest.xml  # Auto-Generated Manifest\n\u2502               \u251c\u2500\u2500 \ud83d\udcc2 java                 # Auto-Generated Kotlin classes\n\u2502               \u2514\u2500\u2500 \ud83d\udcc2 jniLibs              # Native libraries for JNI\n</code></pre> <p>Automatically generated Android library (a Gradle project) which is imported into the Application project. All files here are managed by Swift Stream IDE.</p>"},{"location":"app/structure/#devcontainer","title":".devcontainer","text":"<pre><code>\u251c\u2500\u2500 \ud83d\udcc2 .devcontainer\n\u2502   \u2514\u2500\u2500 \ud83d\udcc4 devcontainer.json      # Development container configuration\n</code></pre> <p>Contains configuration for your development container.</p> <p><code>devcontainer.json</code> contains Swift, Gradle, SDK, and NDK versions used within the container. You can modify it to fit your needs.</p> <p>It is more convenient to change these settings via the Swift Stream IDE sidebar panel.</p>"},{"location":"app/structure/#sourcekit-lsp","title":".sourcekit-lsp","text":"<pre><code>\u251c\u2500\u2500 \ud83d\udcc2 .sourcekit-lsp\n\u2502   \u2514\u2500\u2500 \ud83d\udcc4 config.json            # SourceKit-LSP server configuration\n</code></pre> <p>Contains configuration for SourceKit-LSP, which provides Swift language support in the IDE. It is necessary for the correct code completion, error highlighting, and other language features.</p>"},{"location":"app/structure/#vscode","title":".vscode","text":"<pre><code>\u2514\u2500\u2500 \ud83d\udcc2 .vscode\n    \u2514\u2500\u2500 \ud83d\udcc4 android-stream.json    # VS Code Android development settings\n</code></pre> <p>Contains the Swift Stream IDE settings to build your project correctly.</p> <p>You can adjust <code>compileSDK</code> and <code>minSDK</code> versions here.</p> <p><code>soMode</code> setting is set to <code>Packed</code> and it should be left unchanged</p> <p>Learn more about it in \u2192 library swift project guide.</p>"},{"location":"app/themes/","title":"Themes","text":"<p>In Android development, themes are a powerful way to define the overall look and feel of your application. A theme is a collection of attributes that can be applied to an entire app, an activity, or a view hierarchy \u2013 allowing you to maintain a consistent design throughout your application.</p> <p>Themes are typically defined in XML files located in the <code>res/values</code> directory of your Android project. They can include attributes such as colors, fonts, styles, and dimensions.</p> <p>The Droid framework includes AppCompat and Material Design 3 themes that you can easily apply to your app or activities.</p>"},{"location":"app/themes/#applying-themes","title":"Applying Themes","text":"<p>You can set a theme for your entire application in the app manifest:</p> <pre><code>import Droid\n\n@main\npublic final class App: DroidApp {\n    @AppBuilder public override var body: Content {\n        Manifest\n            .theme(.material3DayNightNoActionBar)\n    }\n}\n</code></pre> <p>You can also set a theme for individual activities by overriding the <code>theme</code> property in your activity class:</p> <pre><code>final class MainActivity: AppCompatActivity {\n    override class var theme: Style? { .material3DayNightNoActionBar }\n    /// ...\n}\n</code></pre>"},{"location":"app/themes/#custom-theme","title":"Custom Theme","text":"<p>If you use a custom theme, it is probably named <code>AppTheme</code>, so it can be used via the predefined constant </p> <pre><code>.theme(.appTheme)\n</code></pre> <p>Otherwise, simply use your own style reference as a string, such as:</p> <pre><code>.theme(\"@style/MyOwnTheme\")\n</code></pre>"},{"location":"app/themes/#appcompat","title":"AppCompat","text":"<p>Base AppCompat theme - provides Material Design support back to API 7</p> <pre><code>.theme(.appCompat)\n</code></pre>"},{"location":"app/themes/#noactionbar","title":"noActionBar","text":"<p>A version of the AppCompat theme without an action bar</p> <pre><code>.theme(.appCompatNoActionBar)\n</code></pre>"},{"location":"app/themes/#dialog","title":"dialog","text":"<p>A dialog theme based on AppCompat</p> <pre><code>.theme(.appCompatDialog)\n</code></pre> <p>alert</p> <p>A dialog alert theme based on AppCompat</p> <pre><code>.theme(.appCompatDialogAlert)\n</code></pre> <p>minWidth</p> <p>A dialog theme with minimum width based on AppCompat</p> <pre><code>.theme(.appCompatDialogMinWidth)\n</code></pre> <p>whenLarge</p> <p>A dialog theme optimized for large screens based on AppCompat</p> <pre><code>.theme(.appCompatDialogWhenLarge)\n</code></pre>"},{"location":"app/themes/#daynight","title":"DayNight","text":"<p>Enables automatic switching between light and dark themes based on system settings</p> <pre><code>.theme(.appCompatDayNight)\n</code></pre>"},{"location":"app/themes/#darkactionbar","title":"darkActionBar","text":"<p>Similar to <code>appCompatDayNight</code>, but includes a dark action bar for better contrast</p> <pre><code>.theme(.appCompatDayNightDarkActionBar)\n</code></pre>"},{"location":"app/themes/#noactionbar_1","title":"noActionBar","text":"<p>A theme without an action bar that adapts to light and dark modes</p> <pre><code>.theme(.appCompatDayNightNoActionBar)\n</code></pre> <p>Recommended for modern apps to support both light and dark themes!</p>"},{"location":"app/themes/#dialog_1","title":"dialog","text":"<p>A dialog theme that adapts to light and dark modes</p> <pre><code>.theme(.appCompatDayNightDialog)\n</code></pre> <p>alert</p> <p>A dialog alert theme that adapts to light and dark modes</p> <pre><code>.theme(.appCompatDayNightDialogAlert)\n</code></pre> <p>minWidth</p> <p>A dialog theme with minimum width that adapts to light and dark modes</p> <pre><code>.theme(.appCompatDayNightDialogMinWidth)\n</code></pre> <p>whenLarge</p> <p>A dialog theme that adapts to light and dark modes, optimized for large screens</p> <pre><code>.theme(.appCompatDayNightDialogWhenLarge)\n</code></pre>"},{"location":"app/themes/#light","title":"Light","text":"<p>A light version of the AppCompat theme</p> <pre><code>.theme(.appCompatLight)\n</code></pre>"},{"location":"app/themes/#darkactionbar_1","title":"darkActionBar","text":"<p>A light theme with a dark action bar for better contrast</p> <pre><code>.theme(.appCompatLightDarkActionBar)\n</code></pre>"},{"location":"app/themes/#noactionbar_2","title":"noActionBar","text":"<p>A light theme without an action bar</p> <pre><code>.theme(.appCompatLightNoActionBar)\n</code></pre>"},{"location":"app/themes/#dialog_2","title":"dialog","text":"<p>A light dialog theme based on AppCompat</p> <pre><code>.theme(.appCompatLightDialog)\n</code></pre> <p>alert</p> <p>A light dialog alert theme based on AppCompat</p> <pre><code>.theme(.appCompatLightDialogAlert)\n</code></pre> <p>minWidth</p> <p>A light dialog theme with minimum width based on AppCompat</p> <pre><code>.theme(.appCompatLightDialogMinWidth)\n</code></pre> <p>whenLarge</p> <p>A light dialog theme optimized for large screens based on AppCompat</p> <pre><code>.theme(.appCompatLightDialogWhenLarge)\n</code></pre>"},{"location":"app/themes/#material3","title":"Material3","text":""},{"location":"app/themes/#daynight_1","title":"DayNight","text":"<p>Material Design 3 with automatic day/night switching</p> <pre><code>.theme(.material3DayNight)\n</code></pre>"},{"location":"app/themes/#noactionbar_3","title":"noActionBar","text":"<p>DayNight Material 3 without action bar</p> <pre><code>.theme(.material3DayNightNoActionBar)\n</code></pre>"},{"location":"app/themes/#bottomsheetdialog","title":"bottomSheetDialog","text":"<p>DayNight bottom sheet dialog with Material 3</p> <pre><code>.theme(.material3DayNightBottomSheetDialog)\n</code></pre>"},{"location":"app/themes/#sidesheetdialog","title":"sideSheetDialog","text":"<p>DayNight side sheet dialog with Material 3</p> <pre><code>.theme(.material3DayNightSideSheetDialog)\n</code></pre>"},{"location":"app/themes/#dialog_3","title":"dialog","text":"<p>Standard DayNight dialog with Material 3 design</p> <pre><code>.theme(.material3DayNightDialog)\n</code></pre> <p>alert</p> <p>DayNight alert dialog with Material 3</p> <pre><code>.theme(.material3DayNightDialogAlert)\n</code></pre> <p>minWidth</p> <p>Compact DayNight dialog with Material 3</p> <pre><code>.theme(.material3DayNightDialogMinWidth)\n</code></pre> <p>whenLarge</p> <p>Large DayNight dialog for big screens with Material 3</p> <pre><code>.theme(.material3DayNightDialogWhenLarge)\n</code></pre>"},{"location":"app/themes/#dark","title":"Dark","text":"<p>Pure dark theme using Material Design 3 (Material You)</p> <pre><code>.theme(.material3Dark)\n</code></pre>"},{"location":"app/themes/#noactionbar_4","title":"noActionBar","text":"<p>Dark Material 3 theme without action bar</p> <pre><code>.theme(.material3DarkNoActionBar)\n</code></pre>"},{"location":"app/themes/#bottomsheetdialog_1","title":"bottomSheetDialog","text":"<p>Dark bottom sheet dialog with Material 3 styling</p> <pre><code>.theme(.material3DarkBottomSheetDialog)\n</code></pre>"},{"location":"app/themes/#sidesheetdialog_1","title":"sideSheetDialog","text":"<p>Dark side sheet dialog (emerging from side) with Material 3</p> <pre><code>.theme(.material3DarkSideSheetDialog)\n</code></pre>"},{"location":"app/themes/#dialog_4","title":"dialog","text":"<p>Standard dark dialog with Material 3 design</p> <pre><code>.theme(.material3DarkDialog)\n</code></pre> <p>alert</p> <p>Dark alert dialog with Material 3 styling</p> <pre><code>.theme(.material3DarkDialogAlert)\n</code></pre> <p>minWidth</p> <p>Compact dark dialog with Material 3</p> <pre><code>.theme(.material3DarkDialogMinWidth)\n</code></pre> <p>whenLarge</p> <p>Large dark dialog for big screens with Material 3</p> <pre><code>.theme(.material3DarkDialogWhenLarge)\n</code></pre>"},{"location":"app/themes/#light_1","title":"Light","text":"<p>Pure light theme using Material Design 3 (Material You)</p> <pre><code>.theme(.material3Light)\n</code></pre>"},{"location":"app/themes/#noactionbar_5","title":"noActionBar","text":"<p>Light Material 3 theme without action bar</p> <pre><code>.theme(.material3LightNoActionBar)\n</code></pre>"},{"location":"app/themes/#bottomsheetdialog_2","title":"bottomSheetDialog","text":"<p>Light bottom sheet dialog with Material 3</p> <pre><code>.theme(.material3LightBottomSheetDialog)\n</code></pre>"},{"location":"app/themes/#sidesheetdialog_2","title":"sideSheetDialog","text":"<p>Light side sheet dialog with Material 3</p> <pre><code>.theme(.material3LightSideSheetDialog)\n</code></pre>"},{"location":"app/themes/#dialog_5","title":"dialog","text":"<p>Standard light dialog with Material 3 design</p> <pre><code>.theme(.material3LightDialog)\n</code></pre> <p>alert</p> <p>Light alert dialog with Material 3 styling</p> <pre><code>.theme(.material3LightDialogAlert)\n</code></pre> <p>minWidth</p> <p>Compact light dialog with Material 3</p> <pre><code>.theme(.material3LightDialogMinWidth)\n</code></pre> <p>whenLarge</p> <p>Large light dialog for big screens with Material 3</p> <pre><code>.theme(.material3LightDialogWhenLarge)\n</code></pre>"},{"location":"app/themes/#dynamic-daynight","title":"Dynamic - DayNight","text":"<p>DayNight theme with dynamic color theming</p> <pre><code>.theme(.material3DynamicColorsDayNight)\n</code></pre>"},{"location":"app/themes/#noactionbar_6","title":"noActionBar","text":"<p>DayNight dynamic color theme without action bar</p> <pre><code>.theme(.material3DynamicColorsDayNightNoActionBar)\n</code></pre>"},{"location":"app/themes/#dynamic-dark","title":"Dynamic - Dark","text":"<p>Dark theme with dynamic color theming (Material You)</p> <pre><code>.theme(.material3DynamicColorsDark)\n</code></pre>"},{"location":"app/themes/#noactionbar_7","title":"noActionBar","text":"<p>Dark dynamic color theme without action bar</p> <pre><code>.theme(.material3DynamicColorsDarkNoActionBar)\n</code></pre>"},{"location":"app/themes/#dynamic-light","title":"Dynamic - Light","text":"<p>Light theme with dynamic color theming</p> <pre><code>.theme(.material3DynamicColorsLight)\n</code></pre>"},{"location":"app/themes/#noactionbar_8","title":"noActionBar","text":"<p>Light dynamic color theme without action bar</p> <pre><code>.theme(.material3DynamicColorsLightNoActionBar)\n</code></pre>"},{"location":"app/themes/#material3expressive","title":"Material3Expressive","text":""},{"location":"app/themes/#daynight_2","title":"DayNight","text":"<p>Expressive design language with automatic day/night switching</p> <pre><code>.theme(.material3ExpressiveDayNight)\n</code></pre>"},{"location":"app/themes/#noactionbar_9","title":"noActionBar","text":"<p>Expressive DayNight theme without action bar</p> <pre><code>.theme(.material3ExpressiveDayNightNoActionBar)\n</code></pre>"},{"location":"app/themes/#dialog_6","title":"dialog","text":"<p>Expressive DayNight dialog with dynamic design elements</p> <p>whenLarge</p> <p>Expressive DayNight dialog optimized for large screens</p> <pre><code>.theme(.material3ExpressiveDayNightDialogWhenLarge)\n</code></pre>"},{"location":"app/themes/#dark_1","title":"Dark","text":"<p>Expressive design language - dark variant with more dynamic shapes and motion</p> <pre><code>.theme(.material3ExpressiveDark)\n</code></pre>"},{"location":"app/themes/#noactionbar_10","title":"noActionBar","text":"<p>Expressive dark theme without action bar</p> <pre><code>.theme(.material3ExpressiveDarkNoActionBar)\n</code></pre>"},{"location":"app/themes/#dialog_7","title":"dialog","text":"<p>Expressive dark dialog with dynamic design elements</p> <pre><code>.theme(.material3ExpressiveDarkDialog)\n</code></pre> <p>alert</p> <p>Expressive dark alert dialog</p> <pre><code>.theme(.material3ExpressiveDarkDialogAlert)\n</code></pre> <p>minWidth</p> <p>Expressive dark dialog with minimum width</p> <pre><code>.theme(.material3ExpressiveDarkDialogMinWidth)\n</code></pre> <p>whenLarge</p> <p>Expressive dark dialog optimized for large screens</p> <pre><code>.theme(.material3ExpressiveDarkDialogWhenLarge)\n</code></pre>"},{"location":"app/themes/#light_2","title":"Light","text":"<p>Expressive design language - light variant</p> <pre><code>.theme(.material3ExpressiveLight)\n</code></pre>"},{"location":"app/themes/#noactionbar_11","title":"noActionBar","text":"<p>Expressive light theme without action bar</p> <pre><code>.theme(.material3ExpressiveLightNoActionBar)\n</code></pre>"},{"location":"app/themes/#dialog_8","title":"dialog","text":"<p>Expressive light dialog with dynamic design elements</p> <pre><code>.theme(.material3ExpressiveLightDialog)\n</code></pre> <p>alert</p> <p>Expressive light alert dialog</p> <pre><code>.theme(.material3ExpressiveLightDialogAlert)\n</code></pre> <p>minWidth</p> <p>Expressive light dialog with minimum width</p> <pre><code>.theme(.material3ExpressiveLightDialogMinWidth)\n</code></pre> <p>whenLarge</p> <p>Expressive light dialog optimized for large screens</p> <pre><code>.theme(.material3ExpressiveLightDialogWhenLarge)\n</code></pre>"},{"location":"app/themes/#dynamic-daynight_1","title":"Dynamic - DayNight","text":"<p>Expressive DayNight theme with dynamic color adaptation</p> <pre><code>.theme(.material3ExpressiveDynamicColorsDayNight)\n</code></pre>"},{"location":"app/themes/#noactionbar_12","title":"noActionBar","text":"<p>Expressive DayNight dynamic color theme without action bar</p> <pre><code>.theme(.material3ExpressiveDynamicColorsDayNightNoActionBar)\n</code></pre>"},{"location":"app/themes/#dynamic-dark_1","title":"Dynamic - Dark","text":"<p>Expressive dark theme with dynamic color adaptation</p> <pre><code>.theme(.material3ExpressiveDynamicColorsDark)\n</code></pre>"},{"location":"app/themes/#noactionbar_13","title":"noActionBar","text":"<p>Expressive dark dynamic color theme without action bar</p> <pre><code>.theme(.material3ExpressiveDynamicColorsDarkNoActionBar)\n</code></pre>"},{"location":"app/themes/#dynamic-light_1","title":"Dynamic - Light","text":"<p>Expressive light theme with dynamic color adaptation</p> <pre><code>.theme(.material3ExpressiveDynamicColorsLight)\n</code></pre>"},{"location":"app/themes/#noactionbar_14","title":"noActionBar","text":"<p>Expressive light dynamic color theme without action bar</p> <pre><code>.theme(.material3ExpressiveDynamicColorsLightNoActionBar)\n</code></pre>"},{"location":"app/units/","title":"Dimension Units","text":"<p>Android supports several dimension units for specifying sizes, margins, paddings, and other measurements in your app's UI.</p> <p>All the methods that expect dimension values in Droid framework assume <code>dp</code> (density-independent pixels) by default:</p> <pre><code>.width(16) // 16dp\n.padding(8) // 8dp\n.padding(h: 8, v: 16) // 8dp, 16dp\n</code></pre> <p>However, you can specify other units explicitly:</p> <pre><code>.width(16, .px) // 16 pixels\n.padding(8, .sp) // 8 scale-independent pixels\n.padding(h: 8, v: 16, .in) // 8 inches, 16 inches\n</code></pre> <p>The supported units are in <code>DimensionUnit</code> enum:</p> <ul> <li><code>dp</code> - density-independent pixels. It is a virtual unit of measurement that adjusts based on the screen density, ensuring consistent sizing across different devices. Best choice.</li> <li><code>px</code> - represents pixels, which are the smallest unit of measurement on a screen. It is an absolute unit and does not scale with screen density, making it less suitable for responsive designs.</li> <li><code>sp</code> - scale-independent pixels. Similar to <code>dp</code>, but also scales based on the user's font size preferences. It is primarily used for text sizes to ensure accessibility and readability.</li> <li><code>pt</code> - points. A physical unit of measurement equal to 1/72 of an inch. It is commonly used in typography and can vary in appearance depending on the screen density.</li> <li><code>in</code> - inches. Represents a physical measurement of length. It is an absolute unit and is rarely used in UI design due to its lack of adaptability to different screen sizes and densities.</li> <li><code>mm</code> - millimeters. Another physical unit of measurement. Like <code>in</code>, it is absolute and not commonly used in responsive design.</li> </ul> <p>This enum also provides you with conversion methods <code>to</code> and <code>from</code> pixels:</p> <pre><code>let pixels: Int32 = DimensionUnit.dp.toPixels(16) // convert 16dp to pixels\nlet dp: Float = DimensionUnit.dp.fromPixels(48) // convert 48 pixels to dp\n</code></pre>"},{"location":"app/views/","title":"Views","text":"<p>The Droid framework provides all the native Android views you need.</p> <p>The full list of available views is in the left sidebar, categorized into sections like Classic, Android X, and Material Design.</p> <p>The application documentation is under active development. If you encounter any 404 pages or typos, please be patient \u2013 new content is being added every day.</p> <p>For quick reference, here are some of the most commonly used views: \u2192 LinearLayout \u2192 RelativeLayout \u2192 TextView \u2192 Button \u2192 ImageView \u2192 EditText \u2192 RecyclerView \u2192 ScrollView</p> <p>Use the search bar to quickly find the view you need</p> <p>Views can be placed inside activities, fragments, or other views.</p>"},{"location":"app/views/#building-ui","title":"Building UI","text":"<p>You either build UI declaratively like in SwiftUI, or imperatively by creating view instances and configuring them.</p>"},{"location":"app/views/#imperatively","title":"Imperatively","text":"<p>It looks similar to how you would do it in Java, but using Swift syntax.</p> <pre><code>let linearLayout = LinearLayout()\nlinearLayout.orientation(.vertical)\nlet textView = TextView()\ntextView.text(\"Hello, World!\")\ntextView.textSize(24)\ntextView.textColor(.black)\ntextView.padding(16)\ntextView.backgroundColor(.lightGray)\nlinearLayout.addSubview(textView)\ncontentView(linearLayout)\n</code></pre> <p>You may notice that property setters are without <code>set</code> prefix, this is intentional to make it more Swiftly. Getters are also without <code>get</code> prefix.</p>"},{"location":"app/views/#declaratively","title":"Declaratively","text":"<p>Most natural way to build UI in Swift is using declarative syntax similar to SwiftUI.</p> <pre><code>LinearLayout {\n    TextView(\"Hello, World!\")\n        .textSize(24)\n        .textColor(.black)\n        .padding(16)\n        .backgroundColor(.lightGray)\n}\n.orientation(.vertical)\n</code></pre> <p>Allright, but how do we put this into an activity or fragment? There are \u2192 body and \u2192 buildUI methods:</p> <pre><code>override func buildUI() {\n    super.buildUI()\n    body {\n        TextView(\"Hello, World!\")\n            .width(.matchParent)\n            .height(.matchParent)\n            .gravity(.center)\n    }\n}\n</code></pre>"},{"location":"app/views/#context","title":"Context","text":"<p>You may notice that <code>View</code> initializers do not require a <code>Context</code> parameter. This is because Droid framework automatically provides the correct context behind the scenes. You can prepare the view anywhere, and it will work correctly when added to the view hierarchy.</p>"},{"location":"app/views/#custom-views","title":"Custom Views","text":"<p>Any view inherits from the base <code>View</code> class, which provides common properties and methods for all views. Inheritance is exactly the same as in Android SDK.</p> <p>When you create a custom view, you need a few steps: </p> <ol> <li>inherit from the appropriate base class</li> <li>set the <code>className</code> property to specify the full Java class name</li> <li>set the <code>layoutParamsClass</code> property to specify the default layout params class</li> <li>set required gradle dependencies in <code>gradleDependencies</code> property</li> <li>add initializers</li> <li>add methods</li> </ol> <p>Let's investigate each step.</p>"},{"location":"app/views/#inheritance-and-dependencies","title":"Inheritance and Dependencies","text":"<p>Your view may inherit from <code>View</code>, <code>ViewGroup</code>, or any other view class. This is how you declare a custom view that inherits from <code>ViewGroup</code>:</p> <pre><code>final class CustomView: ViewGroup {\n    // ...\n}\n</code></pre> <p>Then if your view is not just reimplementation of an existing one, you set the Java <code>className</code>:</p> <pre><code>override class var className: JClassName {\n    \"com/mycompany/customviews/CustomView\"\n}\n</code></pre> <p>Next, each view should provide its own <code>LayoutParams</code> class, otherwise it will use the default <code>ViewGroup.LayoutParams</code>, which may not be suitable and will cause runtime crash.</p> <pre><code>override class var layoutParamsClass: LayoutParams.Class {\n    \"com/mycompany/customviews/CustomView$LayoutParams\"\n}\n</code></pre> <p>Finally, if your view depends on any external Java libraries, you need to specify them in <code>gradleDependencies</code> property, so Swift Stream IDE knows which dependencies to include in the generated Gradle project.</p> <pre><code>override class var gradleDependencies: [AppGradleDependency] {[\n    #\"implementation \"com.mycompany:customviews:1.0.0\"\"#\n]}\n</code></pre> <p>I also suggest creating a convenient static property for your custom dependency to avoid version mismatches if you use it in multiple places:</p> <pre><code>extension AppGradleDependency {\n    static let customViews: Self = #\"implementation \"com.mycompany:customviews:1.0.0\"\"#\n}\n</code></pre> <p>and then use it in your view like this:</p> <pre><code>override class var gradleDependencies: [AppGradleDependency] {[\n    .customViews\n]}\n</code></pre> <p>Allright, this way, Droid framework knows which Java class to instantiate, which layout params to use, and which Gradle dependencies to include in your project. Easy and convenient.</p>"},{"location":"app/views/#initializer","title":"Initializer","text":"<p>Next, we add the required initializer:</p> <pre><code>@discardableResult\noverride init (id: Int32? = nil) {\n    super.init(id: id)\n}\n</code></pre> <p>And if your view inherits from <code>ViewGroup</code> you have to add another initializer with <code>@BodyBuilder</code>:</p> <pre><code>@discardableResult\noverride init (\n    id: Int32? = nil,\n    @BodyBuilder content: BodyBuilder.SingleView\n) {\n    super.init(id: id, content: content)\n}\n</code></pre> <p>This means that this view accepts child views like this:</p> <pre><code>CustomView {\n    TextView(\"Child 1\")\n    TextView(\"Child 2\")\n}\n</code></pre>"},{"location":"app/views/#view-properties","title":"View Properties","text":"<p>All properties of the view set not immediately, but later once the view is attached to the view hierarchy.</p> <p>That's why you can declare views anywhere, even outside activities or fragments.</p> <p>But to achieve this, you need to wrap all property setters into special structs that conform to <code>ViewPropertyToApply</code> protocol.</p> <p>Let's say your Java view has a property called <code>baselineAligned</code>, which is a boolean. First you create a struct for it:</p> <pre><code>struct BaselineAlignedViewProperty: ViewPropertyToApply {\n    let key: ViewPropertyKey = \"setBaselineAligned\"\n    let value: Bool\n    func applyToInstance(_ env: JEnv?, _ instance: View.ViewInstance) {\n        // if it is Java field\n        instance.booleanField(env, name: key.rawValue, value: value)\n        // if it is Java method\n        instance.callVoidMethod(env, name: key.rawValue, args: value)\n    }\n}\n</code></pre> <p>Then you create a convenient method in the view extension:</p> <pre><code>extension CustomView {\n    @discardableResult\n    public func baselineAligned(_ value: Bool = true) -&gt; Self {\n        BaselineAlignedViewProperty(value: value).applyOrAppend(nil, self)\n    }\n}\n</code></pre> <p>This method creates the property struct and applies it to the view instance immediately if it is already attached or appends it to be applied later. The rest is handled by the framework.</p> <p>So now it can be used like this:</p> <pre><code>CustomView().baselineAligned()\n</code></pre> <p>Learn more about JNI usage in \u2192 JNIKit Fields and \u2192 JNIKit Methods</p>"},{"location":"app/views/#id","title":"ID","text":"<p>Views have unique integer IDs assigned automatically.</p> <p>Access the ID simply via <code>id</code> property:</p> <pre><code>let view = CustomView()\nlet viewId = view.id\n</code></pre> <p>You can also set your own ID via initializer:</p> <pre><code>CustomView(id: 12345)\n</code></pre>"},{"location":"app/views/#view-methods","title":"View Methods","text":"<p>If your view has some methods that you want to expose, you can add them directly in the view extension.</p> <pre><code>extension CustomView {\n    public func doSomething(param: Int) {\n        instance?.callVoidMethod(name: \"doSomething\", args: param)\n    }\n}\n</code></pre> <p>This method will be called immediately on the view instance if it is already attached. Otherwise, you need to use \u2192 View Properties technique to queue the method call for later.</p>"},{"location":"app/views/#layout-params-properties","title":"Layout Params Properties","text":"<p>Layout Params are set similarly to view properties, but they conform to <code>LayoutParamToApply</code> protocol.</p> <p>Let's say your Java view has a layout param called <code>weight</code>, which is a float. First you create a struct for it:</p> <pre><code>struct WeightLayoutParam: LayoutParamToApply {\n    let key: LayoutParamKey = \"weight\"\n    let value: Float\n    func apply(_ env: JEnv?, _ context: View.ViewInstance, _ lp: LayoutParams) {\n        // if it is Java field\n        lp.setField(env, name: key.rawValue, arg: value)\n        // if it is Java method\n        lp.callVoidMethod(env, name: key.rawValue, args: value)\n    }\n}\n</code></pre> <p>Then you create a convenient method in the view extension:</p> <pre><code>extension CustomView {\n    @discardableResult\n    public func weight(_ value: Float) -&gt; Self {\n        WeightLayoutParam(value: value).applyOrAppend(self)\n    }\n}\n</code></pre> <p>This method creates the layout param struct and applies it to the view's layout params immediately if the view is already attached or appends it to be applied later.</p>"},{"location":"app/views/#layout-params-methods","title":"Layout Params Methods","text":"<p>If your layout params has some methods that you want to expose, you can add them directly in the view extension.</p> <pre><code>extension CustomView {\n    public func changeSomething() {\n        instance?.layoutParams()?.callVoidMethod(name: \"changeSomething\")\n    }\n}\n</code></pre>"},{"location":"app/views/#methods","title":"Methods","text":""},{"location":"app/views/#addsubview","title":"addSubview","text":"<p>You can add one subview:</p> <pre><code>let subView = TextView(\"Child 1\")\naddSubview(subView)\n</code></pre> <p>or multiple child views:</p> <pre><code>let subView1 = TextView(\"Child 1\")\nlet subView2 = TextView(\"Child 2\")\naddSubviews(subView1, subView2) // or with array\n</code></pre>"},{"location":"app/views/#removesubview","title":"removeSubview","text":"<p>You can remove a specific child view like this:</p> <pre><code>removeSubview(subView)\n</code></pre>"},{"location":"app/views/#removefromparent","title":"removeFromParent","text":"<p>You can remove the view from its parent view like this:</p> <pre><code>subView.removeFromParent()\n</code></pre>"},{"location":"app/views/#onaddtoparent","title":"onAddToParent","text":"<p>You can listen for when the view is added to a parent view to perform additional setup.</p> <pre><code>.onAddToParent {\n    Log.i(\"CustomView added to parent\")\n}\n</code></pre>"},{"location":"app/views/#onremovedfromparent","title":"onRemovedFromParent","text":"<p>You can listen for when the view is removed from its parent to perform cleanup actions.</p> <pre><code>.onRemovedFromParent {\n    Log.i(\"CustomView removed from parent\")\n}\n</code></pre>"},{"location":"app/views/#willaddsubview","title":"willAddSubview","text":"<p>You can override this method to intercept when a subview is about to be added.</p> <pre><code>final class CustomView: ViewGroup {\n    override func willAddSubview(_ subview: View) {\n        super.willAddSubview(subview)\n        Log.i(\"Subview \\(subview) will be added\")\n    }\n}\n</code></pre>"},{"location":"app/views/#didaddsubview","title":"didAddSubview","text":"<p>You can override this method to intercept when a subview has been added.</p> <pre><code>final class CustomView: ViewGroup {\n    override func didAddSubview(_ subview: View) {\n        super.didAddSubview(subview)\n        Log.i(\"Subview \\(subview) was added\")\n    }\n}\n</code></pre>"},{"location":"app/views/#willremovesubview","title":"willRemoveSubview","text":"<p>You can override this method to intercept when a subview is about to be removed.</p> <pre><code>final class CustomView: ViewGroup {\n    override func willRemoveSubview(_ subview: View) {\n        super.willRemoveSubview(subview)\n        Log.i(\"Subview \\(subview) will be removed\")\n    }\n}\n</code></pre>"},{"location":"app/views/#didremovesubview","title":"didRemoveSubview","text":"<p>You can override this method to intercept when a subview has been removed.</p> <pre><code>final class CustomView: ViewGroup {\n    override func didRemoveSubview(_ subview: View) {\n        super.didRemoveSubview(subview)\n        Log.i(\"Subview \\(subview) was removed\")\n    }\n}\n</code></pre>"},{"location":"app/views/#willmovetoparent","title":"willMoveToParent","text":"<p>You can override this method to intercept when the view is about to be moved to a parent view.</p> <pre><code>final class CustomView: View {\n    override func willMoveToParent() {\n        super.willMoveToParent()\n        Log.i(\"CustomView will move to parent\")\n    }\n}\n</code></pre> <p>Parent is still nil at this point.</p>"},{"location":"app/views/#didmovetoparent","title":"didMoveToParent","text":"<p>You can override this method to intercept when the view has been moved to a parent view.</p> <pre><code>final class CustomView: View {\n    override func didMoveToParent() {\n        super.didMoveToParent()\n        Log.i(\"CustomView did move to parent\")\n    }\n}\n</code></pre> <p>If the view is added as a child view, then you can access parent from the <code>parent</code> property.</p> <p>If the view is a content view of an activity/fragment, then <code>parent</code> will stay nil.</p>"},{"location":"app/views/#willmovefromparent","title":"willMoveFromParent","text":"<p>You can override this method to intercept when the view is about to be removed from its parent view.</p> <pre><code>final class CustomView: View {\n    override func willMoveFromParent() {\n        super.willMoveFromParent()\n        Log.i(\"CustomView will be removed its from parent\")\n    }\n}\n</code></pre>"},{"location":"app/views/#didmovefromparent","title":"didMoveFromParent","text":"<p>You can override this method to intercept when the view has been removed from its parent view.</p> <pre><code>final class CustomView: View {\n    override func didMoveFromParent() {\n        super.didMoveFromParent()\n        Log.i(\"CustomView has been removed from its parent\")\n    }\n}\n</code></pre>"},{"location":"app/views/#accessibilitydatasensitive","title":"accessibilityDataSensitive","text":"<p>Sets whether this view contains sensitive information for accessibility services.</p> <pre><code>.accessibilityDataSensitive(.auto)\n</code></pre>"},{"location":"app/views/#accessibilityheading","title":"accessibilityHeading","text":"<p>Sets whether this view is a heading for a section of content for accessibility purposes.</p> <pre><code>.accessibilityHeading(true)\n</code></pre>"},{"location":"app/views/#accessibilityliveregion","title":"accessibilityLiveRegion","text":"<p>Sets the live region mode for this view</p> <pre><code>.accessibilityLiveRegion(.assertive)\n</code></pre>"},{"location":"app/views/#accessibilitypanetitle","title":"accessibilityPaneTitle","text":"<p>Sets the accessibility pane title for this view.</p> <pre><code>.accessibilityPaneTitle(\"Main Content\")\n</code></pre>"},{"location":"app/views/#accessibilitytraversalafter","title":"accessibilityTraversalAfter","text":"<p>Sets the id of a view that screen readers are requested to visit before this view.</p> <pre><code>.accessibilityTraversalAfter(anotherViewId)\n</code></pre>"},{"location":"app/views/#accessibilitytraversalbefore","title":"accessibilityTraversalBefore","text":"<p>Sets the id of a view that screen readers are requested to visit after this view.</p> <pre><code>.accessibilityTraversalBefore(anotherViewId)\n</code></pre>"},{"location":"app/views/#activated","title":"activated","text":"<p>Sets the activated state of this view.</p> <pre><code>.activated() // sets to true\n.activated(false) // sets to false\n</code></pre>"},{"location":"app/views/#allowclickwhendisabled","title":"allowClickWhenDisabled","text":"<p>Sets whether this view should allow click events when it is disabled.</p> <pre><code>.allowClickWhenDisabled() // sets to true\n.allowClickWhenDisabled(false) // sets to false\n</code></pre>"},{"location":"app/views/#allowedhandwritingdelegatepackage","title":"allowedHandwritingDelegatePackage","text":"<p>Specifies that this view may act as a handwriting initiation delegator for a delegate editor view from the specified package.</p> <pre><code>.allowedHandwritingDelegatePackage(\"com.example.handwriting\")\n</code></pre>"},{"location":"app/views/#alpha","title":"alpha","text":"<p>Sets the alpha transparency of this view.</p> <pre><code>.alpha(0.5) // sets to 50% transparency\n</code></pre>"},{"location":"app/views/#autohandwritingenabled","title":"autoHandwritingEnabled","text":"<p>Set whether this view enables automatic handwriting initiation.</p> <pre><code>.autoHandwritingEnabled() // sets to true\n.autoHandwritingEnabled(false) // sets to false\n</code></pre>"},{"location":"app/views/#backgroundcolor","title":"backgroundColor","text":"<p>Sets the background color of this view.</p> <pre><code>.backgroundColor(.lightGray)\n</code></pre> <p>Refer to \u2192 colors section for more details on colors.</p>"},{"location":"app/views/#backgroundresource","title":"backgroundResource","text":"<p>Sets the background to a given resource ID.</p> <pre><code>.backgroundResource(R.drawable.my_background)\n</code></pre> <p>Refer to \u2192 R section for more details on resource IDs.</p>"},{"location":"app/views/#bottom","title":"bottom","text":"<p>Sets the bottom position of this view relative to its parent.</p> <pre><code>.bottom(100) // in dp units\n.bottom(100, .px) // in pixels\n</code></pre> <p>Refer to \u2192 units section for more details on dimension units.</p>"},{"location":"app/views/#cameradistance","title":"cameraDistance","text":"<p>Sets the distance along the Z axis (orthogonal to the X/Y plane on which views are drawn) from the camera to this view.</p> <pre><code>.cameraDistance(1000) // in dp units\n.cameraDistance(1000, .px) // in pixels\n</code></pre> <p>Refer to \u2192 units section for more details on dimension units.</p>"},{"location":"app/views/#clickable","title":"clickable","text":"<p>Enables or disables click events for this view.</p> <pre><code>.clickable() // sets to true\n.clickable(false) // sets to false\n</code></pre>"},{"location":"app/views/#cliptooutline","title":"clipToOutline","text":"<p>Sets whether the View's Outline should be used to clip the contents of the View.</p> <pre><code>.clipToOutline() // sets to true\n.clipToOutline(false) // sets to false\n</code></pre>"},{"location":"app/views/#contentdescription","title":"contentDescription","text":"<p>Sets the content description of this view for accessibility purposes.</p> <pre><code>.contentDescription(\"This is a button\")\n</code></pre>"},{"location":"app/views/#contentsensitivity","title":"contentSensitivity","text":"<p>Sets content sensitivity mode to determine whether this view displays sensitive content (e.g. username, password etc.).</p> <pre><code>.contentSensitivity(.sensitive)\n.contentSensitivity(.notSensitive)\n.contentSensitivity(.auto) // uses heuristics\n</code></pre>"},{"location":"app/views/#contextclickable","title":"contextClickable","text":"<p>Enables or disables context clicking for this view.</p> <pre><code>.contextClickable() // sets to true\n.contextClickable(false) // sets to false\n</code></pre>"},{"location":"app/views/#defaultfocushighlightenabled","title":"defaultFocusHighlightEnabled","text":"<p>Sets whether this View should use a default focus highlight when it gets focused but doesn't have <code>R.attr.state_focused</code> defined in its background.</p> <pre><code>.defaultFocusHighlightEnabled() // sets to true\n.defaultFocusHighlightEnabled(false) // sets to false\n</code></pre>"},{"location":"app/views/#drawingcachebackgroundcolor","title":"drawingCacheBackgroundColor","text":"<p>Sets the drawing cache background color for this view.</p> <pre><code>.drawingCacheBackgroundColor(.white)\n</code></pre> <p>Refer to \u2192 colors section for more details on colors.</p>"},{"location":"app/views/#drawingcacheenabled","title":"drawingCacheEnabled","text":"<p>Enables or disables the drawing cache for this view.</p> <pre><code>.drawingCacheEnabled() // sets to true\n.drawingCacheEnabled(false) // sets to false\n</code></pre> <p>This method was deprecated in API level 28.</p>"},{"location":"app/views/#drawingcachequality","title":"drawingCacheQuality","text":"<p>Sets the drawing cache quality for this view.</p> <pre><code>.drawingCacheQuality(.low)\n.drawingCacheQuality(.high)\n.drawingCacheQuality(.auto)\n</code></pre> <p>This method was deprecated in API level 28.</p>"},{"location":"app/views/#duplicateparentstateenabled","title":"duplicateParentStateEnabled","text":"<p>Enables or disables the duplication of the parent's state into this view.</p> <pre><code>.duplicateParentStateEnabled() // sets to true\n.duplicateParentStateEnabled(false) // sets to false\n</code></pre>"},{"location":"app/views/#elevation","title":"elevation","text":"<p>Sets the base elevation of this view relative to its parent.</p> <pre><code>.elevation(8) // in dp units\n.elevation(8, .px) // in pixels\n</code></pre> <p>Refer to \u2192 units section for more details on dimension units.</p>"},{"location":"app/views/#enabled","title":"enabled","text":"<p>Set the enabled state of this view.</p> <pre><code>.enabled() // sets to true\n.enabled(false) // sets to false\n</code></pre>"},{"location":"app/views/#fadingedgelength","title":"fadingEdgeLength","text":"<p>Set the size of the faded edge used to indicate that more content in this view is available.</p> <pre><code>.fadingEdgeLength(16) // in dp units\n.fadingEdgeLength(16, .px) // in pixels\n</code></pre> <p>Refer to \u2192 units section for more details on dimension units.</p>"},{"location":"app/views/#filtertoucheswhenobscured","title":"filterTouchesWhenObscured","text":"<p>Sets whether the framework should discard touches when the view's window is obscured by another visible window at the touched location.</p> <pre><code>.filterTouchesWhenObscured() // sets to true\n.filterTouchesWhenObscured(false) // sets to false\n</code></pre>"},{"location":"app/views/#fitssystemwindows","title":"fitsSystemWindows","text":"<p>Sets whether or not this view should account for system screen decorations such as the status bar and inset its content; that is, controlling whether the default implementation of <code>fitSystemWindows(Rect)</code> will be executed.</p> <pre><code>.fitsSystemWindows() // sets to true\n.fitsSystemWindows(false) // sets to false\n</code></pre>"},{"location":"app/views/#focusable","title":"focusable","text":"<p>Sets whether this view can receive focus.</p> <pre><code>.focusable() // sets to true\n.focusable(false) // sets to false\n</code></pre>"},{"location":"app/views/#focusableintouchmode","title":"focusableInTouchMode","text":"<p>Sets whether this view can receive focus while in touch mode.</p> <pre><code>.focusableInTouchMode() // sets to true\n.focusableInTouchMode(false) // sets to false\n</code></pre>"},{"location":"app/views/#focusedbydefault","title":"focusedByDefault","text":"<p>Sets whether this View should receive focus when the focus is restored for the view hierarchy containing this view.</p> <pre><code>.focusedByDefault() // sets to true\n.focusedByDefault(false) // sets to false\n</code></pre>"},{"location":"app/views/#forcedarkallowed","title":"forceDarkAllowed","text":"<p>Sets whether this view allows the system to automatically apply a dark theme to it when the system is in dark mode.</p> <pre><code>.forceDarkAllowed() // sets to true\n.forceDarkAllowed(false) // sets to false\n</code></pre>"},{"location":"app/views/#foregroundgravity","title":"foregroundGravity","text":"<p>Sets the gravity used to position the foreground drawable within this view.</p> <pre><code>.foregroundGravity(.center)\n.foregroundGravity(.top | .start)\n</code></pre>"},{"location":"app/views/#framecontentvelocity","title":"frameContentVelocity","text":"<p>Sets the velocity at which content is moved within this view.</p> <pre><code>.frameContentVelocity(1.0) // normal speed\n.frameContentVelocity(0.5) // half speed\n.frameContentVelocity(2.0) // double speed\n</code></pre>"},{"location":"app/views/#handwritingboundsoffsets","title":"handwritingBoundsOffsets","text":"<p>Set the amount of offset applied to this view's stylus handwriting bounds.</p> <pre><code>.handwritingBoundsOffsets(left: 10, top: 10, right: 5, bottom: 5) // in dp units\n.handwritingBoundsOffsets(left: 10, top: 10, right: 5, bottom: 5, unit: .px) // in pixels\n</code></pre>"},{"location":"app/views/#handwritingdelegateflags","title":"handwritingDelegateFlags","text":"<p>Sets flags configuring the handwriting delegation behavior for this delegate editor view.</p> <pre><code>.handwritingDelegateFlags(.default)\n.handwritingDelegateFlags(.homeDelegatorAllowed)\n</code></pre>"},{"location":"app/views/#hapticfeedbackenabled","title":"hapticFeedbackEnabled","text":"<p>Set whether this view should have haptic feedback for events such as long presses.</p> <pre><code>.hapticFeedbackEnabled() // sets to true\n.hapticFeedbackEnabled(false) // sets to false\n</code></pre>"},{"location":"app/views/#hastransientstate","title":"hasTransientState","text":"<p>Set whether this view is currently tracking transient state that the framework should attempt to preserve when possible.</p> <pre><code>.hasTransientState() // sets to true\n.hasTransientState(false) // sets to false\n</code></pre>"},{"location":"app/views/#horizontalfadingedgeenabled","title":"horizontalFadingEdgeEnabled","text":"<p>Define whether the horizontal edges should be faded when this view is scrolled horizontally.</p> <pre><code>.horizontalFadingEdgeEnabled() // sets to true\n.horizontalFadingEdgeEnabled(false) // sets to false\n</code></pre>"},{"location":"app/views/#horizontalscrollbarenabled","title":"horizontalScrollBarEnabled","text":"<p>Define whether the horizontal scrollbar should be drawn or not.</p> <pre><code>.horizontalScrollBarEnabled() // sets to true\n.horizontalScrollBarEnabled(false) // sets to false\n</code></pre>"},{"location":"app/views/#hovered","title":"hovered","text":"<p>Sets the hovered state of this view.</p> <pre><code>.hovered() // sets to true\n.hovered(false) // sets to false\n</code></pre>"},{"location":"app/views/#importantforaccessibility","title":"importantForAccessibility","text":"<p>Sets how to determine whether this view is important for accessibility which is if it fires accessibility events and if it is reported to accessibility services that query the screen.</p> <pre><code>.importantForAccessibility(.yes)\n.importantForAccessibility(.no)\n.importantForAccessibility(.noHideDescendants)\n.importantForAccessibility(.auto)\n</code></pre>"},{"location":"app/views/#importantforautofill","title":"importantForAutofill","text":"<p>Sets how this view is important for autofill.</p> <pre><code>.importantForAutofill(.auto)\n.importantForAutofill(.captureNo)\n.importantForAutofill(.captureNoExcludeDescendants)\n.importantForAutofill(.captureYes)\n.importantForAutofill(.captureYesExcludeDescendants)\n</code></pre>"},{"location":"app/views/#importantforcontentcapture","title":"importantForContentCapture","text":"<p>Sets the mode for determining whether this view is considered important for content capture.</p> <pre><code>.importantForContentCapture(.auto)\n.importantForContentCapture(.captureNo)\n.importantForContentCapture(.captureNoExcludeDescendants)\n.importantForContentCapture(.captureYes)\n.importantForContentCapture(.captureYesExcludeDescendants)\n</code></pre>"},{"location":"app/views/#iscredential","title":"isCredential","text":"<p>Sets whether this view is a credential for Credential Manager purposes.</p> <pre><code>.isCredential() // sets to true\n.isCredential(false) // sets to false\n</code></pre>"},{"location":"app/views/#ishandwritingdelegate","title":"isHandwritingDelegate","text":"<p>Sets whether this view is a handwriting delegate editor view.</p> <pre><code>.isHandwritingDelegate() // sets to true\n.isHandwritingDelegate(false) // sets to false\n</code></pre>"},{"location":"app/views/#keepscreenon","title":"keepScreenOn","text":"<p>Sets whether to keep the screen on while this view is visible to the user.</p> <pre><code>.keepScreenOn() // sets to true\n.keepScreenOn(false) // sets to false\n</code></pre>"},{"location":"app/views/#keyboardnavigationcluster","title":"keyboardNavigationCluster","text":"<p>Set whether this view is a root of a keyboard navigation cluster.</p> <pre><code>.keyboardNavigationCluster() // sets to true\n.keyboardNavigationCluster(false) // sets to false\n</code></pre>"},{"location":"app/views/#labelfor","title":"labelFor","text":"<p>Sets the id of a view for which this view serves as a label for accessibility purposes.</p> <pre><code>.labelFor(anotherViewId)\n</code></pre>"},{"location":"app/views/#layoutdirection","title":"layoutDirection","text":"<p>Sets the layout direction for this view.</p> <pre><code>.layoutDirection(.ltr)\n.layoutDirection(.rtl)\n.layoutDirection(.locale)\n</code></pre>"},{"location":"app/views/#left","title":"left","text":"<p>Sets the left position of this view relative to its parent.</p> <pre><code>.left(50) // in dp units\n.left(50, .px) // in pixels\n</code></pre>"},{"location":"app/views/#lefttoprightbottom","title":"leftTopRightBottom","text":"<p>Assign a size and position to this view.</p> <pre><code>.leftTopRightBottom(left: 50, top: 100, right: 250, bottom: 400) // in dp units\n.leftTopRightBottom(left: 50, top: 100, right: 250, bottom: 400, unit: .px) // in pixels\n</code></pre> <p>Low-level layout method that directly sets the view's bounding box coordinates. Use with caution.</p>"},{"location":"app/views/#longclickable","title":"longClickable","text":"<p>Sets whether this view can receive long click events.</p> <pre><code>.longClickable() // sets to true\n.longClickable(false) // sets to false\n</code></pre>"},{"location":"app/views/#minimumheight","title":"minimumHeight","text":"<p>Sets the minimum height of this view.</p> <pre><code>.minimumHeight(48) // in dp units\n.minimumHeight(48, .px) // in pixels\n</code></pre>"},{"location":"app/views/#minimumwidth","title":"minimumWidth","text":"<p>Sets the minimum width of this view.</p> <pre><code>.minimumWidth(48) // in dp units\n.minimumWidth(48, .px) // in pixels\n</code></pre>"},{"location":"app/views/#nestedscrollingenabled","title":"nestedScrollingEnabled","text":"<p>Sets whether nested scrolling is enabled for this view.</p> <pre><code>.nestedScrollingEnabled() // sets to true\n.nestedScrollingEnabled(false) // sets to false\n</code></pre>"},{"location":"app/views/#nextclusterforwardid","title":"nextClusterForwardId","text":"<p>Sets the id of the view to use as the root of the next keyboard navigation cluster.</p> <pre><code>.nextClusterForwardId(anotherViewId)\n</code></pre>"},{"location":"app/views/#nextfocus","title":"nextFocus","text":"<p>Sets the id of the view to use when the next focus is requested in the specified direction.</p> <pre><code>.nextFocusUpId(anotherViewId)\n.nextFocusDownId(anotherViewId)\n.nextFocusForwardId(anotherViewId)\n.nextFocusLeftId(anotherViewId)\n.nextFocusRightId(anotherViewId)\n</code></pre>"},{"location":"app/views/#onapplywindowinsets","title":"onApplyWindowInsets","text":"<p>Set an OnApplyWindowInsetsListener to take over the policy for applying window insets to this view.</p> <pre><code>.onApplyWindowInsets { event in\n    event.isSameView // check if insets are for the same view\n    event.triggerView // get the view triggering the event\n}\n</code></pre>"},{"location":"app/views/#oncapturedpointer","title":"onCapturedPointer","text":"<p>Set a listener to receive callbacks when the pointer capture state of a view changes.</p> <pre><code>.onCapturedPointer { event in\n    event.motionEvent // all the info about the pointer\n}\n</code></pre> <p>Read about \u2192 motion event</p>"},{"location":"app/views/#onclick","title":"onClick","text":"<p>Register a callback to be invoked when this view is clicked.</p> <pre><code>.onClick { event in\n    event.isSameView // check if click is for the same view\n    event.triggerView // get the view triggering the event\n    Log.i(\"View clicked\")\n}\n</code></pre>"},{"location":"app/views/#oncontextclick","title":"onContextClick","text":"<p>Register a callback to be invoked when this view is context clicked.</p> <p>If the view is not context clickable, it becomes context clickable.</p> <pre><code>.onContextClick { event in\n    event.isSameView // check if context click is for the same view\n    event.triggerView // get the view triggering the event\n    Log.i(\"View context clicked\")\n}\n</code></pre>"},{"location":"app/views/#ondrag","title":"onDrag","text":"<p>Register a callback to be invoked when a drag event is dispatched to this view.</p> <pre><code>.onDrag { event in\n    event.isSameView // check if drag event is for the same view\n    event.triggerView // get the view triggering the event\n    event.dragEvent // all the info about the drag event\n    Log.i(\"View drag event\")\n}\n</code></pre> <p>Read about \u2192 drag event</p>"},{"location":"app/views/#onfocuschange","title":"onFocusChange","text":"<p>Register a callback to be invoked when the focus state of this view changes.</p> <pre><code>.onFocusChange { event in\n    event.isSameView // check if focus change is for the same view\n    event.triggerView // get the view triggering the event\n    event.hasFocus // bool to check if view has focus now\n    Log.i(\"View focus changed\")\n}\n</code></pre>"},{"location":"app/views/#ongenericmotion","title":"onGenericMotion","text":"<p>Register a callback to be invoked when a generic motion event is dispatched to this view.</p> <pre><code>.onGenericMotion { event in\n    event.isSameView // check if generic motion event is for the same view\n    event.triggerView // get the view triggering the event\n    event.motionEvent // all the info about the motion event\n    Log.i(\"View generic motion event\")\n}\n</code></pre> <p>Read about \u2192 motion event</p>"},{"location":"app/views/#onhover","title":"onHover","text":"<p>Register a callback to be invoked when a hover event is dispatched to this view.</p> <pre><code>.onHover { event in\n    event.isSameView // check if hover event is for the same view\n    event.triggerView // get the view triggering the event\n    event.motionEvent // all the info about the motion event\n    Log.i(\"View hover event\")\n}\n</code></pre> <p>Read about \u2192 motion event</p>"},{"location":"app/views/#onkey","title":"onKey","text":"<p>Register a callback to be invoked when a hardware key event is dispatched to this view.</p> <p>Key presses in software input methods will generally not trigger the methods of this listener.</p> <pre><code>.onKey { event in\n    event.isSameView // check if key event is for the same view\n    event.triggerView // get the view triggering the event\n    event.keyEvent // all the info about the key event\n    Log.i(\"View key event\")\n}\n</code></pre> <p>Read about \u2192 key event</p>"},{"location":"app/views/#onlongclick","title":"onLongClick","text":"<p>Register a callback to be invoked when this view is clicked and held.</p> <p>Return <code>true</code> if you catch the event.</p> <p>Returns <code>true</code> by default.</p> <pre><code>.onLongClick { event in\n    event.isSameView // check if long click event is for the same view\n    event.triggerView // get the view triggering the event\n    Log.i(\"View long clicked\")\n    return true // event caught\n}\n// or\n.onLongClick {\n    Log.i(\"View long clicked\")\n}\n</code></pre>"},{"location":"app/views/#onreceivecontent","title":"onReceiveContent","text":"<p>Sets the listener to be used to handle insertion of content into this view.</p> <pre><code>.onReceiveContent { event in\n    event.isSameView // check if receive content event is for the same view\n    event.triggerView // get the view triggering the event\n    event.payload // all the content info\n    Log.i(\"View receive content event\")\n}\n</code></pre> <p>Read about \u2192 content info</p>"},{"location":"app/views/#onscrollchange","title":"onScrollChange","text":"<p>Register a callback to be invoked when the scroll X or Y position of this view changes.</p> <pre><code>.onScrollChange { event in\n    event.isSameView // check if scroll change event is for the same view\n    event.triggerView // get the view triggering the event\n    event.scrollX // new scroll X position\n    event.scrollY // new scroll Y position\n    event.oldScrollX // old scroll X position\n    event.oldScrollY // old scroll Y position\n    Log.i(\"View scroll changed\")\n}\n</code></pre>"},{"location":"app/views/#onsystemuivisibilitychange","title":"onSystemUIVisibilityChange","text":"<p>Set a listener to receive callbacks when the visibility of the system bar changes.</p> <pre><code>.onSystemUIVisibilityChange { visibility in\n    visibility // new visibility flags\n    Log.i(\"View system UI visibility changed\")\n}\n</code></pre> <p>This method was deprecated in API level 30.</p>"},{"location":"app/views/#ontouch","title":"onTouch","text":"<p>Register a callback to be invoked when a touch event is dispatched to this view.</p> <pre><code>.onTouch { event in\n    event.isSameView // check if touch event is for the same view\n    event.triggerView // get the view triggering the event\n    event.motionEvent // all the info about the motion event\n    Log.i(\"View touch event\")\n}\n</code></pre> <p>Read about \u2192 motion event</p>"},{"location":"app/views/#outlineambientshadowcolor","title":"outlineAmbientShadowColor","text":"<p>Sets the color of the ambient shadow that is drawn when the view has a positive Z or elevation value.</p> <pre><code>.outlineAmbientShadowColor(.black)\n</code></pre> <p>Refer to \u2192 colors section for more details on colors.</p>"},{"location":"app/views/#outlinespotshadowcolor","title":"outlineSpotShadowColor","text":"<p>Sets the color of the spot shadow that is drawn when the view has a positive Z or elevation value.</p> <pre><code>.outlineSpotShadowColor(.darkGray)\n</code></pre> <p>Refer to \u2192 colors section for more details on colors.</p>"},{"location":"app/views/#overscrollmode","title":"overScrollMode","text":"<p>Sets the over-scroll mode for this view.</p> <pre><code>.overScrollMode(.always)\n.overScrollMode(.ifContentScrolls)\n.overScrollMode(.never)\n</code></pre>"},{"location":"app/views/#padding","title":"padding","text":"<p>Sets the padding for this view.</p> <pre><code>// sets all sides\n.padding(16)      // in dp\n.padding(16, .px) // in pixels\n// sets horizontal and vertical sides individually\n.padding(h: 16, v: 8)      // in dp\n.padding(h: 16, v: 8, .px) // in pixels\n// sets each side individually\n.padding(left: 8, top: 16, right: 8, bottom: 16)      // in dp\n.padding(left: 8, top: 16, right: 8, bottom: 16, .px) // in pixels\n</code></pre> <p>Refer to \u2192 units section for more details on dimension units.</p>"},{"location":"app/views/#paddingrelative","title":"paddingRelative","text":"<p>Sets the relative padding for this view.</p> <pre><code>// sets all sides\n.paddingRelative(16)      // in dp\n.paddingRelative(16, .px) // in pixels\n// sets horizontal and vertical sides individually\n.paddingRelative(h: 16, v: 8)      // in dp\n.paddingRelative(h: 16, v: 8, .px) // in pixels\n// sets each side individually\n.paddingRelative(start: 8, top: 16, end: 8, bottom: 16)      // in dp\n.paddingRelative(start: 8, top: 16, end: 8, bottom: 16, .px) // in pixels\n</code></pre> <p>Refer to \u2192 units section for more details on dimension units.</p>"},{"location":"app/views/#pivotx","title":"pivotX","text":"<p>Sets the X coordinate of the pivot point around which transformations are applied to this view.</p> <pre><code>.pivotX(50) // in dp units\n.pivotX(50, .px) // in pixels\n</code></pre> <p>Refer to \u2192 units section for more details on dimension units.</p>"},{"location":"app/views/#pivoty","title":"pivotY","text":"<p>Sets the Y coordinate of the pivot point around which transformations are applied to this view.</p> <pre><code>.pivotY(50) // in dp units\n.pivotY(50, .px) // in pixels\n</code></pre> <p>Refer to \u2192 units section for more details on dimension units.</p>"},{"location":"app/views/#preferkeepclear","title":"preferKeepClear","text":"<p>Set a preference to keep the bounds of this view clear from floating windows above this view's window.</p> <p>This informs the system that the view is considered a vital area for the user and that ideally it should not be covered. Setting this is only appropriate for UI where the user would likely take action to uncover it.</p> <p>The system will try to respect this preference, but when not possible will ignore it.</p> <pre><code>.preferKeepClear() // sets to true\n.preferKeepClear(false) // sets to false\n</code></pre>"},{"location":"app/views/#pressed","title":"pressed","text":"<p>Sets the pressed state of this view.</p> <pre><code>.pressed() // sets to true\n.pressed(false) // sets to false\n</code></pre>"},{"location":"app/views/#requestedframerate","title":"requestedFrameRate","text":"<p>You can set the preferred frame rate for a <code>View</code> using a positive number or by specifying the preferred frame rate category using constants.</p> <pre><code>.requestedFrameRate(60) // sets preferred frame rate to 60 FPS\n.requestedFrameRate(.noPreference) // system chooses the best frame rate\n.requestedFrameRate(.normal) // sets default frame rate\n.requestedFrameRate(.low) // sets to low power mode\n.requestedFrameRate(.high) // sets to high performance mode\n</code></pre>"},{"location":"app/views/#revealonfocushint","title":"revealOnFocusHint","text":"<p>Sets this view's preference for reveal behavior when it gains focus.</p> <pre><code>.revealOnFocusHint() // sets to true\n.revealOnFocusHint(false) // sets to false\n</code></pre>"},{"location":"app/views/#right","title":"right","text":"<p>Sets the right position of this view relative to its parent.</p> <pre><code>.right(250) // in dp units\n.right(250, .px) // in pixels\n</code></pre> <p>Refer to \u2192 units section for more details on dimension units.</p>"},{"location":"app/views/#rotation","title":"rotation","text":"<p>Sets the rotation of this view in degrees.</p> <pre><code>.rotation(45) // rotates 45 degrees\n</code></pre>"},{"location":"app/views/#rotationx","title":"rotationX","text":"<p>Sets the rotation of this view around the X axis in degrees.</p> <pre><code>.rotationX(30) // rotates 30 degrees\n</code></pre>"},{"location":"app/views/#rotationy","title":"rotationY","text":"<p>Sets the rotation of this view around the Y axis in degrees.</p> <pre><code>.rotationY(30) // rotates 30 degrees\n</code></pre>"},{"location":"app/views/#saveenabled","title":"saveEnabled","text":"<p>Controls whether the saving of this view's state is enabled (that is, whether its onSaveInstanceState() method will be called).</p> <pre><code>.saveEnabled() // sets to true\n.saveEnabled(false) // sets to false\n</code></pre>"},{"location":"app/views/#savefromparentenabled","title":"saveFromParentEnabled","text":"<p>Controls whether the entire hierarchy under this view will save its state when a state saving traversal occurs from its parent.</p> <pre><code>.saveFromParentEnabled() // sets to true\n.saveFromParentEnabled(false) // sets to false\n</code></pre>"},{"location":"app/views/#scalex","title":"scaleX","text":"<p>Sets the horizontal scaling factor of this view.</p> <pre><code>.scaleX(1.5) // scales to 150%\n</code></pre>"},{"location":"app/views/#scaley","title":"scaleY","text":"<p>Sets the vertical scaling factor of this view.</p> <pre><code>.scaleY(1.5) // scales to 150%\n</code></pre>"},{"location":"app/views/#screenreaderfocusable","title":"screenReaderFocusable","text":"<p>Sets whether this View should be a focusable element for screen readers and include non-focusable Views from its subtree when providing feedback.</p> <pre><code>.screenReaderFocusable() // sets to true\n.screenReaderFocusable(false) // sets to false\n</code></pre>"},{"location":"app/views/#scrollbardefaultdelaybeforefade","title":"scrollBarDefaultDelayBeforeFade","text":"<p>Sets the default delay before the scrollbars fade.</p> <pre><code>.scrollBarDefaultDelayBeforeFade(1.0) // in seconds\n</code></pre>"},{"location":"app/views/#scrollbarfadeduration","title":"scrollBarFadeDuration","text":"<p>Sets the duration of the fade for scrollbars.</p> <pre><code>.scrollBarFadeDuration(0.5) // in seconds\n</code></pre>"},{"location":"app/views/#scrollbarsize","title":"scrollBarSize","text":"<p>Sets the width of the scrollbars.</p> <pre><code>.scrollBarSize(4) // in dp units\n.scrollBarSize(4, .px) // in pixels\n</code></pre> <p>Refer to \u2192 units section for more details on dimension units.</p>"},{"location":"app/views/#scrollbarstyle","title":"scrollBarStyle","text":"<p>Sets the style of the scrollbars.</p> <pre><code>.scrollBarStyle(.insideOverlay)\n.scrollBarStyle(.insideInset)\n.scrollBarStyle(.outsideOverlay)\n.scrollBarStyle(.outsideInset)\n</code></pre>"},{"location":"app/views/#scrollcapturehint","title":"scrollCaptureHint","text":"<p>Sets whether this view is a hint to the system that it would like to capture scroll events for scroll capture.</p> <pre><code>.scrollCaptureHint(.auto)\n.scrollCaptureHint(.exclude)\n.scrollCaptureHint(.excludeDescendants)\n.scrollCaptureHint(.include)\n</code></pre>"},{"location":"app/views/#scrollcontainer","title":"scrollContainer","text":"<p>Change whether this view is one of the set of scrollable containers in its window.</p> <pre><code>.scrollContainer() // sets to true\n.scrollContainer(false) // sets to false\n</code></pre>"},{"location":"app/views/#scrollindicators","title":"scrollIndicators","text":"<p>Sets the state of all scroll indicators.</p> <pre><code>.scrollIndicators(.top)\n</code></pre>"},{"location":"app/views/#scrollx","title":"scrollX","text":"<p>Sets the scrolled left position of this view.</p> <pre><code>.scrollX(100) // in dp units\n.scrollX(100, .px) // in pixels\n</code></pre> <p>Refer to \u2192 units section for more details on dimension units.</p>"},{"location":"app/views/#scrolly","title":"scrollY","text":"<p>Sets the scrolled top position of this view.</p> <pre><code>.scrollY(100) // in dp units\n.scrollY(100, .px) // in pixels\n</code></pre> <p>Refer to \u2192 units section for more details on dimension units.</p>"},{"location":"app/views/#scrollbarfadingenabled","title":"scrollbarFadingEnabled","text":"<p>Sets whether the scrollbars will fade when the view is not scrolling.</p> <pre><code>.scrollbarFadingEnabled() // sets to true\n.scrollbarFadingEnabled(false) // sets to false\n</code></pre>"},{"location":"app/views/#selected","title":"selected","text":"<p>Sets the selected state of this view.</p> <pre><code>.selected() // sets to true\n.selected(false) // sets to false\n</code></pre>"},{"location":"app/views/#soundeffectsenabled","title":"soundEffectsEnabled","text":"<p>Set whether this view should have sound effects enabled for events such as clicking and touching.</p> <pre><code>.soundEffectsEnabled() // sets to true\n.soundEffectsEnabled(false) // sets to false\n</code></pre>"},{"location":"app/views/#statedescription","title":"stateDescription","text":"<p>Sets the state description of this view for accessibility purposes.</p> <pre><code>.stateDescription(\"Expanded\")\n</code></pre>"},{"location":"app/views/#systemuivisibility","title":"systemUiVisibility","text":"<p>Sets the system UI visibility flags for this view.</p> <pre><code>.systemUiVisibility(.lowProfile | .fullscreen)\n</code></pre> <p>This method was deprecated in API level 30.</p>"},{"location":"app/views/#textalignment","title":"textAlignment","text":"<p>Sets the text alignment for this view.</p> <pre><code>.textAlignment(.textStart)\n.textAlignment(.center)\n.textAlignment(.viewEnd)\n// and so on...\n</code></pre>"},{"location":"app/views/#textdirection","title":"textDirection","text":"<p>Sets the text direction for this view.</p> <pre><code>.textDirection(.ltr)\n.textDirection(.rtl)\n.textDirection(.locale)\n// and so on...\n</code></pre>"},{"location":"app/views/#tooltiptext","title":"tooltipText","text":"<p>Sets the tooltip text for this view.</p> <pre><code>.tooltipText(\"This is a tooltip\")\n</code></pre>"},{"location":"app/views/#top","title":"top","text":"<p>Sets the top position of this view relative to its parent.</p> <pre><code>.top(100) // in dp units\n.top(100, .px) // in pixels\n</code></pre> <p>Refer to \u2192 units section for more details on dimension units.</p>"},{"location":"app/views/#transitionalpha","title":"transitionAlpha","text":"<p>Sets the transition alpha value for this view.</p> <pre><code>.transitionAlpha(0.5) // sets to 50% transparency\n</code></pre> <p>This property is intended only for use by the Fade transition, which animates it to produce a visual translucency that does not side-effect (or get affected by) the real alpha property.</p>"},{"location":"app/views/#transitionname","title":"transitionName","text":"<p>Sets the transition name for this view.</p> <pre><code>.transitionName(\"myTransitionView\")\n</code></pre>"},{"location":"app/views/#transitionvisibility","title":"transitionVisibility","text":"<p>Changes the visibility of this View without triggering any other changes.</p> <pre><code>.transitionVisibility(.visible)\n.transitionVisibility(.invisible)\n.transitionVisibility(.gone)\n</code></pre>"},{"location":"app/views/#translationx","title":"translationX","text":"<p>Sets the horizontal translation of this view.</p> <pre><code>.translationX(50) // in dp units\n.translationX(50, .px) // in pixels\n</code></pre> <p>Refer to \u2192 units section for more details on dimension units.</p>"},{"location":"app/views/#translationy","title":"translationY","text":"<p>Sets the vertical translation of this view.</p> <pre><code>.translationY(50) // in dp units\n.translationY(50, .px) // in pixels\n</code></pre> <p>Refer to \u2192 units section for more details on dimension units.</p>"},{"location":"app/views/#translationz","title":"translationZ","text":"<p>Sets the translation of this view along the Z axis.</p> <pre><code>.translationZ(8) // in dp units\n.translationZ(8, .px) // in pixels\n</code></pre> <p>Refer to \u2192 units section for more details on dimension units.</p>"},{"location":"app/views/#verticalscrollbarenabled","title":"verticalScrollBarEnabled","text":"<p>Define whether the vertical scrollbar should be drawn or not.</p> <pre><code>.verticalScrollBarEnabled() // sets to true\n.verticalScrollBarEnabled(false) // sets to false\n</code></pre>"},{"location":"app/views/#verticalscrollbarposition","title":"verticalScrollbarPosition","text":"<p>Sets the position of the vertical scrollbar.</p> <pre><code>.verticalScrollbarPosition(.default) // determined by the system\n.verticalScrollbarPosition(.left)    // along the left edge\n.verticalScrollbarPosition(.right)   // along the right edge\n</code></pre>"},{"location":"app/views/#visibility","title":"visibility","text":"<p>Sets the visibility of this view.</p> <pre><code>.visibility(.visible)\n.visibility(.invisible)\n.visibility(.gone)\n</code></pre>"},{"location":"app/views/#willnotcachedrawing","title":"willNotCacheDrawing","text":"<p>Sets whether this view will not cache its drawing.</p> <pre><code>.willNotCacheDrawing() // sets to true\n.willNotCacheDrawing(false) // sets to false\n</code></pre> <p>This method was deprecated in API level 28.</p>"},{"location":"app/views/#willnotdraw","title":"willNotDraw","text":"<p>Sets whether this view will not draw.</p> <pre><code>.willNotDraw() // sets to true\n.willNotDraw(false) // sets to false\n</code></pre>"},{"location":"app/views/#x","title":"x","text":"<p>Sets the visual x position of this view.</p> <pre><code>.x(100) // in dp units\n.x(100, .px) // in pixels\n</code></pre> <p>Refer to \u2192 units section for more details on dimension units.</p>"},{"location":"app/views/#y","title":"y","text":"<p>Sets the visual y position of this view.</p> <pre><code>.y(100) // in dp units\n.y(100, .px) // in pixels\n</code></pre> <p>Refer to \u2192 units section for more details on dimension units.</p>"},{"location":"app/views/#z","title":"z","text":"<p>Sets the visual z position of this view.</p> <pre><code>.z(8) // in dp units\n.z(8, .px) // in pixels\n</code></pre> <p>Refer to \u2192 units section for more details on dimension units.</p>"},{"location":"app/classic/h-space/","title":"HSpace","text":"<p>A horizontal spacing helper used to insert empty space with a fixed width or optional weight.</p> <p><code>HSpace</code> is a convenience wrapper around <code>Space</code> that is preconfigured for horizontal layouts. It is typically used inside <code>HStack</code> or other horizontally oriented <code>LinearLayout</code> containers.</p> <p><code>HSpace</code> does not render anything. It only affects layout measurement and positioning.</p> <pre><code>body {\n    HStack {\n        TextView(\"Left\")\n        HSpace(16, .dp)\n        TextView(\"Center\")\n        HSpace(16, .dp)\n        Button(\"Right\")\n    }\n}\n</code></pre> <p>In this example, <code>HSpace</code> creates fixed horizontal gaps between views.</p>"},{"location":"app/classic/h-stack/","title":"HStack","text":"<p>Horizontal container view used to arrange child views in a left-to-right order.</p> <p>It is a thin, convenience wrapper around Android\u2019s LinearLayout with its orientation fixed to <code>.horizontal</code>. Its purpose is to make horizontal layouts concise, readable, and familiar to Swift developers.</p> <pre><code>body {\n    HStack {\n        TextView(\"Some Text\")\n            .width(.wrapContent)\n            .height(.wrapContent)\n        Button(\"Tap Me\")\n            .width(.wrapContent)\n            .height(48, .dp)\n    }\n    .width(.matchParent)\n    .height(.wrapContent)\n    .gravityForSubviews(.center)\n    .padding(16, .dp)\n}\n</code></pre> <p>All child views are laid out horizontally in the order they are declared.</p>"},{"location":"app/classic/space/","title":"Space","text":"<p>An invisible layout helper used to create adjustable gaps between views.</p> <p><code>Space</code> is a lightweight wrapper around Android\u2019s <code>android.widget.Space</code>. It does not draw anything and exists purely to participate in layout measurement and positioning.</p> <p>Unlike margins or padding, <code>Space</code> behaves like a real view and can expand or shrink based on layout rules such as weight.</p> <pre><code>body {\n    HStack {\n        TextView(\"Left\")\n        Space()\n        Button(\"Right\")\n    }\n    .width(.matchParent)\n    .height(.wrapContent)\n}\n</code></pre> <p>In this example, Space expands to fill the available horizontal space, pushing the views apart.</p>"},{"location":"app/classic/space/#behavior","title":"Behavior","text":"<ul> <li><code>Space</code> has no visual representation</li> <li>It takes up space during layout measurement</li> <li>It is ignored by accessibility services</li> <li>It is commonly used inside <code>LinearLayout</code>-based containers (<code>HStack</code>, <code>VStack</code>)</li> </ul> <p>By default, <code>Space</code> is initialized with:</p> <pre><code>weight(1)\n</code></pre> <p>This means it will expand to consume available space when used inside a layout that supports weights.</p>"},{"location":"app/classic/space/#weight-based-spacing","title":"Weight-based spacing","text":"<p>You can control how much space is taken by providing different weights:</p> <pre><code>body {\n    HStack {\n        TextView(\"A\")\n        Space(weight: 1)\n        TextView(\"B\")\n        Space(weight: 2)\n        TextView(\"C\")\n    }\n}\n</code></pre> <p>In this layout: - The second space will be twice as wide as the first - All spacing is resolved by the layout system, not manually calculated</p>"},{"location":"app/classic/space/#fixed-size-spacing","title":"Fixed-size spacing","text":"<p>If you need a fixed gap instead of flexible spacing, you can set explicit dimensions:</p> <pre><code>Space()\n    .width(16, .dp)\n</code></pre> <p>This behaves like a constant spacer and does not rely on weight.</p>"},{"location":"app/classic/space/#when-to-use-space","title":"When to use Space","text":"<p>Use <code>Space</code> when: - You need flexible spacing between views - You want layout-driven gaps instead of hardcoded margins - You want to distribute empty space predictably</p> <p>Avoid <code>Space</code> when: - Padding or margins are sufficient - The layout does not support weights</p> <p><code>Space</code> is a simple but powerful tool for building clean, adaptive layouts while staying fully aligned with native Android behavior.</p>"},{"location":"app/classic/v-space/","title":"VSpace","text":"<p>A vertical spacing helper used to insert empty space with a fixed height or optional weight.</p> <p><code>VSpace</code> is a convenience wrapper around <code>Space</code> that is preconfigured for vertical layouts. It is typically used inside <code>VStack</code> or other vertically oriented <code>LinearLayout</code> containers.</p> <p><code>VSpace</code> does not render anything. It only affects layout measurement and positioning.</p> <pre><code>body {\n    VStack {\n        TextView(\"Top\")\n        VSpace(16, .dp)\n        TextView(\"Center\")\n        VSpace(16, .dp)\n        Button(\"Bottom\")\n    }\n}\n</code></pre> <p>In this example, <code>VSpace</code> creates fixed vertical gaps between views.</p>"},{"location":"app/classic/v-stack/","title":"VStack","text":"<p>Vertical container view used to arrange child views in a top-to-bottom order.</p> <p>It is a thin, convenience wrapper around Android\u2019s LinearLayout with its orientation fixed to <code>.vertical</code>. Its purpose is to make vertical layouts concise, readable, and familiar to Swift developers.</p> <pre><code>body {\n    VStack {\n        TextView(\"Some Text\")\n            .width(.matchParent)\n            .height(.wrapContent)\n        Button(\"Tap Me\")\n            .width(.matchParent)\n            .height(48, .dp)\n    }\n    .width(.matchParent)\n    .height(.wrapContent)\n    .gravityForSubviews(.center)\n    .padding(16, .dp)\n}\n</code></pre> <p>All child views are laid out vertically in the order they are declared.</p>"},{"location":"app/x/recycler-view/","title":"Recycler View","text":"<p>A powerful and flexible component for displaying large data sets as a scrollable list or grid.</p> <p>It is optimized for performance by reusing item views that scroll off-screen, reducing memory usage and avoiding unnecessary view creation.</p> <p>A basic example:</p> <pre><code>RecyclerView()\n    .layoutManager(.linear(orientation: .vertical))\n    .adapter(\n        count: 30,\n        createView:\n            TextView()\n                .width(.matchParent)\n                .height(.wrapContent)\n                .textColor(.black),\n        bindView: { view, index in\n            view\n                .text(\"Item at position: \\(index)\")\n                .backgroundColor(index % 2 == 0 ? .lightGray : .white)\n                .padding()\n        }\n    )\n    .hasFixedSize(true)\n</code></pre>"},{"location":"app/x/recycler-view/#adapter","title":"Adapter","text":"<p>The adapter is responsible for:</p> <ul> <li>reporting how many items exist,</li> <li>creating item views,</li> <li>binding data to reusable views.</li> </ul> <p>You attach an adapter like this:</p> <pre><code>RecyclerView().adapter(...)\n</code></pre>"},{"location":"app/x/recycler-view/#count-or-items","title":"Count or Items","text":"<p>You can define the data source in two ways.</p> <p>Using a fixed count Provide the total number of items:</p> <pre><code>RecyclerView().adapter(\n    count: 100,\n    ...\n)\n</code></pre> <p>Using items Provide an array (or a reactive state):</p> <pre><code>@State var items: [String] = [\"Item 1\", \"Item 2\", \"Item 3\"]\nRecyclerView().adapter(\n    items: $items,\n    ...\n)\n</code></pre> <p>Using <code>@State</code> enables automatic updates when the data changes.</p>"},{"location":"app/x/recycler-view/#create-view","title":"Create View","text":"<p><code>createView</code> defines how item views are created. It is called only when a new view instance is needed.</p>"},{"location":"app/x/recycler-view/#single-view-type","title":"Single view type","text":"<p>If all items use the same view, simply return a view instance:</p> <pre><code>createView: TextView()\n    .width(.matchParent)\n    .height(.wrapContent)\n</code></pre> <p>This view will later be reused and configured in <code>bindView</code>.</p>"},{"location":"app/x/recycler-view/#multiple-view-types","title":"Multiple view types","text":"<p>If your list contains different item layouts, use <code>viewType</code>.</p> <p>You may still return the same view class for all types:</p> <pre><code>createView: { viewType in\n    TextView()\n        .width(.matchParent)\n        .height(.wrapContent)\n}\n</code></pre> <p>Or define a type-safe enum that conforms to <code>Viewable</code>:</p> <pre><code>enum Row: Viewable {\n    case title(TextView)\n    case rectangle(LinearLayout)\n\n    var view: some View {\n        switch self {\n        case .title(let v): v\n        case .rectangle(let v): v\n        }\n    }\n}\n</code></pre> <p>Then create views based on the type:</p> <pre><code>RecyclerView()\n    .adapter(\n        items: ...,\n        createView: { viewType in\n            switch viewType {\n            case .title:\n                return Row.title(\n                    TextView()\n                        .width(.matchParent)\n                        .height(.wrapContent)\n                )\n            case .rectangle:\n                return Row.rectangle(\n                    LinearLayout()\n                        .width(.matchParent)\n                        .height(100, .dp)\n                )\n            }\n        },\n        bindView: ...,\n        viewType: { item, position in\n            item.isTitle ? .title : .rectangle\n        }\n    )\n</code></pre> <p>This approach keeps complex lists clean, readable, and type-safe.</p>"},{"location":"app/x/recycler-view/#bind-view","title":"Bind View","text":"<p><code>bindView</code> connects your data to a reusable view. It is called every time a view is reused for a new item.</p>"},{"location":"app/x/recycler-view/#using-count","title":"Using count","text":"<p>When using count, you receive the item position:</p> <pre><code>bindView: { view, index in\n    view.text(\"Item at position: \\(index)\")\n}\n</code></pre>"},{"location":"app/x/recycler-view/#using-items","title":"Using items","text":"<p>When using <code>items</code>, you receive both the item and its position:</p> <pre><code>bindView: { view, item, position in\n    view.text(item)\n}\n</code></pre> <p>If your view is an enum conforming to <code>Viewable</code>, you can safely pattern-match:</p> <pre><code>bindView: { view, item, position in\n    switch view {\n    case .title(let textView):\n        textView.text(item.title)\n    case .rectangle(let linearLayout):\n        linearLayout.backgroundColor(item.color)\n    }\n}\n</code></pre>"},{"location":"app/x/recycler-view/#view-type","title":"View Type","text":"<p>If your RecyclerView displays multiple layouts, you must define how the view type is determined.</p>"},{"location":"app/x/recycler-view/#using-integers","title":"Using integers","text":"<pre><code>viewType: { item, position -&gt; Int in\n    position % 2 // Example: two view types based on position\n}\n</code></pre>"},{"location":"app/x/recycler-view/#using-a-typed-enum","title":"Using a typed enum","text":"<p>For better readability and safety, use a custom type:</p> <pre><code>enum RowType: Int, RecyclerView.ViewType {\n    case rectangle = 0\n    case title = 1\n    static func from(rawValue: Int) -&gt; RowType { .init(rawValue: rawValue)! }\n}\n</code></pre> <pre><code>RecyclerView()\n    .adapter(\n        items: ...,\n        createView: { type in\n            switch type {\n            case .rectangle:\n                return LinearLayout()\n            case .title:\n                return TextView()\n            }\n        },\n        viewType: { item, position -&gt; RowType in\n            item.id % 2 == 0 ? .rectangle : .title\n        }\n    )\n</code></pre>"},{"location":"app/x/recycler-view/#layout-managers","title":"Layout Managers","text":"<p>Layout managers control how items are positioned and measured, and when views are recycled.</p> <p>You can choose from several built-in layout managers or implement your own.</p>"},{"location":"app/x/recycler-view/#default","title":"Default","text":"<p>These options apply to the base RecyclerView behavior, regardless of the specific layout manager used.</p>"},{"location":"app/x/recycler-view/#item-prefetch-enabled","title":"Item Prefetch Enabled","text":"<p>Controls whether the LayoutManager should be asked to create and bind views outside the visible viewport while the UI thread is idle between frames.</p> <p>Enabling this can improve scroll performance by preparing views in advance.</p> <pre><code>.itemPrefetchEnabled(true)\n</code></pre>"},{"location":"app/x/recycler-view/#measurement-cache-enabled","title":"Measurement Cache Enabled","text":"<p>Controls whether RecyclerView should use its own measurement cache for child views.</p> <p>This cache is more aggressive than the default framework cache and can improve performance when item sizes are stable.</p> <pre><code>.measurementCacheEnabled(true)\n</code></pre>"},{"location":"app/x/recycler-view/#linearlayoutmanager","title":"LinearLayoutManager","text":"<p>Displays items in a vertical or horizontal list.</p> <pre><code>.layoutManager(\n    .linear(orientation: .vertical)\n    .reverseLayout()\n    .recycleChildrenOnDetach()\n    .initialPrefetchItemCount(10)\n    .smoothScrollbarEnabled()\n    .stackFromEnd()\n)\n</code></pre> <p>Here <code>.linear(orientation: .vertical)</code> is a shorthand for:</p> <pre><code>LinearLayoutManager(orientation: .vertical)\n</code></pre>"},{"location":"app/x/recycler-view/#orientation","title":"Orientation","text":"<p>Defines the direction in which items are laid out.</p> <p>Possible values: - <code>.vertical</code> - <code>.horizontal</code></p> <p>The default orientation is <code>.vertical</code>.</p> <pre><code>LinearLayoutManager(orientation: .horizontal)\n</code></pre> <p>or</p> <pre><code>LinearLayoutManager().orientation(.horizontal)\n</code></pre>"},{"location":"app/x/recycler-view/#reverse-layout","title":"Reverse Layout","text":"<p>Reverses the item traversal and layout order.</p> <p>Default value is <code>false</code>.</p> <pre><code>LinearLayoutManager().reverseLayout(true)\n</code></pre>"},{"location":"app/x/recycler-view/#recycle-children-on-detach","title":"Recycle Children On Detach","text":"<p>Controls whether child views should be recycled when the LayoutManager is detached from the RecyclerView.</p> <p>Default value is <code>false</code>.</p> <pre><code>LinearLayoutManager().recycleChildrenOnDetach(true)\n</code></pre>"},{"location":"app/x/recycler-view/#initial-prefetch-item-count","title":"Initial Prefetch Item Count","text":"<p>Sets how many items should be prefetched when this RecyclerView is nested inside another RecyclerView.</p> <p>This helps improve scroll performance for nested lists.</p> <pre><code>LinearLayoutManager().initialPrefetchItemCount(10)\n</code></pre>"},{"location":"app/x/recycler-view/#smooth-scrollbar-enabled","title":"Smooth Scrollbar Enabled","text":"<p>When enabled, the scrollbar thumb size and position are calculated based on the number of visible pixels in the visible items.</p> <p>This assumes that all items have similar dimensions. If item sizes vary significantly, the scrollbar may appear to change size while scrolling. In that case, disable this option.</p> <pre><code>LinearLayoutManager().smoothScrollbarEnabled(false)\n</code></pre>"},{"location":"app/x/recycler-view/#stack-from-end","title":"Stack From End","text":"<p>When enabled, items are laid out starting from the end of the container (for example, from the bottom in a vertical list).</p> <p>This is commonly used for chat or log-style layouts.</p> <pre><code>LinearLayoutManager().stackFromEnd(true)\n</code></pre>"},{"location":"app/x/recycler-view/#gridlayoutmanager","title":"GridLayoutManager","text":"<p>Displays items in a grid with multiple columns or rows.</p> <p>It inherits from <code>LinearLayoutManager</code>, so all of its configuration options are also available.</p> <pre><code>.layoutManager(\n    .grid(spanCount: 3, orientation: .vertical)\n    .reverseLayout(true)\n    .usingSpansToEstimateScrollbarDimensions(true)\n)\n</code></pre>"},{"location":"app/x/recycler-view/#span-count","title":"Span Count","text":"<p>Defines the number of spans in the grid. - For <code>.vertical</code> orientation: number of columns - For <code>.horizontal</code> orientation: number of rows</p> <pre><code>GridLayoutManager(spanCount: 3)\n</code></pre> <p>or</p> <pre><code>GridLayoutManager().spanCount(3)\n</code></pre>"},{"location":"app/x/recycler-view/#using-spans-to-estimate-scrollbar-dimensions","title":"Using Spans To Estimate Scrollbar Dimensions","text":"<p>When enabled, scrollbar range and offset calculations take span information into account.</p> <p>This improves scrollbar accuracy but requires additional calls to SpanSizeLookup.getSpanGroupIndex.</p> <p>Whether this is necessary depends on the structure and variability of your grid.</p> <pre><code>GridLayoutManager().usingSpansToEstimateScrollbarDimensions(true)\n</code></pre>"},{"location":"app/x/recycler-view/#staggeredgridlayoutmanager","title":"StaggeredGridLayoutManager","text":"<p>Displays items in a staggered grid, where items may have different sizes along the scrolling axis.</p> <pre><code>.layoutManager(\n    .staggeredGrid(spanCount: 3, orientation: .vertical)\n    .gapStrategy(.none)\n    .reverseLayout(true)\n)\n</code></pre>"},{"location":"app/x/recycler-view/#gap-strategy","title":"Gap Strategy","text":"<p>Defines how the layout manager handles gaps between items.</p> <p>Changing this value triggers a layout pass.</p> <p>Available strategies: - <code>.none</code> \u2013 leaves gaps as-is - <code>.lazy</code> \u2013 deprecated, no longer supported - <code>.moveItemsBetweenSpans</code> \u2013 minimizes gaps by moving items between spans with animations</p> <pre><code>StaggeredGridLayoutManager().gapStrategy(.none)\n</code></pre>"},{"location":"app/x/recycler-view/#reverse-layout_1","title":"Reverse Layout","text":"<p>Reverses item traversal and layout order.</p> <p>Default value is <code>false</code>.</p> <pre><code>StaggeredGridLayoutManager().reverseLayout(true)\n</code></pre>"},{"location":"app/x/recycler-view/#flexboxlayoutmanager","title":"FlexboxLayoutManager","text":"<p>Not implemented yet. You can still use Android\u2019s standard <code>FlexboxLayoutManager</code> with additional setup. Native support is planned for future releases.</p>"},{"location":"app/x/recycler-view/#has-fixed-size","title":"Has Fixed Size","text":"<p>By default, RecyclerView assumes item sizes may change. If the overall size of the RecyclerView does not depend on its content, enable fixed size for better performance:</p> <pre><code>RecyclerView().hasFixedSize(true)\n</code></pre>"},{"location":"app/x/recycler-view/#data-set-and-item-changes","title":"Data Set and Item Changes","text":"<p>To notify a RecyclerView about data set changes manually, you need a reference to its instance.</p> <p>If you are using items backed by <code>@State</code>, you do not need to call any notify methods \u2013 updates are handled automatically.</p> <p>There are two recommended ways to keep a reference to a RecyclerView.</p> <p>Using a lazy property</p> <pre><code>lazy var recyclerView = RecyclerView()\n</code></pre> <p>Use it directly in the body:</p> <pre><code>body {\n    recyclerView\n        .layoutManager(...)\n        .adapter(...)\n}\n</code></pre> <p>Using a bound instance Declare a force-unwrapped variable:</p> <pre><code>var recyclerView: RecyclerView!\n</code></pre> <p>Bind it inside the body using <code>itself</code>:</p> <pre><code>body {\n    RecyclerView()\n        .itself(&amp;self.recyclerView)\n        .layoutManager(...)\n        .adapter(...)\n}\n</code></pre> <p>Once you have a reference, you can explicitly notify the RecyclerView about data changes.</p>"},{"location":"app/x/recycler-view/#data-set-changed","title":"Data Set Changed","text":"<p>Notifies the adapter that the entire data set has changed.</p> <p>This forces all visible views to be rebound and is similar to <code>UITableView.reloadData()</code> in iOS.</p> <pre><code>items = [\"New\", \"Data\", \"Set\"]\nrecyclerView.notifyDataSetChanged()\n</code></pre> <p>Better UX can be achieved by using more specific notify methods below.</p>"},{"location":"app/x/recycler-view/#item-changed","title":"Item Changed","text":"<p>Notifies that a single item has changed.</p> <pre><code>items[0] = \"New Value\"\nrecyclerView.notifyItemChanged(at: 0)\n</code></pre>"},{"location":"app/x/recycler-view/#item-removed","title":"Item Removed","text":"<p>Notifies that a single item has been removed.</p> <pre><code>items.remove(at: 0)\nrecyclerView.notifyItemRemoved(at: 0)\n</code></pre>"},{"location":"app/x/recycler-view/#item-inserted","title":"Item Inserted","text":"<p>Notifies that a single item has been inserted.</p> <pre><code>items.insert(\"Inserted Item\", at: 0)\nrecyclerView.notifyItemInserted(at: 0)\n</code></pre>"},{"location":"app/x/recycler-view/#item-range-changes","title":"Item Range Changes","text":"<p>Notifies that a range of items has changed.</p> <pre><code>items[0] = \"New Value 1\"\nitems[1] = \"New Value 2\"\nrecyclerView.notifyItemRangeChanged(startAt: 0, count: 2)\n</code></pre>"},{"location":"app/x/recycler-view/#item-range-removed","title":"Item Range Removed","text":"<p>Notifies that a range of items has been removed.</p> <pre><code>items.removeSubrange(0..&lt;2)\nrecyclerView.notifyItemRangeRemoved(startAt: 0, count: 2)\n</code></pre>"},{"location":"app/x/recycler-view/#item-range-inserted","title":"Item Range Inserted","text":"<p>Notifies that a range of items has been inserted.</p> <pre><code>items.insert(contentsOf: [\"Inserted Item 1\", \"Inserted Item 2\"], at: 0)\nrecyclerView.notifyItemRangeInserted(startAt: 0, count: 2)\n</code></pre>"},{"location":"app/x/recycler-view/#item-size-and-performance","title":"Item Size and Performance","text":"<p>RecyclerView is highly optimized, but changing item sizes incorrectly can significantly affect scroll performance.</p> <p>In general, avoid resizing item views inside <code>bindView</code> unless absolutely necessary.</p>"},{"location":"app/x/recycler-view/#prefer-content-based-sizing-wrapcontent","title":"Prefer Content-Based Sizing (<code>wrapContent</code>)","text":"<p>If an item\u2019s height depends on its content (for example, text length or image size), use <code>.wrapContent</code> for the root view.</p> <pre><code>TextView()\n    .width(.matchParent)\n    .height(.wrapContent)\n</code></pre> <p>This allows RecyclerView to measure items efficiently during the layout phase, without triggering extra layout passes while scrolling.</p>"},{"location":"app/x/recycler-view/#use-view-types-for-categorical-sizes","title":"Use View Types for Categorical Sizes","text":"<p>If your list contains a small set of predefined item sizes (for example: compact, regular, expanded), use viewType and provide different views per type.</p> <pre><code>viewType: { item, _ in\n    item.isLarge ? .large : .compact\n}\n</code></pre> <p>This lets RecyclerView recycle views of the same size, instead of continuously resizing a single view instance.</p>"},{"location":"app/x/recycler-view/#programmatic-sizing-in-bindview-use-sparingly","title":"Programmatic Sizing in bindView (Use Sparingly)","text":"<p>If item size must be calculated dynamically (for example, based on screen size), you may set the height in <code>bindView</code>:</p> <pre><code>bindView: { view, item, _ in\n    view.height(calculatedHeight, .dp)\n}\n</code></pre> <p>Only update the size when it actually changes. Repeated layout updates trigger expensive layout passes and can cause scroll stutter.</p>"},{"location":"app/x/recycler-view/#hasfixedsize-and-variable-item-heights","title":"<code>hasFixedSize</code> and Variable Item Heights","text":"<p>If your items do not all have the same size, ensure fixed size mode is disabled:</p> <pre><code>RecyclerView().hasFixedSize(false)\n</code></pre> <p>When <code>hasFixedSize(true)</code> is enabled, RecyclerView assumes all items have identical dimensions, which can cause visual issues with variable-sized items.</p>"},{"location":"app/x/recycler-view/#common-patterns","title":"Common Patterns","text":""},{"location":"app/x/recycler-view/#empty-state","title":"Empty State","text":"<p>RecyclerView does not provide built-in empty state handling.</p> <p>Unlike SwiftUI, SwifDroid does not recreate the view hierarchy when state changes. Instead, view instances observe <code>@State</code> and update their properties reactively.</p> <p>The recommended approach is to keep both views in the hierarchy and control their visibility based on state.</p> <pre><code>@State var items: [String] = []\n\nbody {\n    TextView(\"No items available\")\n        .gravity(.center)\n        .width(.matchParent)\n        .height(.matchParent)\n        .visibility($items.map { $0.isEmpty ? .visible : .gone })\n    RecyclerView()\n        .adapter(\n            items: $items,\n            createView: TextView(),\n            bindView: { view, item, _ in\n                view.text(item)\n            }\n        )\n        .visibility($items.map { $0.isEmpty ? .gone : .visible })\n}\n</code></pre>"},{"location":"jni-kit/","title":"JNIKit","text":"<p>It is a foundation library that provides best in class Swift layer for Java Native Interface with automatic memory management, convenient methods to work with Java objects, beautiful wrappers for Java types, and more.</p> <p>Yeah nah it's not swift-java, it's an alternative foundation provided by the Swift Stream Family.</p>"},{"location":"jni-kit/#installation","title":"Installation","text":"<p>Open your <code>Package.swift</code> and add the following dependency:</p> <pre><code>// package dependencies\n.package(url: \"https://github.com/swifdroid/jni-kit.git\", from: \"2.10.0\")\n\n// target dependencies\n.product(name: \"JNIKit\", package: \"jni-kit\")\n</code></pre> <p>Then head to the \u2192 basics</p>"},{"location":"jni-kit/arrays/","title":"Arrays","text":""},{"location":"jni-kit/arrays/#1d-arrays","title":"1D Arrays","text":"<p>Swift array wrappers for Java types:</p> Swift Type JNI Type Swift Array <code>[Int8]</code> <code>jbyte[]</code> <code>JInt8Array</code> or <code>JByteArray</code> <code>[Int16]</code> <code>jshort[]</code> <code>JInt16Array</code> or <code>JShortArray</code> <code>[Int32]</code> <code>jint[]</code> <code>JInt32Array</code> or <code>JIntArray</code> <code>[Int64]</code> <code>jlong[]</code> <code>JInt64Array</code> or <code>JLongArray</code> <code>[UInt16]</code> <code>jchar[]</code> <code>JUInt16Array</code> or <code>JCharArray</code> <code>[Bool]</code> <code>jboolean[]</code> <code>JBoolArray</code> <code>[Float]</code> <code>jfloat[]</code> <code>JFloatArray</code> <code>[Double]</code> <code>jdouble[]</code> <code>JDoubleArray</code> <code>[Any]</code> <code>jobject[]</code> <code>JObjectArray</code>"},{"location":"jni-kit/arrays/#ways-of-initialization","title":"Ways of initialization","text":"<p>With a Swift <code>Array</code></p> <pre><code>JIntArray([1, 2, 3])\n</code></pre> <p>With a Swift <code>InlineArray</code></p> <pre><code>let inlineArray: InlineArray&lt;5, Int32&gt; = [1, 2 ,3, 4, 5]\nJIntArray(inlineArray)\n</code></pre> <p>Manually</p> <pre><code>let intArray = JIntArray(length: 3)!\n#if os(Android)\nvar cArray: [Int32] = [1, 2, 3]\nJEnv.current()?.setIntArrayRegion(intArray.object.ref.ref, start: 0, length: Int32(intArray.length), buffer: &amp;cArray)\n#endif\n</code></pre>"},{"location":"jni-kit/arrays/#reading","title":"Reading","text":""},{"location":"jni-kit/arrays/#copy-into-a-swift-array","title":"Copy into a Swift <code>Array</code>","text":"<pre><code>let intArray: JIntArray = ...\nlet swiftArray: [Int32] = intArray.toArray()\n</code></pre> <p>\u26a0\ufe0f Be careful with large arrays, copying them may consume a lot of memory.</p>"},{"location":"jni-kit/arrays/#iteration","title":"Iteration","text":"<p>Use this approach when working with large arrays:</p> <pre><code>let intArray: JIntArray = ...\nfor value in intArray {\n    Log.d(\"value: \\(value)\")\n}\n</code></pre>"},{"location":"jni-kit/arrays/#2d-arrays","title":"2D Arrays","text":"<p>You can pass and receive not only <code>[Int]</code>, but also <code>[[Int]]</code>, <code>[[Float]]</code>, and other similar types (listed above). This is a common pattern in Java and is often used in Android APIs, for instance, <code>ColorStateList</code> expects nested arrays for its state definitions.</p> <p>The naming convention is the same, just add <code>2D</code> in the end</p> Swift Type JNI Type Swift Array <code>[[Int8]]</code> <code>jbyte[][]</code> <code>JInt8Array2D</code> or <code>JByteArray2D</code> <code>[[Int16]]</code> <code>jshort[][]</code> <code>JInt16Array2D</code> or <code>JShortArray2D</code> <code>[[Int32]]</code> <code>jint[][]</code> <code>JInt32Array2D</code> or <code>JIntArray2D</code> <code>[[Int64]]</code> <code>jlong[][]</code> <code>JInt64Array2D</code> or <code>JLongArray2D</code> <code>[[UInt16]]</code> <code>jchar[][]</code> <code>JUInt16Array2D</code> or <code>JCharArray2D</code> <code>[[Bool]]</code> <code>jboolean[][]</code> <code>JBoolArray2D</code> <code>[[Float]]</code> <code>jfloat[][]</code> <code>JFloatArray2D</code> <code>[[Double]]</code> <code>jdouble[][]</code> <code>JDoubleArray2D</code>"},{"location":"jni-kit/arrays/#initialization","title":"Initialization","text":"<p>Just as easy as with 1D arrays:</p> <pre><code>let intArray2d = JIntArray2D([[1, 2, 3], [4, 5, 6]])\n</code></pre>"},{"location":"jni-kit/arrays/#reading_1","title":"Reading","text":"<p>Equally straightforward:</p> <pre><code>let swiftArray: [[Int32]] = intArray2d.toArray()\n</code></pre>"},{"location":"jni-kit/arrays/#iteration_1","title":"Iteration","text":"<p>Iteration is supported as well:</p> <pre><code>for array in intArray2d {\n    Log.d(\"arrray: \\(array)\")\n}\n</code></pre>"},{"location":"jni-kit/arrays/#passing-arrays-as-arguments","title":"Passing Arrays as Arguments","text":"<p>If a JNI method or constructor accepts a 1D or 2D array, you can simply pass it directly, no extra work needed:</p> <pre><code>object.callVoidMethod(name: \"send1DArray\", args: [1, 2, 3])\nobject.callVoidMethod(name: \"send2DArray\", args: [[1, 2, 3], [4, 5, 6]])\n</code></pre>"},{"location":"jni-kit/basics/","title":"Basics of JNI in Swift","text":"<p>All communication between Swift and Java code happens via JNI \u2013 Java Native Interface.</p> <p>It is low-level C-based API that allows calling Java methods, accessing fields, creating objects, and more. As well as allowing Java code to call Swift functions which are exposed via <code>@_cdecl</code>.</p>"},{"location":"jni-kit/basics/#jni-environment","title":"JNI Environment","text":"<p>The main concept of JNI is the <code>JNIEnv</code> pointer, which represents the JNI environment. It is used to interact with the JVM (Java Virtual Machine) from native code.</p> <p>Lifecycle looks like this:</p> <ol> <li>You initialize JNI connection from Java side by calling a Swift function exposed via <code>@_cdecl</code>.</li> <li>You receive <code>JNIEnv</code> pointer in that function as the first argument.</li> <li>You can use that pointer to create <code>JEnv</code> instance from JNIKit, which provides a beautiful Swift layer over JNI C API.</li> <li>Using <code>JEnv</code> instance, you can create Java objects, call methods, access fields, and more.</li> </ol> <p>Since Swift is concurrent by design, each thread must attach itself to the JVM to obtain its own <code>JNIEnv</code> pointer. JNIKit handles this automatically when you call <code>JEnv.current()</code>.</p> <p>Read more about \u2192 environment.</p>"},{"location":"jni-kit/basics/#local-and-global-references","title":"Local and Global References","text":"<p>The second concept of JNI is that it provides pointers to Java objects.</p> <p>By JNI design, each Java object pointer passed to Swift as a local reference, meaning it can only be used within the current thread.</p> <p>Original lifecycle looks like this:</p> <ol> <li>Java object pointer passed to Swift as a local reference.</li> <li>You use that local reference within the current thread.</li> <li>You convert it to a global reference manually.</li> <li>You release the local reference.</li> <li>When you no longer need the global reference, you release it manually.</li> </ol> <p>JNIKit takes care of the heavy lifting for you. All local references are seamlessly converted into global references, ensuring smooth operation in concurrent scenarios. These global references are automatically managed and released when their corresponding Swift objects are deinitialized, so you can focus on writing Swift code without worrying about reference lifecycles.</p> <p>With JNIKit lifecycle looks like this:</p> <ol> <li>Java object pointer passed to Swift as a local reference.</li> <li>JNIKit is wrapping it into <code>JObject</code> which automatically converts it into a global reference.</li> <li>When <code>JObject</code> is deinitialized, it automatically releases the global reference.</li> </ol> <p>Important</p> <p><code>JObject</code> can be used across different threads safely.</p>"},{"location":"jni-kit/basics/#naming-convention","title":"Naming convention","text":"<p>Let's talk about declaring JNI methods on the Swift side with <code>@_cdecl</code>. </p> <p><code>@_cdecl</code> naming convention is important as it follows JNI naming pattern <code>Java_&lt;package&gt;_&lt;class&gt;_&lt;method&gt;</code>, where: <code>&lt;package&gt;</code> is the fully qualified package name with underscores instead of dots <code>&lt;class&gt;</code> is the class name <code>&lt;method&gt;</code> is the method name</p> <p>Let's say you have a package <code>com.mylib.somecode</code> which contains <code>AwesomeCode</code> class which contains exported <code>hello</code> method. <code>@_cdecl</code> for it will be:</p> <pre><code>@_cdecl(\"Java_com_mylib_somecode_AwesomeCode_hello\")\n</code></pre> <p>Method arguments vary depending on your class and method declaration.</p> <p>The first argument is required and is always a pointer to the JNI environment, which is used to interact with the JVM.</p> <pre><code>envPointer: UnsafeMutablePointer&lt;JNIEnv?&gt;\n</code></pre> <p>The second argument is required and depends on whether the method is static or not.</p> <p>So it could be</p> <pre><code>thizRef: jobject\n</code></pre> <p>if the method is instance-based (non-static), in which case it will pass the instance from which it was called.</p> <p>Or it could be</p> <pre><code>clazzRef: jobject\n</code></pre> <p>if method was <code>static</code> so it will pass just a reference to the Java class.</p> <p>The next arguments are optional and directly represent the arguments declared in the Java method.</p> <p>The return type can be empty (<code>void</code>) or can return a value (even an optional one).</p> <p>The method can't be marked <code>async</code>, as it is not supported by <code>@_cdecl</code>. However, it is still possible to run asynchronous code in Swift if the original Java method was running on a non-UI thread.</p>"},{"location":"jni-kit/basics/#wrapping-up","title":"Wrapping up","text":"<p>First two arguments are required and passed into Swift automatically by JVM\u2194JNI mechanism, while third and subsequent arguments are actually arguments from your Java method.</p> <p>Continue to \u2192 initialization to start coding.</p>"},{"location":"jni-kit/cache/","title":"Cache","text":"<p>When working with JNI, it is important to minimize roundtrips to retrieve the same resources repeatedly. The <code>JNICache</code> implementation handles this by automatically storing <code>jclass</code> instances (by name), methodIDs, and fieldIDs for classes you have already used.</p> <p>You don't need to do anything for this, it caches these things automatically under the hood.</p> <p>And yes, it is thread-safe.</p> <p>Beautiful, let's learn the \u2192 types.</p>"},{"location":"jni-kit/casting/","title":"Casting","text":"<p>There are two situations where you need to cast an object from one class to another.</p> <ol> <li>When you want to treat an existing object as an instance of another class (usually a parent) to call a method or access a field.</li> </ol> <p>This is done using the <code>cast(to:)</code> method of <code>JObject</code>. It creates a proxy <code>JObject</code> of the target class but retains the same underlying JNI reference:</p> <pre><code>let editText: EditText\nlet textView = editText.cast(to: TextView.className)\n</code></pre> <ol> <li>When you need to pass an object to a method that expects a different class (also usually a parent).</li> </ol> <p>This is done using the <code>signed(as:)</code> method of <code>JObject</code>:</p> <pre><code>let customView: CustomView\nobject.callVoidMethod(name: \"setView\", args: customView.signed(as: View.className))\n</code></pre>"},{"location":"jni-kit/classes/","title":"Classes","text":"<p>Loading a class is the first thing you will face.</p> <p>There are a few ways to load it.</p>"},{"location":"jni-kit/classes/#via-env","title":"Via <code>env</code>","text":"<pre><code>let env = JEnv.current()!\nlet clazz: JClass = env.findClass(\"com/mylib/mypackage/MyClass\")\n</code></pre> <p>This way you will use the system's class loader, which will fail loading your dynamically loaded class. It should be used only for fundamental classes like <code>java/lang/Object</code>.</p>"},{"location":"jni-kit/classes/#via-classloader","title":"Via <code>classLoader</code>","text":"<p>The goal is to retrieve the application's class loader, which has access to dynamically loaded classes.</p> <p>In pure Java you could retrieve a class loader from any <code>jobject</code>, as was shown above in the initialize method.</p> <p>In Android the class loader is available in <code>ApplicationContext</code> or <code>ActivityContext</code>, as well as in any <code>jobject</code> of course, but there is a shorter convenience getter like <code>context.getClassLoader()</code>.</p> <p>The usage is as simple as</p> <pre><code>let clazz: JClass = classLoader.loadClass(\"com/mylib/mypackage/MyClass\")\n</code></pre>"},{"location":"jni-kit/classes/#via-cached-instance","title":"Via <code>cached</code> instance","text":"<p>The preferred way is to use a convenience <code>JClass</code> method:</p> <pre><code>let clazz: JClass = JClass.load(\"com/mylib/mypackage/MyClass\")\n</code></pre> <p>This way it tries to get it first from cache, then from the cached class loader, and if there is no cached class loader, then from the system's class loader.</p> <p>Tip</p> <p>You can call \u2192 static methods on the <code>JClass</code> type directly.</p>"},{"location":"jni-kit/classes/#class-names","title":"Class names","text":"<p>As you can see above, the class name is represented as a <code>String</code>, but actually it is not. The <code>JClassName</code> object contains the class name in all possible forms: dotted, slashed, and even just its pure name.</p> <p>You can predefine classnames as constants in the code for easy reuse and typo safety:</p> <pre><code>let class1 = JClassName(\"com/mylib/mypackage/MyClass1\")\nlet class2 = JClassName(\"com/mylib/mypackage/MyClass2\")\n</code></pre> <p>and then pass it like this:</p> <pre><code>JClass.load(class1)\n</code></pre> <p>or even put it into a <code>JClassName</code> extension:</p> <pre><code>extension JClassName {\n    static let class1 = JClassName(\"com/mylib/mypackage/MyClass1\")\n    static let class2 = JClassName(\"com/mylib/mypackage/MyClass2\")\n}\n</code></pre> <p>and then use it anywhere like this:</p> <pre><code>JClass.load(.class1)\n</code></pre>"},{"location":"jni-kit/env/","title":"Environment","text":"<p>Environment is the real bridge for any JNI call which in JNIKit's implementation is hidden under the hood but can also be used directly if needed.</p> <p>The environment pointer is wrapped into convenient <code>JEnv</code> object.</p> <p>Retrieve it this way:</p> <pre><code>let env = JEnv.current()\n</code></pre> <p>Warning</p> <p>Each instance works only in the thread where it was retrieved, so call <code>JEnv.current()</code> again if you switched thread or moved into <code>Task {}</code></p> <p>The possibilities of <code>JEnv</code> are a huge topic to describe in detail. I would say if you know what you want from it you will get it.</p> <p>All its methods are ergonomically wrapped for easy use with Swift types and convenience types like <code>JClass</code>, <code>JClassName</code>, <code>JObject</code>, <code>JMethodId</code>, and <code>JFieldId</code>.</p>"},{"location":"jni-kit/env/#version","title":"Version","text":"<pre><code>/// Returns the version of the JNI environment provided by the JVM\n///\n/// This is typically used to verify compatibility\n/// (e.g. `0x00010008` = JNI 1.8)\ngetVersion() -&gt; Int32\n\n/// Returns the JNI version as a human-readable string (e.g. `\"1.8\"`)\ngetVersionString() -&gt; String\n\n/// Returns the JNI version parsed into a `JNIVersion` struct\ngetVersionStruct() -&gt; JNIVersion // { major: 1, minor: 8 }\n</code></pre>"},{"location":"jni-kit/env/#class-definition","title":"Class Definition","text":"<pre><code>/// Defines a new Java class dynamically from raw bytecode\n///\n/// - Parameters:\n///   - name: The fully qualified class name (e.g., `\"com/example/MyClass\"`)\n///   - loader: A class loader object (or `nil` for bootstrap loader)\n///   - buf: Pointer to the `.class` bytecode\n///   - size: Size of the bytecode buffer\n/// - Returns: A newly defined Java class, or `nil` if failed\ndefineClass(\n    name: JClassName,\n    loader: JObject?,\n    buf: UnsafePointer&lt;jbyte&gt;,\n    size: jint\n) -&gt; JClass?\n\n/// Finds a class by name using the current class loader\n///\n/// - Parameter name: JNI slash-separated class path (e.g. `\"java/lang/String\"`)\n/// - Returns: A wrapped class reference or `nil` if not found\nfindClass(name: JClassName) -&gt; JClass?\n</code></pre>"},{"location":"jni-kit/env/#class-hierarchy","title":"Class Hierarchy","text":"<pre><code>/// Gets the superclass of a Java class\ngetSuperclass(of clazz: JClass) -&gt; JClass?\n\n/// Determines if `clazz2` is assignable to `clazz1`,\n/// equivalent to `clazz1.isAssignableFrom(clazz2)` in Java\nisAssignable(from clazz1: JClass, to clazz2: JClass) -&gt; Bool\n</code></pre> <p>Read more about \u2192 classes</p>"},{"location":"jni-kit/env/#reflection-conversion","title":"Reflection Conversion","text":"<pre><code>/// Converts a Java `Method` object to a native method ID\nfromReflectedMethod(method: JObject) -&gt; JMethodId?\n\n/// Converts a Java `Field` object to a native field ID\nfromReflectedField(field: JObject) -&gt; JFieldId?\n\n/// Converts a native method ID into a Java `Method` or `Constructor` object\n///\n/// - Parameters:\n///   - clazz: The class that declares the method\n///   - methodId: The native method ID\n///   - isStatic: Whether the method is static\ntoReflectedMethod(clazz: JClass, methodId: JMethodId, isStatic: Bool) -&gt; JObject?\n\n/// Converts a native field ID into a Java `Field` object\n///\n/// - Parameters:\n///   - clazz: The declaring class\n///   - fieldId: Native field ID\n///   - isStatic: Whether the field is static\ntoReflectedField(clazz: JClass, fieldId: JFieldId, isStatic: Bool) -&gt; JObject?\n</code></pre>"},{"location":"jni-kit/env/#exceptions","title":"Exceptions","text":"<pre><code>/// Throws an existing exception object in the JVM\n///\n/// - Parameter throwable: A `jthrowable` object\n/// - Returns: JNI status (`0` = OK, `-1` = error)\nthrowException(throwable: jthrowable) -&gt; Int32\n\n/// Throws a new exception given a class and error message\n///\n/// - Parameters:\n///   - clazz: Exception class (e.g. `java/lang/IllegalArgumentException`)\n///   - message: Error message\n/// - Returns: JNI status\nthrowNew(clazz: JClass, message: String) -&gt; Int32\n\n/// Checks whether a Java exception has been thrown in the current thread\n///\n/// - Returns: A throwable object if an exception is pending, or `nil`\nexceptionOccurred() -&gt; JThrowable?\n\n/// Describes the current exception (if any) to stderr (for debugging)\nexceptionDescribe()\n\n/// Clears the current exception from the JVM (if one is pending)\nexceptionClear()\n\n/// Triggers a fatal error in the JVM with a custom message\n/// This terminates the VM\nfatalError(message: String)\n\n/// Throws a Java exception object that is a subclass of `Throwable`\nthrowObject(throwable: jobject) -&gt; Int32\n\n/// Throws a `JThrowable` instance and returns a typed JNI status\nthrowObject(throwable: JThrowable) -&gt; JNIStatus\n</code></pre> Example: Detecting and Handling Java Exceptions <pre><code>let env = JEnv.current()\n\n// Call a Java method that might throw an exception\nlet result = env.callVoidMethod(...)\n\n// Check if an exception occurred\nif let exception = env.exceptionOccurred() {\n    // Describe the exception (prints details to stderr)\n    env.exceptionDescribe()\n\n    // Clear the exception to allow further JNI operations\n    env.exceptionClear()\n\n    // Optionally, rethrow the exception or handle it in Swift\n    print(\"Java exception: \\(exception.getMessage())\")\n}\n</code></pre> Example: Throwing a New Java Exception <pre><code>let env = JEnv.current()\n\n// Define the exception class and message\nif let exceptionClass = env.findClass(name: \"java/lang/IllegalArgumentException\") {\n    let message = \"Invalid argument provided\"\n\n    // Throw the exception\n    let status = env.throwNew(clazz: exceptionClass, message: message)\n\n    if status != 0 {\n        print(\"Failed to throw Java exception\")\n    }\n}\n</code></pre> Example: Throwing an Existing Java Exception Object <pre><code>let env = JEnv.current()\n\n// Create or retrieve a Java exception object\nlet exceptionObject: JObject = ... // Obtain a `JThrowable` or `JObject`\n\n// Throw the exception\nlet status = env.throwObject(throwable: exceptionObject)\n\nif status != 0 {\n    print(\"Failed to throw Java exception object\")\n}\n</code></pre> Example: Triggering a Fatal Error <pre><code>let env = JEnv.current()\n\n// Terminate the JVM with a custom message\nenv.fatalError(message: \"Critical error occurred in Swift\")\n</code></pre>"},{"location":"jni-kit/env/#reference-frames","title":"Reference Frames","text":"<pre><code>/// Pushes a new local reference frame,\n/// allowing scoped object reference tracking\n///\n/// - Parameter capacity: Number of local refs to allocate.\n/// - Returns: JNI status code\npushLocalFrame(capacity: jint) -&gt; Int32\n\n/// Pops the current local frame, returning a single retained reference\n///\n/// - Parameter result: Optional object to retain from the popped frame\npopLocalFrame(result: JObject?) -&gt; JObject?\n</code></pre>"},{"location":"jni-kit/env/#reference-management","title":"Reference Management","text":"<pre><code>/// Promotes a local reference to a global one (GC-safe)\nnewGlobalRef(obj: JObject) -&gt; JObject?\n\n/// Deletes a global reference previously promoted\ndeleteGlobalRef(globalRef: JObject)\n\n/// Deletes a local reference to allow early GC\ndeleteLocalRef(localRef: JObject)\n\n/// Returns whether two `jobject`s refer to the same underlying Java object\nisSameObject(obj1: JObject, obj2: JObject) -&gt; Bool\n\n/// Creates a new local reference to the given object\nnewLocalRef(obj: JObject) -&gt; JObject?\n\n/// Ensures there's room for `capacity`\n/// more local references in the current frame\n///\n/// - Returns: JNI status\nensureLocalCapacity(capacity: jint) -&gt; Int32\n</code></pre> Example: Promoting a Local Reference to a Global Reference <pre><code>let env = JEnv.current()\n\n// `localRef` is a pointer to a Java object obtained from JNI\n// which now needs to be converted to a global reference\nif let globalRef = env.newGlobalRef(localRef) {\n    print(\"Successfully promoted to a global reference\")\n    // Use `globalRef` safely across threads\n    // Use `env.deleteGlobalRef(globalRef)` when done\n} else {\n    print(\"Failed to promote to a global reference\")\n}\n</code></pre> Example: Deleting a Global Reference <pre><code>let env = JEnv.current()\n\nenv.deleteGlobalRef(globalRef)\nprint(\"Global reference deleted\")\n</code></pre> Example: Deleting a Local Reference <pre><code>let env = JEnv.current()\n\nenv.deleteLocalRef(localRef)\nprint(\"Local reference deleted\")\n</code></pre> Example: Checking if Two Java Objects are the Same <pre><code>let env = JEnv.current()\n\n// Assume `obj1` and `obj2` are `JObject` instances\nif env.isSameObject(obj1, obj2) {\n    print(\"Both objects refer to the same Java object\")\n} else {\n    print(\"Objects are different\")\n}\n</code></pre> Example: Ensuring Local Reference Capacity <pre><code>let env = JEnv.current()\n\n// Ensure there is room for 10 more local references\nlet status = env.ensureLocalCapacity(10)\nif status == 0 {\n    print(\"Successfully ensured local reference capacity\")\n} else {\n    print(\"Failed to ensure local reference capacity\")\n}\n</code></pre>"},{"location":"jni-kit/env/#object-allocation","title":"Object Allocation","text":"<pre><code>/// Allocates an instance of a class without calling its constructor\nallocObject(clazz: JClass) -&gt; JObject?\n</code></pre>"},{"location":"jni-kit/env/#object-creation","title":"Object Creation","text":"<pre><code>/// Creates a new Java object by calling its constructor\n/// using a `jvalue[]` argument list\n///\n/// - Parameters:\n///   - clazz: The class of the object to instantiate\n///   - constructor: A `JMethodId` representing the `&lt;init&gt;` constructor method\n///   - args: array of values for the constructor,\n///           or `nil` if none\n/// - Returns: A new `JObject` instance or `nil` if object creation failed\nnewObject(\n    clazz: JClass,\n    constructor: JMethodId,\n    args: [any JValuable]? = nil\n) -&gt; JObject?\n</code></pre> <p>Constructor <code>methodID</code> can be looked up using <code>env.getMethodId(...)</code> with name <code>&lt;init&gt;</code> and appropriate signature \u2192 read below</p> <p>Read more about \u2192 JValuable</p>"},{"location":"jni-kit/env/#object-info","title":"Object Info","text":"<pre><code>/// Checks whether a Java object is an instance of a given class\n///\n/// Equivalent to `clazz.isInstance(obj)` in Java\n///\n/// - Parameters:\n///   - object: The Java object to check\n///   - clazz: The class to compare against\n/// - Returns: `true` if `object` is an instance of `clazz`\n///             or its subclass; otherwise, `false`\nisInstanceOf(object: JObject, clazz: JClass) -&gt; Bool\n</code></pre>"},{"location":"jni-kit/env/#method-lookup","title":"Method Lookup","text":"<pre><code>/// Finds an instance method ID for a method declared in the given class\n///\n/// This wraps the JNI `GetMethodID` call and converts it into a `JMethodId`\n///\n/// - Parameters:\n///   - clazz: The class in which the method is declared\n///   - name: The method name (e.g., `\"toString\"`)\n///   - sig: The method signature (e.g., `\"()Ljava/lang/String;\"`)\n/// - Returns: A `JMethodId` if found,\n///            or `nil` if the method doesn't exist or lookup fails\ngetMethodId(\n    clazz: JClass,\n    name: String,\n    sig: JMethodSignature\n) -&gt; JMethodId?\n</code></pre> <p>Read more about \u2192 signatures</p>"},{"location":"jni-kit/env/#instance-method-calls","title":"Instance Method Calls","text":"<p>JNI provides a variety of methods to call instance methods on Java objects, depending on the return type of the method being called.</p> <p>Supported return types include <code>void</code>, primitive types (like <code>int</code>, <code>float</code>, etc.), and object types.</p> <p>Depending on the return type, you should choose different JNI method name.</p> <p>If you want to call a method that returns an <code>int</code>, you would use <code>callIntMethod</code>. If the method returns an object, you would use <code>callObjectMethod</code>.</p> <p>Let's break down the object method call process:</p> <pre><code>callObjectMethod(\n    object: JObject,\n    methodId: JMethodId,\n    args: [any JValuable]? = nil,\n    returningClass: JClass\n) -&gt; JObject?\n</code></pre> <ul> <li><code>object</code>: the Java object on which you want to call the method</li> <li><code>methodId</code>: the method identifier obtained either using <code>env.getMethodId(...)</code> or <code>clazz.methodId(...)</code> \u2192 read more</li> <li><code>args</code>: an optional array of arguments to pass to the method \u2192 read more</li> <li><code>returningClass</code>: the <code>JClass</code> of the object that the method returns \u2192 read more</li> </ul> <p>The method returns a <code>JObject?</code>, which is the result of the method call, or <code>nil</code> if the call failed.</p> <p>The same pattern applies to primitive return types (void, int, float, etc.), but hese methods donot require the <code>returningClass</code> parameter since primitive types are known.</p> <pre><code>callBooleanMethod(\n    object: JObject,\n    methodId: JMethodId,\n    args: [any JValuable]? = nil\n) -&gt; Bool\n</code></pre> Full List of Methods <pre><code>/// Call a Java method returning `byte`.\ncallByteMethod(\n    object: JObject,\n    methodId: JMethodId,\n    args: [any JValuable]? = nil\n) -&gt; Int8\n\n/// Call a Java method returning `char`.\ncallCharMethod(\n    object: JObject,\n    methodId: JMethodId,\n    args: [any JValuable]? = nil\n) -&gt; UInt16\n\n/// Call a Java method returning `short`.\ncallShortMethod(\n    object: JObject,\n    methodId: JMethodId,\n    args: [any JValuable]? = nil\n) -&gt; Int16\n\n/// Call a Java method returning `int`.\ncallIntMethod(\n    object: JObject,\n    methodId: JMethodId,\n    args: [any JValuable]? = nil\n) -&gt; Int32\n\n/// Call a Java method returning `long`.\ncallLongMethod(\n    object: JObject,\n    methodId: JMethodId,\n    args: [any JValuable]? = nil\n) -&gt; Int64\n\n/// Call a Java method returning `float`.\ncallFloatMethod(\n    object: JObject,\n    methodId: JMethodId,\n    args: [any JValuable]? = nil\n) -&gt; Float\n\n/// Call a Java method returning `double`.\ncallDoubleMethod(\n    object: JObject,\n    methodId: JMethodId,\n    args: [any JValuable]? = nil\n) -&gt; Double\n\n/// Call a Java method returning `void`.\ncallVoidMethod(\n    object: JObject,\n    methodId: JMethodId,\n    args: [any JValuable]? = nil\n)\n</code></pre> <p>As you can see the principles are the same for all primitive types. Boolean method returns <code>Bool</code>, int method returns <code>Int32</code>, float method returns <code>Float</code>, void method returns nothing, and so on.</p>"},{"location":"jni-kit/env/#non-virtual-method-calls","title":"Non-Virtual Method Calls","text":"<p>JNI also provides non-virtual method calls, which allow you to call a method as if it were a member of a specific class, bypassing any overridden implementations in subclasses.</p> <p>It is the same as above but with <code>NonVirtual</code> in the method name, for example <code>callNonvirtualObjectMethod</code> or <code>callNonvirtualBooleanMethod</code>, and so on.</p>"},{"location":"jni-kit/env/#instance-fields","title":"Instance Fields","text":""},{"location":"jni-kit/env/#lookup","title":"Lookup","text":"<p>As well as methods you can access instance fields of Java objects.</p> <p>First you have to find the field ID using <code>getFieldId</code>:</p> <pre><code>getFieldId(\n    clazz: JClass,\n    name: String,\n    sig: JSignatureItem\n) -&gt; JFieldId?\n</code></pre> <p>And then you can get or set the field value using the appropriate JNI method based on the field type, same principles as with methods.</p>"},{"location":"jni-kit/env/#getters","title":"Getters","text":"<pre><code>getObjectField(\n    object: JObject,\n    fieldId: JFieldId,\n    returningClass: JClass\n) -&gt; JObject?\n</code></pre> <p>With object fields you need to provide the <code>returningClass</code> parameter to specify the class of the object being retrieved.</p> <p>For primitive fields, you would use methods like <code>getBooleanField</code>, <code>getIntField</code>, etc., which do not require the <code>returningClass</code> parameter.</p> <pre><code>getBooleanField(object: JObject, fieldId: JFieldId) -&gt; Bool\n</code></pre> Full List of Methods <pre><code>/// Get a `byte` field from a Java instance\ngetByteField(object: JObject, fieldId: JFieldId) -&gt; Int8\n\n/// Get a `char` field from a Java instance\ngetCharField(object: JObject, fieldId: JFieldId) -&gt; UInt16\n\n/// Get a `short` field from a Java instance\ngetShortField(object: JObject, fieldId: JFieldId) -&gt; Int16\n\n/// Get an `int` field from a Java instance\ngetIntField(object: JObject, fieldId: JFieldId) -&gt; Int32\n\n/// Get a `long` field from a Java instance\ngetLongField(object: JObject, fieldId: JFieldId) -&gt; Int64\n\n/// Get a `float` field from a Java instance\ngetFloatField(object: JObject, fieldId: JFieldId) -&gt; Float\n\n/// Get a `double` field from a Java instance\ngetDoubleField(object: JObject, fieldId: JFieldId) -&gt; Double\n</code></pre>"},{"location":"jni-kit/env/#setters","title":"Setters","text":"<p>For setting object fields, you would use:</p> <pre><code>setObjectField(\n    object: JObject,\n    fieldId: JFieldId,\n    value: JObject?\n)\n</code></pre> <p>Here, <code>value</code> is the new object to set for the field, and <code>object</code> is the instance containing the field.</p> <p>For primitive fields, you would use methods like <code>setBooleanField</code>, <code>setIntField</code>, etc.</p> <pre><code>setBooleanField(object: JObject, fieldId: JFieldId, value: jboolean)\n</code></pre> Full List of Methods <pre><code>/// Set a `byte` field on a Java instance.\nsetByteField(object: JObject, fieldId: JFieldId, value: Int8)\n\n/// Set a `char` field on a Java instance.\nsetCharField(object: JObject, fieldId: JFieldId, value: UInt16)\n\n/// Set a `short` field on a Java instance.\nsetShortField(object: JObject, fieldId: JFieldId, value: Int16)\n\n/// Set an `int` field on a Java instance.\nsetIntField(object: JObject, fieldId: JFieldId, value: Int32)\n\n/// Set a `long` field on a Java instance.\nsetLongField(object: JObject, fieldId: JFieldId, value: Int64)\n\n/// Set a `float` field on a Java instance.\nsetFloatField(object: JObject, fieldId: JFieldId, value: Float)\n\n/// Set a `double` field on a Java instance.\nsetDoubleField(object: JObject, fieldId: JFieldId, value: Double)\n</code></pre>"},{"location":"jni-kit/env/#static-method-lookup","title":"Static Method Lookup","text":"<p>Static methods are looked up similarly to instance methods, but on the class level and its lookup is done using <code>getStaticMethodId</code>:</p> <pre><code>getStaticMethodId(\n    clazz: JClass,\n    name: String,\n    sig: JMethodSignature\n) -&gt; JMethodId?\n</code></pre>"},{"location":"jni-kit/env/#static-method-calls","title":"Static Method Calls","text":"<p>Static methods are called similarly to instance methods, but you provide the class instead of an object.</p> <pre><code>callStaticObjectMethod(\n    clazz: JClass,\n    methodId: JMethodId,\n    args: [any JValuable]? = nil,\n    returningClass: JClass\n) -&gt; JObject?\n</code></pre> <p>The same applies to primitive return types like <code>callStaticIntMethod</code>, <code>callStaticBooleanMethod</code>, etc.</p> <pre><code>callStaticBooleanMethod(\n    clazz: JClass,\n    methodId: JMethodId,\n    args: [any JValuable]? = nil\n) -&gt; Bool\n</code></pre> Full List of Methods <pre><code>/// Call a static method returning `byte`.\ncallStaticByteMethod(\n    clazz: JClass,\n    methodId: JMethodId,\n    args: [any JValuable]? = nil\n) -&gt; Int8\n\n/// Call a static method returning `char`.\ncallStaticCharMethod(\n    clazz: JClass,\n    methodId: JMethodId,\n    args: [any JValuable]? = nil\n) -&gt; UInt16\n\n/// Call a static method returning `short`.\ncallStaticShortMethod(\n    clazz: JClass,\n    methodId: JMethodId,\n    args: [any JValuable]? = nil\n) -&gt; Int16\n\n/// Call a static method returning `int`.\ncallStaticIntMethod(\n    clazz: JClass,\n    methodId: JMethodId,\n    args: [any JValuable]? = nil\n) -&gt; Int32\n\n/// Call a static method returning `long`.\ncallStaticLongMethod(\n    clazz: JClass,\n    methodId: JMethodId,\n    args: [any JValuable]? = nil\n) -&gt; Int64\n\n/// Call a static method returning `float`.\ncallStaticFloatMethod(\n    clazz: JClass,\n    methodId: JMethodId,\n    args: [any JValuable]? = nil\n) -&gt; Float\n\n/// Call a static method returning `double`.\ncallStaticDoubleMethod(\n    clazz: JClass,\n    methodId: JMethodId,\n    args: [any JValuable]? = nil\n) -&gt; Double\n\n/// Call a static method returning `void`.\ncallStaticVoidMethod(\n    clazz: JClass,\n    methodId: JMethodId,\n    args: [any JValuable]? = nil\n)\n</code></pre>"},{"location":"jni-kit/env/#static-fields","title":"Static Fields","text":""},{"location":"jni-kit/env/#lookup_1","title":"Lookup","text":"<p>Static fields are looked up similarly to instance fields, but on the class level and its lookup is done using <code>getStaticFieldId</code>:</p> <pre><code>getStaticFieldId(\n    clazz: JClass,\n    name: String,\n    sig: JSignatureItem\n) -&gt; JFieldId?\n</code></pre>"},{"location":"jni-kit/env/#getters_1","title":"Getters","text":"<pre><code>getStaticObjectField(\n    staticClazz: JClass,\n    fieldId: JFieldId,\n    clazz: JClass\n) -&gt; JObject?\n</code></pre> <p>With object fields you need to provide the <code>clazz</code> parameter to specify the class of the object being retrieved.</p> <p>For primitive fields, you would use methods like <code>getStaticBooleanField</code>, <code>getStaticIntField</code>, etc., which do not require the <code>clazz</code> parameter.</p> <pre><code>getStaticBooleanField(clazz: JClass, fieldId: JFieldId) -&gt; Bool\n</code></pre> Full List of Static Methods <pre><code>/// Get the value of a static field returning a `byte`.\ngetStaticByteField(clazz: JClass, fieldId: JFieldId) -&gt; Int8\n\n/// Get the value of a static field returning a `char`.\ngetStaticCharField(clazz: JClass, fieldId: JFieldId) -&gt; UInt16\n\n/// Get the value of a static field returning a `short`.\ngetStaticShortField(clazz: JClass, fieldId: JFieldId) -&gt; Int16\n\n/// Get the value of a static field returning an `int`.\ngetStaticIntField(clazz: JClass, fieldId: JFieldId) -&gt; Int32\n\n/// Get the value of a static field returning a `long`.\ngetStaticLongField(clazz: JClass, fieldId: JFieldId) -&gt; Int64\n\n/// Get the value of a static field returning a `float`.\ngetStaticFloatField(clazz: JClass, fieldId: JFieldId) -&gt; Float\n\n/// Get the value of a static field returning a `double`.\ngetStaticDoubleField(clazz: JClass, fieldId: JFieldId) -&gt; Double\n</code></pre>"},{"location":"jni-kit/env/#setters_1","title":"Setters","text":"<p>For setting object fields, you would use:</p> <pre><code>setStaticObjectField(\n    clazz: JClass,\n    fieldId: JFieldId,\n    value: JObject?\n)\n</code></pre> <p>Here, <code>value</code> is the new object to set for the static field, and <code>clazz</code> is the class containing the static field.</p> <p>For primitive fields, you would use methods like <code>setStaticBooleanField</code>, <code>setStaticIntField</code>, etc.</p> <pre><code>setStaticBooleanField(clazz: JClass, fieldId: JFieldId, value: jboolean)\n</code></pre> Full List of Static Methods <pre><code>/// Set a static `byte` field.\nsetStaticByteField(clazz: JClass, fieldId: JFieldId, value: Int8)\n\n/// Set a static `char` field.\nsetStaticCharField(clazz: JClass, fieldId: JFieldId, value: UInt16)\n\n/// Set a static `short` field.\nsetStaticShortField(clazz: JClass, fieldId: JFieldId, value: Int16)\n\n/// Set a static `int` field.\nsetStaticIntField(clazz: JClass, fieldId: JFieldId, value: Int32)\n\n/// Set a static `long` field.\nsetStaticLongField(clazz: JClass, fieldId: JFieldId, value: Int64)\n\n/// Set a static `float` field.\nsetStaticFloatField(clazz: JClass, fieldId: JFieldId, value: Float)\n\n/// Set a static `double` field.\nsetStaticDoubleField(clazz: JClass, fieldId: JFieldId, value: Double)\n</code></pre>"},{"location":"jni-kit/env/#java-strings","title":"Java Strings","text":"<pre><code>/// Create a new Java string from a UTF-16 buffer\n///\n/// This corresponds to the JNI `NewString` function.\n/// It creates a `jstring` from the provided buffer of 16-bit characters\n///\n/// - Parameters:\n///   - chars: Pointer to the UTF-16 characters (`jchar` array)\n///   - length: Number of characters in the array (not bytes)\n/// - Returns: A new `jstring`, or `nil` if creation fails\nnewString(chars: UnsafePointer&lt;jchar&gt;, length: jint) -&gt; jstring?\n\n/// Get the UTF-16 length of a Java string\n///\n/// Equivalent to `GetStringLength`.\n/// This returns the number of UTF-16 code units, not bytes\n///\n/// - Parameter string: The Java string\n/// - Returns: Number of UTF-16 characters in the string\ngetStringLength(string: jstring) -&gt; Int32\n\n/// Retrieve a pointer to the UTF-16 contents of a Java string\n///\n/// This returns a read-only buffer of `jchar` values\n/// that represent the UTF-16 encoding of the string\n///\n/// - Important: After use, you **must** call `releaseStringChars`\n///              to avoid memory leaks\n///\n/// - Parameters:\n///   - string: Java `jstring` instance\n///   - isCopy: Optional pointer that receives whether the data is a copy\n/// - Returns: Pointer to UTF-16 characters or `nil`\ngetStringChars(\n    string: jstring,\n    isCopy: UnsafeMutablePointer&lt;jboolean&gt;? = nil\n) -&gt; UnsafePointer&lt;jchar&gt;?\n\n/// Release the buffer obtained from `getStringChars`\n///\n/// - Parameters:\n///   - string: The original Java string\n///   - chars: Pointer returned from `getStringChars`\nreleaseStringChars(string: jstring, chars: UnsafePointer&lt;jchar&gt;)\n\n/// Create a new Java UTF-8 string from a Swift `String`\n///\n/// This wraps `NewStringUTF`, which creates a Java string\n/// from a C-style UTF-8 encoded string\n///\n/// - Parameter string: A Swift string (will be converted to C UTF-8)\n/// - Returns: A new `jstring`, or `nil` if creation fails\nnewStringUTF(string: String) -&gt; jstring?\n\n/// Get the UTF-8 byte length of a Java string (not character count)\n///\n/// Equivalent to `GetStringUTFLength`, this returns the number of bytes\n/// required to encode the Java string in UTF-8\n///\n/// - Parameter string: The Java string\n/// - Returns: Number of bytes in UTF-8 encoding\ngetStringUTFLength(string: jstring) -&gt; Int32\n\n/// Retrieve a pointer to the UTF-8 encoded contents of a Java string\n///\n/// This pointer is valid until `releaseStringUTFChars` is called\n///\n/// - Important: After use, call `releaseStringUTFChars`\n///\n/// - Parameters:\n///   - string: The Java `jstring`\n///   - isCopy: Optional pointer to receive copy status\n/// - Returns: Pointer to null-terminated UTF-8 C string\ngetStringUTFChars(\n    string: jstring,\n    isCopy: UnsafeMutablePointer&lt;jboolean&gt;? = nil\n) -&gt; UnsafePointer&lt;CChar&gt;?\n\n/// Release a UTF-8 string buffer previously acquired from `getStringUTFChars`\n///\n/// - Parameters:\n///   - string: The original Java string\n///   - chars: Pointer obtained from `getStringUTFChars`\nreleaseStringUTFChars(\n    string: jstring,\n    chars: UnsafePointer&lt;CChar&gt;\n)\n</code></pre>"},{"location":"jni-kit/env/#arrays","title":"Arrays","text":"<pre><code>/// Get the number of elements in a Java array\n///\n/// Works for any array type including `jobjectArray`, `jintArray`, etc.\n///\n/// - Parameter array: A JNI `jarray` handle\n/// - Returns: The number of elements in the array\ngetArrayLength(array: jarray) -&gt; Int32\n</code></pre>"},{"location":"jni-kit/env/#object-arrays","title":"Object Arrays","text":"<pre><code>/// Create a new Java object array\n///\n/// This corresponds to JNI's `NewObjectArray`\n///\n/// - Parameters:\n///   - length: Number of elements in the array\n///   - clazz: Class type of array elements\n///   - initialElement: Optional element to initialize all entries with\n/// - Returns: A `JObjectArray` wrapping the created array\nnewObjectArray(\n    length: jint,\n    clazz: JClass,\n    initialElement: JObject? = nil\n) -&gt; JObjectArray?\n\n/// Get an element from a Java object array\n///\n/// - Parameters:\n///   - array: The object array\n///   - index: The index of the element to retrieve\n/// - Returns: A `JObject` wrapper for the element at that index\ngetObjectArrayElement(array: JObjectArray, index: jint) -&gt; JObject?\n\n/// Get an element from a Java object array\n///\n/// - Parameters:\n///   - array: The object array\n///   - index: The index of the element to retrieve\n/// - Returns: A `JObject` wrapper for the element at that index\ngetObjectArrayElement(\n    arrayObject: JObject,\n    index: jint,\n    returningClass: JClass? = nil\n) -&gt; JObject?\n\n/// Set an element in a Java object array\n///\n/// - Parameters:\n///   - array: The target object array\n///   - index: Index of the element to set\n///   - value: The value to insert (may be `nil`)\nsetObjectArrayElement(array: JObjectArray, index: jint, value: JObject?)\n\n/// Set an element in a Java object array\n///\n/// - Parameters:\n///   - arrayObject: The target object array\n///   - index: Index of the element to set\n///   - value: The value to insert (may be `nil`)\nsetObjectArrayElement(arrayObject: JObject, index: jint, value: JObject?)\n</code></pre>"},{"location":"jni-kit/env/#primitive-arrays","title":"Primitive Arrays","text":"<pre><code>/// Get a pointer to the contents of a `boolean[]` Java array\n///\n/// - Parameters:\n///   - array: A JNI `jbooleanArray`\n///   - isCopy: Optional pointer to receive JNI copy status (1=copy, 0=direct)\n/// - Returns: Pointer to native memory holding the array contents\ngetBooleanArrayElements(\n    array: jbooleanArray,\n    isCopy: UnsafeMutablePointer&lt;jboolean&gt;? = nil\n) -&gt; UnsafeMutablePointer&lt;jboolean&gt;?\n</code></pre> More Examples <pre><code>/// Get a pointer to a `byte[]` Java array\ngetByteArrayElements(\n    array: jbyteArray,\n    isCopy: UnsafeMutablePointer&lt;jboolean&gt;? = nil\n) -&gt; UnsafeMutablePointer&lt;jbyte&gt;?\n\n/// Get a pointer to a `char[]` Java array\ngetCharArrayElements(\n    array: jcharArray,\n    isCopy: UnsafeMutablePointer&lt;jboolean&gt;? = nil\n) -&gt; UnsafeMutablePointer&lt;jchar&gt;?\n\n/// Get a pointer to a `short[]` Java array\ngetShortArrayElements(\n    array: jshortArray,\n    isCopy: UnsafeMutablePointer&lt;jboolean&gt;? = nil\n) -&gt; UnsafeMutablePointer&lt;jshort&gt;?\n\n/// Get a pointer to an `int[]` Java array\ngetIntArrayElements(\n    array: jintArray,\n    isCopy: UnsafeMutablePointer&lt;jboolean&gt;? = nil\n) -&gt; UnsafeMutablePointer&lt;Int32&gt;?\n\n/// Get a pointer to a `long[]` Java array\ngetLongArrayElements(\n    array: jlongArray,\n    isCopy: UnsafeMutablePointer&lt;jboolean&gt;? = nil\n) -&gt; UnsafeMutablePointer&lt;Int64&gt;?\n\n/// Get a pointer to a `float[]` Java array\ngetFloatArrayElements(\n    array: jfloatArray,\n    isCopy: UnsafeMutablePointer&lt;jboolean&gt;? = nil\n) -&gt; UnsafeMutablePointer&lt;Float&gt;?\n\n/// Get a pointer to a `double[]` Java array\ngetDoubleArrayElements(\n    array: jdoubleArray,\n    isCopy: UnsafeMutablePointer&lt;jboolean&gt;? = nil\n) -&gt; UnsafeMutablePointer&lt;Double&gt;?\n</code></pre>"},{"location":"jni-kit/env/#release","title":"Release","text":"<pre><code>/// Release memory returned by `getBooleanArrayElements`\n///\n/// - Parameters:\n///   - array: The original `jbooleanArray`\n///   - elems: Pointer previously returned\n///   - mode: `0` to copy back,\n///           `JNI_COMMIT` to copy without free,\n///           `JNI_ABORT` to discard changes\nreleaseBooleanArrayElements(\n    array: jbooleanArray,\n    elems: UnsafeMutablePointer&lt;jboolean&gt;,\n    mode: jint = 0\n) {\n    env.pointee!.pointee.ReleaseBooleanArrayElements!(env, array, elems, mode)\n}\n</code></pre> More Examples <pre><code>/// Release memory for `byte[]`\nreleaseByteArrayElements(\n    array: jbyteArray,\n    elems: UnsafeMutablePointer&lt;jbyte&gt;,\n    mode: jint = 0\n) {\n    env.pointee!.pointee.ReleaseByteArrayElements!(env, array, elems, mode)\n}\n\n/// Release memory for `char[]`\nreleaseCharArrayElements(\n    array: jcharArray,\n    elems: UnsafeMutablePointer&lt;jchar&gt;,\n    mode: jint = 0\n) {\n    env.pointee!.pointee.ReleaseCharArrayElements!(env, array, elems, mode)\n}\n\n/// Release memory for `short[]`\nreleaseShortArrayElements(\n    array: jshortArray,\n    elems: UnsafeMutablePointer&lt;jshort&gt;,\n    mode: jint = 0\n) {\n    env.pointee!.pointee.ReleaseShortArrayElements!(env, array, elems, mode)\n}\n\n/// Release memory for `int[]`\nreleaseIntArrayElements(\n    array: jintArray,\n    elems: UnsafeMutablePointer&lt;jint&gt;,\n    mode: jint = 0\n) {\n    env.pointee!.pointee.ReleaseIntArrayElements!(env, array, elems, mode)\n}\n\n/// Release memory for `long[]`\nreleaseLongArrayElements(\n    array: jlongArray,\n    elems: UnsafeMutablePointer&lt;jlong&gt;,\n    mode: jint = 0\n) {\n    env.pointee!.pointee.ReleaseLongArrayElements!(env, array, elems, mode)\n}\n\n/// Release memory for `float[]`\nreleaseFloatArrayElements(\n    array: jfloatArray,\n    elems: UnsafeMutablePointer&lt;jfloat&gt;,\n    mode: jint = 0\n) {\n    env.pointee!.pointee.ReleaseFloatArrayElements!(env, array, elems, mode)\n}\n\n/// Release memory for `double[]`\nreleaseDoubleArrayElements(\n    array: jdoubleArray,\n    elems: UnsafeMutablePointer&lt;jdouble&gt;,\n    mode: jint = 0\n)\n</code></pre>"},{"location":"jni-kit/env/#region-getters","title":"Region Getters","text":"<pre><code>/// Copy a region from a Java `boolean[]` array into a native buffer\n///\n/// - Parameters:\n///   - array: The Java boolean array\n///   - start: Starting index to copy from\n///   - length: Number of elements to copy\n///   - buffer: Pointer to destination buffer to write into\ngetBooleanArrayRegion(\n    array: jbooleanArray,\n    start: jint,\n    length: jint,\n    buffer: UnsafeMutablePointer&lt;jboolean&gt;\n)\n</code></pre> More Examples <pre><code>/// Copy a region from a Java `byte[]` array\ngetByteArrayRegion(\n    array: jbyteArray,\n    start: jint,\n    length: jint,\n    buffer: UnsafeMutablePointer&lt;jbyte&gt;\n)\n\n/// Copy a region from a Java `char[]` array\ngetCharArrayRegion(\n    array: jcharArray,\n    start: jint,\n    length: jint,\n    buffer: UnsafeMutablePointer&lt;jchar&gt;\n)\n\n/// Copy a region from a Java `short[]` array\ngetShortArrayRegion(\n    array: jshortArray,\n    start: jint,\n    length: jint,\n    buffer: UnsafeMutablePointer&lt;jshort&gt;\n)\n\n/// Copy a region from a Java `int[]` array\ngetIntArrayRegion(\n    array: jintArray,\n    start: jint,\n    length: jint,\n    buffer: UnsafeMutablePointer&lt;jint&gt;\n)\n\n/// Copy a region from a Java `long[]` array\ngetLongArrayRegion(\n    array: jlongArray,\n    start: jint,\n    length: jint,\n    buffer: UnsafeMutablePointer&lt;jlong&gt;\n)\n\n/// Copy a region from a Java `float[]` array\ngetFloatArrayRegion(\n    array: jfloatArray,\n    start: jint,\n    length: jint,\n    buffer: UnsafeMutablePointer&lt;jfloat&gt;\n)\n\n/// Copy a region from a Java `double[]` array\ngetDoubleArrayRegion(\n    array: jdoubleArray,\n    start: jint,\n    length: jint,\n    buffer: UnsafeMutablePointer&lt;jdouble&gt;\n)\n</code></pre>"},{"location":"jni-kit/env/#region-setters","title":"Region Setters","text":"<pre><code>/// Set a region of a Java `boolean[]` array from native buffer data\n///\n/// - Parameters:\n///   - array: The Java array to update\n///   - start: The starting index to write into\n///   - length: Number of elements to write\n///   - buffer: Native buffer containing the data to write\nsetBooleanArrayRegion(\n    array: jbooleanArray,\n    start: jint,\n    length: jint,\n    buffer: UnsafePointer&lt;jboolean&gt;\n)\n</code></pre> More Examples <pre><code>/// Set region of `byte[]` array\nsetByteArrayRegion(\n    array: jbyteArray,\n    start: jint,\n    length: jint,\n    buffer: UnsafePointer&lt;jbyte&gt;\n)\n\n/// Set region of `char[]` array\nsetCharArrayRegion(\n    array: jcharArray,\n    start: jint,\n    length: jint,\n    buffer: UnsafePointer&lt;jchar&gt;\n)\n\n/// Set region of `short[]` array\nsetShortArrayRegion(\n    array: jshortArray,\n    start: jint,\n    length: jint,\n    buffer: UnsafePointer&lt;jshort&gt;\n)\n\n/// Set region of `int[]` array\nsetIntArrayRegion(\n    array: jintArray,\n    start: jint,\n    length: jint,\n    buffer: UnsafePointer&lt;jint&gt;\n)\n\n/// Set region of `long[]` array\nsetLongArrayRegion(\n    array: jlongArray,\n    start: jint,\n    length: jint,\n    buffer: UnsafePointer&lt;jlong&gt;\n)\n\n/// Set region of `float[]` array\nsetFloatArrayRegion(\n    array: jfloatArray,\n    start: jint,\n    length: jint,\n    buffer: UnsafePointer&lt;jfloat&gt;\n)\n\n/// Set region of `double[]` array\nsetDoubleArrayRegion(\n    array: jdoubleArray,\n    start: jint,\n    length: jint,\n    buffer: UnsafePointer&lt;jdouble&gt;\n)\n</code></pre>"},{"location":"jni-kit/env/#native-method-registration","title":"Native Method Registration","text":"<pre><code>/// Register native methods with a Java class\n///\n/// - Parameters:\n///   - clazz: The class to register native methods with\n///   - methods: Pointer to an array of `JNINativeMethod`\n///   - count: Number of methods to register\n/// - Returns: JNI status code (`JNI_OK` on success)\nregisterNatives(\n    clazz: JClass,\n    methods: UnsafePointer&lt;JNINativeMethod&gt;,\n    count: jint\n) -&gt; Int32\n\n/// Unregister all native methods previously registered for the given class\n///\n/// - Parameter clazz: The class to unregister methods from\n/// - Returns: JNI status code (`JNI_OK` on success)\nunregisterNatives(clazz: JClass) -&gt; Int32\n</code></pre>"},{"location":"jni-kit/env/#monitor-synchronized-helpers","title":"Monitor (synchronized) Helpers","text":"<pre><code>/// Enter the monitor associated with a Java object (like `synchronized` block)\nmonitorEnter(object: JObject) -&gt; Int32\n\n/// Exit the monitor associated with a Java object\nmonitorExit(object: JObject) -&gt; Int32\n</code></pre>"},{"location":"jni-kit/env/#jvm-access","title":"JVM Access","text":"<pre><code>/// Get the `JavaVM*` associated with this `JNIEnv`\n///\n/// - Returns: The pointer to the `JavaVM`, or `nil` if retrieval fails\ngetJavaVM() -&gt; UnsafeMutablePointer&lt;JavaVM?&gt;?\n</code></pre>"},{"location":"jni-kit/env/#string-region-access","title":"String Region Access","text":"<pre><code>/// Copy a region of a Java string's UTF-16 characters into a buffer\ngetStringRegion(\n    string: jstring,\n    start: jint,\n    length: jint,\n    buffer: UnsafeMutablePointer&lt;jchar&gt;\n)\n\n/// Copy a region of a Java string's UTF-8 characters into a buffer\ngetStringUTFRegion(\n    string: jstring,\n    start: jint,\n    length: jint,\n    buffer: UnsafeMutablePointer&lt;CChar&gt;\n)\n</code></pre>"},{"location":"jni-kit/env/#critical-array-access","title":"Critical Array Access","text":"<pre><code>/// Get a pointer to a primitive array's contents\n/// in a critical section (fastest access)\n///\n/// - Warning: The GC is disabled while the pointer is held\ngetPrimitiveArrayCritical(\n    array: jarray,\n    isCopy: UnsafeMutablePointer&lt;jboolean&gt;? = nil\n) -&gt; UnsafeMutableRawPointer?\n\n/// Release the pointer acquired from `getPrimitiveArrayCritical`\n///\n/// - Parameter mode: Either 0, `JNI_COMMIT`, or `JNI_ABORT`\nreleasePrimitiveArrayCritical(\n    array: jarray,\n    pointer: UnsafeMutableRawPointer,\n    mode: jint = 0\n)\n</code></pre>"},{"location":"jni-kit/env/#critical-string-access","title":"Critical String Access","text":"<pre><code>/// Get a pointer to the characters of a Java string in a critical section\n///\n/// - Warning: The GC is disabled while the pointer is held\ngetStringCritical(\n    string: jstring,\n    isCopy: UnsafeMutablePointer&lt;jboolean&gt;? = nil\n) -&gt; UnsafePointer&lt;jchar&gt;?\n\n/// Release a string pointer acquired from `getStringCritical`\nreleaseStringCritical(string: jstring, chars: UnsafePointer&lt;jchar&gt;)\n</code></pre>"},{"location":"jni-kit/env/#weak-global-refs","title":"Weak Global Refs","text":"<pre><code>/// Create a weak global reference to a Java object\n///\n/// Weak references allow the JVM to GC the object\n/// when no strong references exist\nnewWeakGlobalRef(obj: JObject) -&gt; jweak?\n\n/// Delete a previously created weak global reference\ndeleteWeakGlobalRef(ref: jweak)\n</code></pre>"},{"location":"jni-kit/env/#exception-check","title":"Exception Check","text":"<pre><code>/// Check if a Java exception is currently pending on this thread\n///\n/// - Returns: `true` if an exception has occurred\nexceptionCheck() -&gt; Bool\n</code></pre>"},{"location":"jni-kit/env/#direct-bytebuffer","title":"Direct ByteBuffer","text":"<pre><code>/// Create a `java.nio.DirectByteBuffer` from a raw memory address\n///\n/// - Parameters:\n///   - address: Pointer to the memory to wrap\n///   - capacity: Number of bytes the buffer should expose\nnewDirectByteBuffer(address: UnsafeMutableRawPointer, capacity: Int64) -&gt; jobject?\n\n/// Get the memory address backing a direct byte buffer\ngetDirectBufferAddress(buffer: JObject) -&gt; UnsafeMutableRawPointer?\n\n/// Get the capacity in bytes of a direct byte buffer\ngetDirectBufferCapacity(buffer: JObject) -&gt; Int64\n</code></pre>"},{"location":"jni-kit/env/#reference-type-inspection","title":"Reference Type Inspection","text":"<pre><code>/// Inspect the type of a JNI object reference\n/// (`local`, `global`, `weak global`)\n///\n/// - Returns: A `JObjectRefType` describing the reference type\ngetObjectRefType(obj: JObject) -&gt; JObjectRefType\n</code></pre>"},{"location":"jni-kit/examples/","title":"Examples","text":""},{"location":"jni-kit/examples/#wrapping-java-class","title":"Wrapping Java class","text":"<p>A common use case is to wrap an existing Java class into a convenient Swift class.</p> <p>The following example demonstrates this using <code>java/util/Date</code>:</p> JDate.swift <pre><code>// Example of Date object wrapper\n\n/// A classic example of how to wrap a Java object into a Swift class.\n/// \n/// Here we wrap `java.util.Date` object and provide some convenience methods.\npublic final class JDate: JObjectable, Sendable {\n    /// The JNI class name\n    public static let className: JClassName = \"java/util/Date\"\n\n    /// JNI global reference object wrapper, it contains class metadata as well.\n    public let object: JObject\n\n    /// Initializer for when you already have a `JObject` reference.\n    /// \n    /// This is useful when you receive a `Date` object from Java code.\n    public init (_ object: JObject) {\n        self.object = object\n    }\n\n    /// Allocates a `Date` object and initializes it so that it represents the time\n    /// at which it was allocated, measured to the nearest millisecond.\n    public init? () {\n        #if os(Android)\n        guard\n            // Access current environment\n            let env = JEnv.current(),\n            // It finds the `java.util.Date` class and loads it directly or from the cache\n            let clazz = JClass.load(Self.className),\n            // Call to create a new instance of `java.util.Date` and get a global reference to it\n            let global = clazz.newObject(env)\n        else { return nil }\n        // Store the object to access it from methods\n        self.object = global\n        #else\n        // For non-Android platforms, return nil\n        return nil\n        #endif\n    }\n\n    /// Allocates a `Date` object and initializes it to represent the specified number of milliseconds since the standard base time known as \"the epoch\", namely January 1, 1970, 00:00:00 GMT.\n    /// \n    /// - Parameter milliseconds: The number of milliseconds since January 1, 1970, 00:00:00 GMT.\n    public init? (_ milliseconds: Int64) {\n        #if os(Android)\n        guard\n            // Access current environment\n            let env = JEnv.current(),\n            // It finds the `java.util.Date` class and loads it directly or from the cache\n            let clazz = JClass.load(Self.className),\n            // Call to create a new instance of `java.util.Date`\n            // with `milliseconds` parameter and get a global reference to it\n            let global = clazz.newObject(env, args: milliseconds)\n        else { return nil }\n        // Store the object to access it from methods\n        self.object = global\n        #else\n        // For non-Android platforms, return nil\n        return nil\n        #endif\n    }\n\n    /// Returns the day of the week represented by this date.\n    public func day() -&gt; Int32? {\n        // Convenience call to `java.util.Date.getDay()`\n        object.callIntMethod(name: \"getDay\")\n    }\n\n    /// Returns the hour represented by this Date object.\n    public func hours() -&gt; Int32? {\n        // Convenience call to `java.util.Date.getHours()`\n        object.callIntMethod(name: \"getHours\")\n    }\n\n    /// Returns the number of minutes past the hour represented by this date\n    public func minutes() -&gt; Int32? {\n        // Convenience call to `java.util.Date.getMinutes()`\n        object.callIntMethod(name: \"getMinutes\")\n    }\n\n    /// Returns the number of seconds past the minute represented by this date.\n    public func seconds() -&gt; Int32? {\n        // Convenience call to `java.util.Date.getSeconds()`\n        object.callIntMethod(name: \"getSeconds\")\n    }\n\n    /// Returns the number of milliseconds since January 1, 1970, 00:00:00 GMT for this date instance.\n    public func time() -&gt; Int32? {\n        // Convenience call to `java.util.Date.getTime()`\n        object.callIntMethod(name: \"getTime\")\n    }\n\n    /// Tests if this date is before the specified date.\n    public func before(_ date: JDate) -&gt; Bool {\n        // Convenience call to `java.util.Date.before(Date date)`\n        // which passes another `Date` object as a parameter\n        // and returns a boolean result\n        object.callBoolMethod(name: \"before\", args: date.object.signed(as: JDate.className)) ?? false\n    }\n\n    /// Tests if this date is after the specified date.\n    public func after(_ date: JDate) -&gt; Bool {\n        // Convenience call to `java.util.Date.after(Date date)`\n        // which passes another `Date` object as a parameter\n        // and returns a boolean result\n        object.callBoolMethod(name: \"after\", args: date.object.signed(as: JDate.className)) ?? false\n    }\n\n    /// Converts this java `Date` object to a Swift `Date`.\n    public func date() -&gt; Date? {\n        // Get milliseconds since epoch using `getTime` method\n        guard let time = time() else { return nil }\n        // Convert milliseconds to seconds and create a Swift `Date` object\n        return Date(timeIntervalSince1970: TimeInterval(time) / 1000.0)\n    }\n}\n</code></pre>"},{"location":"jni-kit/fields/","title":"Fields","text":""},{"location":"jni-kit/fields/#instance-fields","title":"Instance fields","text":""},{"location":"jni-kit/fields/#getting-field-value","title":"Getting field value","text":"<p>The principle is the same, but you need a fieldID and can't pass any arguments. The signature is needed only if the field returns an object.</p>"},{"location":"jni-kit/fields/#getting-an-object","title":"Getting an object","text":"<p>The way with <code>env</code>:</p> <pre><code>let env = JEnv.current()\nlet fieldId = object.clazz.fieldId(\n    env: env,\n    name: \"someField\",\n    signature: .object(\"com/mylib/mypackage/SomeObject\")\n)\nlet returningClazz = JClass.load(\"com/mylib/mypackage/SomeObject\")\nlet resultObject = env.getObjectField(\n    object: object,\n    fieldId,\n    clazz: returningClazz)\n</code></pre> <p>The way with <code>object</code>:</p> <pre><code>let returningClazz = JClass.load(\"com/mylib/mypackage/SomeObject\")\nobject.objectField(name: \"someField\", returningClass: returningClazz)\n</code></pre>"},{"location":"jni-kit/fields/#getting-an-int","title":"Getting an Int","text":"<p>The way with <code>env</code>:</p> <pre><code>let env = JEnv.current()\nlet fieldId = object.clazz.fieldId(\n    env: env,\n    name: \"numberField\",\n    signature: .int\n)\nlet resultInt = env.getIntField(object: object, fieldId)\n</code></pre> <p>The way with <code>clazz</code>:</p> <pre><code>object.intField(name: \"numberField\")\n</code></pre>"},{"location":"jni-kit/fields/#setting-field-value","title":"Setting field value","text":""},{"location":"jni-kit/fields/#setting-an-object","title":"Setting an object","text":"<p>The way with <code>env</code>:</p> <pre><code>let env = JEnv.current()\nlet fieldId = object.clazz.fieldId(\n    env: env,\n    name: \"someField\",\n    signature: .object(\"com/mylib/mypackage/SomeObject\")\n)\nenv.setObjectField(\n    object: object,\n    fieldId,\n    object.signed(as: \"com/mylib/mypackage/SomeObject\")\n)\n</code></pre> <p>The way with <code>object</code>:</p> <pre><code>object.objectField(\n    name: \"someField\",\n    object.signed(as: \"com/mylib/mypackage/SomeObject\")\n)\n</code></pre>"},{"location":"jni-kit/fields/#setting-an-int","title":"Setting an Int","text":"<p>The way with <code>env</code>:</p> <pre><code>let env = JEnv.current()\nlet fieldId = object.clazz.fieldId(\n    env: env,\n    name: \"numberField\",\n    signature: .int\n)\nlet resultInt = env.setIntField(object: object, fieldId, 123)\n</code></pre> <p>The way with <code>object</code>:</p> <pre><code>object.intField(name: \"numberField\", 123)\n</code></pre>"},{"location":"jni-kit/fields/#static-fields","title":"Static fields","text":""},{"location":"jni-kit/fields/#how-to-get-static-field-value","title":"How to get static field value","text":"<p>The way with <code>env</code>:</p> <pre><code>let env = JEnv.current()\nlet currentClazz = JClass.load(\"com/mylib/mypackage/MyClass\")\nlet fieldId = currentClazz.fieldId(env: env, name: \"someField\", signature: .object(\"com/mylib/mypackage/SomeObject\"))\nlet returningClazz = JClass.load(\"com/mylib/mypackage/SomeObject\")\nlet resultObject = env.getStaticObjectField(currentClazz, fieldId, clazz: returningClazz)\n</code></pre> <p>The way with <code>clazz</code>:</p> <pre><code>let currentClazz = JClass.load(\"com/mylib/mypackage/MyClass\")\nlet returningClazz = JClass.load(\"com/mylib/mypackage/SomeObject\")\ncurrentClazz.staticFieldId(name: String, signature: JSignatureItem)\n</code></pre>"},{"location":"jni-kit/initialization/","title":"Initialization","text":"<p>Required imports</p> <pre><code>import JNIKit\nimport Android\n</code></pre> <p>Your first task is to initialize the JVM connection.</p> <p>For that, you can declare a JNI initialization method like this:</p> <pre><code>@_cdecl(\"Java_com_mylib_mypackage_MyClass_initialize\")\npublic func initialize(\n    // pointer to the JNI environment\n    // which is used to interact with the JVM\n    envPointer: UnsafeMutablePointer&lt;JNIEnv?&gt;,\n    // reference to the Java class\n    // or could be `thizRef` for the call from the instance\n    clazzRef: jobject,\n    // optional, but recommended if you don't have a `thizRef`\n    callerRef: jobject\n) {\n    // Initialize JVM\n    let jvm = envPointer.jvm()\n    JNIKit.shared.initialize(with: jvm)\n}\n</code></pre> <p>At this point, your JNI connection is ready to use from the Swift side.</p> <p>But I also highly recommend caching the class loader instance by taking it from the <code>thizRef</code> or <code>callerRef</code> objects:</p> <pre><code>// Access current environment\nlet localEnv = JEnv(envPointer)\n\n// Convert caller's local ref into global ref\nlet callerBox = callerRef.box(localEnv)\n\n// Defer block to clean up local references\ndefer {\n    // Releases local ref to caller object\n    localEnv.deleteLocalRef(callerRef)\n}\n\n// Initialize `JObject` from boxed global reference to the caller object\nguard let callerObject = callerBox?.object() else { return }\n\n// Cache the class loader from the caller object\n// It is important for loading non-system classes later\n// e.g. your own Java classes\nif let classLoader = callerObject.getClassLoader(localEnv) {\n    JNICache.shared.setClassLoader(classLoader)\n    logger.info(\"\ud83d\ude80 class loader cached successfully\")\n}\n</code></pre> <p>Why do you need the class loader instance?</p> <p>Because without it, JNIKit will use the system-wide class loader, which can't load dynamically added classes like those from your app or your app's Gradle dependencies. So, it is a really important knowledge.</p> <p>Now, check out what is \u2192 cache for.</p>"},{"location":"jni-kit/methods/","title":"Methods","text":""},{"location":"jni-kit/methods/#instance-methods","title":"Instance methods","text":"<p>First of all, you need to know that the method call name depends on what type your method returns:</p> Name Return type callObjectMethod JObject callBooleanMethod Bool callByteMethod Int8 callCharMethod UInt16 callShortMethod Int16 callIntMethod Int32 callLongMethod Int64 callFloatMethod Float callDoubleMethod Double callVoidMethod Void <p>Then you have a choice of wether to call it on <code>env</code> which is a bit more complex or call it on an <code>object</code> much shorter convenience way.</p>"},{"location":"jni-kit/methods/#calling-method-that-returns-an-object","title":"Calling method that returns an object","text":"<p>The way with <code>env</code>:</p> <pre><code>let env = JEnv.current()\nlet methodId = clazz.methodId(\n    env: env,\n    name: \"getSomeObject\",\n    signature: .returning(.object(\"com/mylib/mypackage/SomeObject\"))\n)\nlet returningClazz = JClass.load(\"com/mylib/mypackage/SomeObject\")\nlet resultObject = env.callObjectMethod(\n    object: object,\n    methodId: methodId,\n    returningClass: returningClazz\n)\n</code></pre> <p>The way with <code>object</code>:</p> <pre><code>let returningClazz = JClass.load(\"com/mylib/mypackage/SomeObject\")\nlet resultObject = object.callObjectMethod(\n    name: \"getSomeObject\",\n    returningClass: returningClazz\n)\n</code></pre> <p>So the difference is that you don't have to get the <code>methodID</code> yourself, as it is handled automatically under the hood. You also have the option to not pass the <code>env</code>.</p> <p>Note</p> <p>The way with <code>object</code> is always shorter than with <code>env</code></p>"},{"location":"jni-kit/methods/#calling-method-that-pass-an-object-and-returns-nothing","title":"Calling method that pass an object and returns nothing","text":"<p>The way with <code>env</code>:</p> <pre><code>let env = JEnv.current()\nlet methodId = clazz.methodId(\n    env: env,\n    name: \"setSomeObject\",\n    signature: .init(\n        .object(\"com/mylib/mypackage/SomeObject\"),\n        returning: .void // optional, .void by default\n    )\n)\nlet resultObject = env.callVoidMethod(\n    object: object,\n    methodId: methodId,\n    args: [someObject.object]\n)\n</code></pre> <p>The way with <code>object</code>:</p> <pre><code>object.callVoidMethod(\n    name: \"setSomeObject\",\n    args: someObject.signed(as: \"com/mylib/mypackage/SomeObject\")\n    // or just someObject if you sure that automatic class is correct\n)\n</code></pre> <p>It is even shorter than the getter.</p>"},{"location":"jni-kit/methods/#calling-method-that-pass-a-string-and-returns-nothing","title":"Calling method that pass a string and returns nothing","text":"<p>The way with <code>object</code>:</p> <pre><code>object.callVoidMethod(\n    name: \"setString\",\n    args: \"Hello\" // or \"Hello\".wrap().signedAsString()\n    // or \"Hello\".signedAsCharSequence()\n)\n// String is always signed as java/lang/String by default\n</code></pre>"},{"location":"jni-kit/methods/#static-methods","title":"Static methods","text":""},{"location":"jni-kit/methods/#calling-static-method-that-returns-an-object","title":"Calling static method that returns an object","text":"<p>The way with <code>env</code>:</p> <pre><code>let env = JEnv.current()\nlet methodId = clazz.staticMethodId(\n    name: \"getSomeObject\",\n    signature: .returning(.object(\"com/mylib/mypackage/SomeObject\"))\n)\nlet returningClazz = JClass.load(\"com/mylib/mypackage/SomeObject\")\nlet resultObject = env.callStaticObjectMethod(\n    clazz: clazz,\n    methodId: methodId,\n    returningClass: returningClazz\n)\n</code></pre> <p>The way with <code>clazz</code>:</p> <pre><code>let returningClazz = JClass.load(\"com/mylib/mypackage/SomeObject\")\nlet resultObject = clazz.staticObjectMethod(\n    name: \"getSomeObject\",\n    returningClass: returningClazz\n)\n</code></pre>"},{"location":"jni-kit/objects/","title":"How to create a new object","text":"<p>JNIKit provides the <code>JObject</code> class, which holds a reference to a Java object.</p>"},{"location":"jni-kit/objects/#construct-jobject-with-no-arguments","title":"Construct JObject with no arguments","text":"<p>Convenient way with <code>clazz</code>:</p> <pre><code>guard\n    let clazz = JClass.load(\"com/mylib/mypackage/MyClass\"),\n    let object = clazz.newObject()\nelse { return }\n</code></pre> <p>More explicit way with <code>env</code>:</p> <pre><code>guard\n    let env = JEnv.current(),\n    let clazz = JClass.load(\"com/mylib/mypackage/MyClass\"),\n    let methodId = clazz.methodId(\n        env: env,\n        name: \"&lt;init&gt;\",\n        signature: .returning(.void)\n    ),\n    let object = env.newObject(\n        clazz: clazz,\n        constructor: methodId\n    )\nelse { return }\n</code></pre>"},{"location":"jni-kit/objects/#construct-jobject-with-arguments","title":"Construct JObject with arguments","text":"<p>Arguments have to be listed in both <code>methodId</code> and <code>newObject</code> in case of creating with <code>env</code>.</p> <p>Let's assume a class constructor expects <code>jint</code>, <code>jfloat</code>, and <code>jobject</code> (which is <code>java/lang/String</code>).</p> <p>Convenient way with <code>clazz</code>:</p> <pre><code>let object = clazz.newObject(\n    123,\n    1.23,\n    \"Hello\" // or \"Hello\".wrap().signedAsString()\n)\n</code></pre> <p>Explicit way with <code>env</code>:</p> <pre><code>let methodId = clazz.methodId(\n    env: env,\n    name: \"&lt;init&gt;\",\n    signature: .init(\n        .int,\n        .float,\n        .object(\"java/lang/String\"),\n        returning: .void // optional, .void by default\n    )\n)\nlet object = env.newObject(\n    clazz: clazz,\n    constructor: methodId,\n    args: [\n        123, // Int32 -&gt; jint\n        1.23, // Float -&gt; jfloat\n        \"Hello\".wrap()!.object // JObject -&gt; jstring\n    ]\n)\n</code></pre> <p>The constructed object is now a <code>JObject</code> that holds a global reference to the instance and a global reference to its class. Keep this object for as long as you need it.</p> <p>When <code>JObject</code> is deinitialized, its underlying <code>jobject</code> reference is released automatically.</p> <p>\u26a0\ufe0f Do not delete the underlying <code>jobject</code> reference manually, and do not use <code>jobject</code> from <code>JObject</code> anywhere outside.</p>"},{"location":"jni-kit/optionals/","title":"Optionals and NULL","text":"<p>You may have Java methods that accept nullable arguments.  For any <code>JObject</code>, you can pass Swift <code>nil</code>, which will be converted to JNI <code>NULL</code>:</p> <pre><code>let object1: JObject\nlet object2: JObject? // this could be nil\nlet object3: JObject\nobject.callVoidMethod(name: \"setView\", args: object1, object2, object3)\n</code></pre>"},{"location":"jni-kit/signature/","title":"Signature","text":"<p>We use it every time when discovering <code>methodID</code> or <code>fieldID</code>.</p> <p>For methods it consists of two parts, the arguments types and the returning type:</p> <pre><code>// method with no arguments, returns Void\nJSignature(returning: .void)\n// method with no arguments, returns Int32\nJSignature(returning: .int)\n// method with Int32 argument, returns Void\nJSignature(.int, returning: .void)\n// method with JObject argument, returns Void\nJSignature(.object(\"com/mylib/mypackage/SomeObject\"), returning: .void)\n// method with String argument, returns Void\nJSignature(.object(JString.className), returning: .void)\n</code></pre> <p>Read more \u2192 below.</p> <p>For fields only returning type matters:</p> <pre><code>.int // for Int32\n.float // for Float\n// similar for the other primitive types\n.object(\"com/mylib/mypackage/SomeObject\") // for JObject\n.object(JString.className) // for String\n.object(JString.charSequenseClassName) // for String\n</code></pre>"},{"location":"jni-kit/signature/#signing-objects","title":"Signing objects","text":"<p>When passing a <code>JObject</code> as a method argument, you have two options for specifying its type signature</p> <p>Rely on automatic signature inference, which uses the <code>JClass</code> associated with the <code>JObject</code></p> <p>Example with a generic <code>JObject</code>:</p> <pre><code>let object: JObject\nobject.callVoidMethod(name: \"setView\", args: object)\n</code></pre> <p>Example with a <code>JString</code>:</p> <pre><code>let string = \"Hello\"\nobject.callVoidMethod(name: \"setView\", args: string) // signed as java/lang/String by default\n</code></pre> <p>Manually sign the object with a specific class using the <code>signed(as:)</code> method</p> <p>Example with a generic <code>JObject</code>:</p> <pre><code>let object: JObject\nobject.callVoidMethod(name: \"setView\", args: object.signed(as: \"com/my/lib/SomeObject\"))\n</code></pre> <p>Example with a <code>JString</code> (signed as a <code>CharSequence</code>):</p> <pre><code>let string = \"Hello\"\nobject.callVoidMethod(name: \"setView\", args: string.signedAsCharSequence())\n</code></pre>"},{"location":"jni-kit/signature/#signing-methods","title":"Signing Methods","text":"<p>When you want to call some JNI method you have to provide its signature.</p> <p>For example, to call a method that takes no arguments and returns <code>void</code>, you can use:</p> <pre><code>JMethodSignature(returning: .void)\n// or just\n.returning(.void)\n</code></pre> <p>In JNI it is represented as <code>()V</code>.</p> <p>For method that takes an <code>Int32</code> argument and returns a <code>JObject</code>, you can use:</p> <pre><code>JMethodSignature(.int, returning: .object(\"com/mylib/mypackage/SomeObject\"))\n</code></pre> <p>In JNI it is represented as <code>(I)Lcom/mylib/mypackage/SomeObject;</code>.</p> <p>You can also create method signatures with multiple arguments:</p> <pre><code>JMethodSignature(\n    .int, .float, .object(JString.className), .double, \n    returning: .void\n)\n</code></pre> <p>In JNI it is represented as <code>(IFLjava/lang/String;D)V</code>.</p> <p>And so on, I think you got the idea.</p> A bit more examples <pre><code>// Method with no arguments, returns Int32\nJMethodSignature(returning: .int)\n// Represents as: ()I\n\n// Method with no arguments, returns JObject\nJMethodSignature(returning: .object(\"com/mylib/mypackage/SomeObject\"))\n// Represents as: ()Lcom/mylib/mypackage/SomeObject;\n\n// Method with no arguments, returns String\nJMethodSignature(returning: .object(JString.className))\n// Represents as: ()Ljava/lang/String;\n\n// or\nJMethodSignature(returning: .object(JString.charSequenseClassName))\n// Represents as: ()Ljava/lang/CharSequence;\n\n// Method with Int32 argument, returns Void\nJMethodSignature(.int, returning: .void)\n// Represents as: (I)V\n\n// Method with JObject argument, returns Void\nJMethodSignature(.object(\"com/mylib/mypackage/SomeObject\"), returning: .void)\n// Represents as: (Lcom/mylib/mypackage/SomeObject;)V\n\n// Method with String argument, returns Void\nJMethodSignature(.object(JString.className), returning: .void)\n// Represents as: (Ljava/lang/String;)V\n\n// or\nJMethodSignature(.object(JString.charSequenseClassName), returning: .void)\n// Represents as: (Ljava/lang/CharSequence;)V\n</code></pre>"},{"location":"jni-kit/to-string/","title":"To String","text":"<p>The most useful method which is available on all Java objects is <code>toString()</code>.</p> <p>Yup, of course JNIKit makes using it as simple as:</p> <pre><code>let someObject: JObject = ...\nsomeObject.toString()\n</code></pre>"},{"location":"jni-kit/types/","title":"Types","text":""},{"location":"jni-kit/types/#primitive-types","title":"Primitive types","text":"<p>JNI primitive types, how they represented in Swift:</p> JNI Swift jbyte Int8 jshort Int16 jint Int32 jlong Int64 jchar UInt16 jboolean Bool jfloat Float jdouble Double <p>Pure primitive types can be passed as method arguments directly:</p> <pre><code>let intValue: Int32 = 9.41\nlet floatValue: Float = 9.41\nlet doubleValue: Double = 9.41\nobject.callVoidMethod(name: \"setValues\", args: intValue, floatValue, doubleValue)\n</code></pre> <p>These values cannot be <code>nil</code> and are always represented in the JNI signature as primitives.</p>"},{"location":"jni-kit/types/#primitive-type-objects","title":"Primitive type objects","text":"<p>However, if the Java side expects full object types like <code>java.lang.Integer</code> or <code>java.lang.Long</code>, you need to use their Swift wrapper equivalents listed below:</p> Swift Type Swift Wrapper Java Type Int8 JInt8 (JByte) java/lang/Byte Int16 JInt16 (JShort) java/lang/Short Int32 JInt32 (JInt, JInteger) java/lang/Integer Int64 JInt64 (JLong) java/lang/Long Bool JBool java/lang/Boolean Float JFloat java/lang/Float Double JDouble java/lang/Double UInt16 JUInt16 (JChar, JCharacter) java/lang/Character <p>These values can be <code>nil</code>.</p> <p>Usage Example:</p> <pre><code>let nilDoubleObject: JDouble? = nil\nlet doubleObject: JDouble? = 9.41\nlet double: Double = 9.41\n\n// Object Double is NULL\nobject.callVoidMethod(name: \"sendDouble\", args: nilDoubleObject)\n\n// Object Double is NOT NULL: 9.41\nobject.callVoidMethod(name: \"sendDouble\", args: doubleObject)\n\n// Primitive Double: 9.41\nobject.callVoidMethod(name: \"sendDouble\", args: double)\n</code></pre> <p>Corresponding Kotlin Code:</p> <pre><code>fun sendDouble(value: Double) {\n    Log.d(\"CHECK\", \"Primitive Double: $value\")\n}\nfun sendDouble(value: Double?) {\n    if (value != null) {\n        Log.d(\"CHECK\", \"Object Double is NOT NULL: $value\")\n    } else {\n        Log.d(\"CHECK\", \"Object Double is NULL\")\n    }\n}\n</code></pre>"},{"location":"jni-kit/types/#non-primitive-type-objects","title":"Non-primitive type objects","text":"<p>This includes all other Java object types like <code>String</code>, custom classes, collections, etc. They are represented in Swift as <code>JObject</code> or their specific subclasses (e.g., <code>JString</code> for <code>java.lang.String</code>).</p> <p>These values can also be <code>nil</code>.</p> <p>To know more please head to \u2192 Objects, \u2192 Classes, and \u2192 Signature</p>"},{"location":"jni-kit/values/","title":"Values","text":"<p>All values that you pass into Java methods should conform to <code>JValuable</code> protocol.</p>"},{"location":"jni-kit/values/#primitive-types","title":"Primitive types","text":"<p>Swift primitive types like <code>Int32</code>, <code>Float</code>, <code>Double</code>, <code>Bool</code>, etc. conform to <code>JValuable</code> protocol out of the box and can be passed directly as method arguments.</p> <pre><code>let intValue: Int32 = 42\nlet floatValue: Float = 3.14\nlet doubleValue: Double = 2.718\nlet boolValue: Bool = true\n\nobject.callVoidMethod(\n    name: \"setValues\",\n    args: intValue, floatValue, doubleValue, boolValue\n)\n</code></pre> <p>These values cannot be <code>nil</code> and are always represented in the JNI signature as primitives.</p> <p>However, methods may expect object types like <code>java.lang.Integer</code> or <code>java.lang.Boolean</code>. In such cases, you need to use their Swift wrapper equivalents that are listed in \u2192 types</p> <pre><code>let nilDoubleObject: JDouble? = nil\nlet doubleObject: JDouble? = 9.41\nlet double: Double = 9.41\n// Object Double is NULL\nobject.callVoidMethod(name: \"sendDouble\", args: nilDoubleObject)\n// Object Double is NOT NULL: 9.41\nobject.callVoidMethod(name: \"sendDouble\", args: doubleObject)\n// Primitive Double: 9.41\nobject.callVoidMethod(name: \"sendDouble\", args: double)\n</code></pre>"},{"location":"jni-kit/values/#arrays","title":"Arrays","text":"<p>Arrays with primitive types like <code>[Int32]</code>, <code>[Float]</code>, <code>[Double]</code>, etc. also conform to <code>JValuable</code> protocol out of the box and can be passed directly as method arguments.</p> <pre><code>let boolArray = JBoolArray([true, false, true])\nprint(\"bool array: \\(boolArray.toArray())\")\n</code></pre> More 1D Array Examples <pre><code>let byteArray = JByteArray([3, 4, 5])\nprint(\"byte array: \\(byteArray.toArray())\")\n\nlet charArray = JCharArray([3, 4, 5])\nprint(\"char array: \\(charArray.toArray())\")\n\nlet doubleArr = JDoubleArray([3.3, 4.4, 5.5])\nprint(\"double array: \\(doubleArr.toArray())\")\n\nlet floatArray = JFloatArray([3.3, 4.4, 5.5])\nprint(\"float array: \\(floatArray.toArray())\")\n\nlet longArray = JLongArray([3, 4, 5])\nprint(\"long array: \\(longArray.toArray())\")\n\nlet shortArray = JShortArray([3, 4, 5])\nprint(\"short array: \\(shortArray.toArray())\")\n</code></pre>"},{"location":"jni-kit/values/#2d-arrays","title":"2D Arrays","text":"<p>Even 2D arrays with primitive types like <code>[[Int32]]</code>, <code>[[Float]]</code>, <code>[[Double]]</code>, etc. conform to <code>JValuable</code> protocol and can be passed directly as method arguments.</p> <pre><code>let boolArr2d = JBoolArray2D([[true, false, true], [false, true, false]])\nprint(\"2d bool array: \\(boolArr2d.toArray())\")\n</code></pre> More 2D Array Examples <pre><code>let byteArr2d = JByteArray2D([[1, 2, 3], [4, 5, 6]])\nprint(\"2d byte array: \\(byteArr2d.toArray())\")\n\nlet charArr2d = JCharArray2D([[1, 2, 3], [4, 5, 6]])\nprint(\"2d char array: \\(charArr2d.toArray())\")\n\nlet doubleArr2d = JDoubleArray2D([[1.1, 2.2, 3.3], [4.4, 5.5, 6.6]])\nprint(\"2d double array: \\(doubleArr2d.toArray())\")\n\nlet floatArr2d = JFloatArray2D([[1.1, 2.2, 3.3], [4.4, 5.5, 6.6]])\nprint(\"2d float array: \\(floatArr2d.toArray())\")\n\nlet longArr2d = JLongArray2D([[1, 2, 3], [4, 5, 6]])\nprint(\"2d long array: \\(longArr2d.toArray())\")\n\nlet shortArr2d = JShortArray2D([[1, 2, 3], [4, 5, 6]])\nprint(\"2d short array: \\(shortArr2d.toArray())\")\n</code></pre>"},{"location":"jni-kit/values/#strings","title":"Strings","text":"<p>Swift <code>String</code> type also conforms to <code>JValuable</code> protocol out of the box and can be passed directly as method arguments.</p> <pre><code>let swiftString: String = \"Hello from Swift\"\nobject.callVoidMethod(name: \"setString\", args: swiftString)\n</code></pre> <p>If you need to explicitly sign it as <code>java.lang.CharSequence</code>, you can use:</p> <pre><code>let swiftString: String = \"Hello from Swift\"\nobject.callVoidMethod(\n    name: \"setCharSequence\",\n    args: swiftString.signedAsCharSequence()\n)\n</code></pre>"},{"location":"jni-kit/values/#objects","title":"Objects","text":"<p>Java objects represented as <code>JObject</code> should be passed with <code>signed(as:)</code> method to specify their class signature.</p> <pre><code>let javaObject: JObject = ...\nobject.callVoidMethod(\n    name: \"setObject\",\n    args: javaObject.signed(as: \"java.lang.Object\")\n)\n</code></pre> <p>More about that in \u2192 signature</p>"},{"location":"lib/","title":"Library Development","text":"<p>This guide will help you get started with SwiftDroid for building Android libraries in Swift.</p> <p>You will learn how to:</p> <p>\u2192 Create a library project \u2192 Structure and write your code \u2192 Build and test your library \u2192 Package and distribute it </p> <p>Library development is built on top of JNIKit, so it\u2019s recommended to read its \u2192 documentation first.</p>"},{"location":"lib/getting-started/","title":"Getting started","text":"<p>As you already \u2192 setup your development environment, it's time to create the project.</p> <p>On the left sidebar in VSCode, click the Swift Stream icon (the bird).</p> <p></p> <p>and hit Start New Project</p> <p>Now, enter your project name, for example, <code>MyFirstAndroidLib</code>.</p> <p></p> <p>You'll see that the new project will be created in your home folder by default.</p> <p>Tip</p> <p>You can choose a different folder by clicking the three-dots button.</p> <p>The next step is to choose <code>Android -&gt; Library</code> project type.</p> <p></p> <p>Click Create Project</p> <p>Next, enter the Java namespace for your library. This is usually your domain name in reverse (e.g., <code>com.example.mylib</code>).</p> <p></p> <p>After entering the namespace, hit Enter to move to the next step, where you'll choose the <code>Android Min SDK Version</code>.</p> <p> The best choice is 28, to support the widest range of devices, hit <code>Enter</code>.</p> <p>Note</p> <p>The official Swift for Android SDK supports SDKs from 28 to 35.</p> <p>Next choose the <code>Android Compile SDK Version</code>.</p> <p></p> <p>Choose 35 and hit <code>Enter</code> one more time to start the project creation process.</p> <p>At this point, VSCode will create a folder with all the project files and begin downloading the Docker image with a ready-to-use Android development environment.</p> <p>Once the image is downloaded, it will start the container and open a new VSCode window with your project inside it. The container will then download the Swift toolchain, Swift for Android SDK, Gradle, Android NDK, and Android SDK.</p> <p>Note</p> <p>These tools are cached on shared Docker volumes, so your next project will be created in seconds.</p> <p>However, this first launch might take some time, so please be patient.</p> <p>Warning</p> <p>If you see a popup saying that the Swift toolchain is not found, please wait for several minutes until the toolchain is fully downloaded inside the container. This popup is from the official Swift extension for VSCode, and it cannot detect the toolchain while it's being downloaded.</p> <p>Please wait until you see the following:</p> <p></p> <p>And you're all set! Ready to write some code!</p> <p>Important</p> <p>If you seen the popup about missing Swift toolchain, then once everything is ready, please hit Ctrl/Cmd+Shift+P and choose Reload Window to make the Swift extension detect the toolchain.</p>"},{"location":"lib/kotlin-project/","title":"Kotlin Library Project","text":""},{"location":"lib/kotlin-project/#source-code","title":"Source Code","text":"<p>Swift Stream automatically generates the initial Kotlin <code>Library</code> project for you. Its gradle files keeps in sync with your Swift code, however the rest is assumed to be maintained by you.</p> <p>During experiments you can always just remove <code>Library</code> folder and rebuild Swift project to regenerate it</p> <p>Here\u2019s a sample of the generated Kotlin interface:</p> <pre><code>import android.util.Log\n\nobject SwiftInterface {\n    init {\n        System.loadLibrary(\"MyFirstAndroidProject\")\n    }\n\n    external fun initialize(caller: Any)\n\n    external fun sendInt(number: Int)\n    external fun sendIntArray(array: IntArray)\n    external fun sendString(string: String)\n    external fun sendDate(date: Date)\n    external fun ping(): String\n    external fun fetchAsyncData(): String\n}\n</code></pre>"},{"location":"lib/kotlin-project/#gradle-files","title":"Gradle Files","text":"<p>Swift Stream IDE automatically manages your Gradle project files. It generates Java packages based on your Swift targets from <code>Package.swift</code> and keeps all the Gradle files in sync.</p> <p>In <code>Library/settings.gradle.kts</code>, it manages the list of included targets within special comment tags:</p> <pre><code>// managed by swiftstreamide: includes-begin\ninclude(\":myfirstandroidproject\")\n// managed by swiftstreamide: includes-end\n</code></pre> <p>It reflects the list of library products declared in your <code>Package.swift</code>.</p> <p>In each <code>Library/&lt;target&gt;/build.gradle.kts</code> file, it manages dependencies based on the imports in your Swift code and the Swift version you're using:</p> <pre><code>// managed by swiftstreamide: so-dependencies-begin\nimplementation(\"com.github.swifdroid.runtime-libs:core:6.2.0\")\nimplementation(\"com.github.swifdroid.runtime-libs:foundation:6.2.0\")\nimplementation(\"com.github.swifdroid.runtime-libs:foundationessentials:6.2.0\")\nimplementation(\"com.github.swifdroid.runtime-libs:i18n:6.2.0\")\n// managed by swiftstreamide: so-dependencies-end\n</code></pre> <p>It works this way because <code>soMode</code> setting is set to <code>Packed</code> by default. Read</p> <p>If you need more control, you can take over manually, still without the hassle of manual file copying.</p> <p>Read more about \u2192 so-mode and how to customize it.</p>"},{"location":"lib/kotlin-project/#assemble-with-gradle","title":"Assemble with Gradle","text":"<p>To build the distributable Android library files (<code>.aar</code>), just hit <code>Java Library Project -&gt; Assemble</code> in the Swift Stream sidebar.</p> <p></p> <p>This command runs either <code>gradlew assembleDebug</code> or <code>gradlew assembleRelease</code> in the background, packaging everything up for distribution.</p>"},{"location":"lib/kotlin-project/#getting-the-aar-file","title":"Getting the .AAR File","text":"<p>Now, grab your freshly built library file! You'll find the <code>.aar</code> file in your Swift Stream project at this path:</p> <pre><code>\ud83d\udce6 Project Root\n\u251c\u2500\u2500 \ud83d\udcc4 Package.swift\n\u2514\u2500\u2500 \ud83d\udcc2 Library\n    \u2514\u2500\u2500 \ud83d\udcc2 myfirstandroidproject\n        \u2514\u2500\u2500 \ud83d\udcc2 build\n            \u2514\u2500\u2500 \ud83d\udcc2 outputs\n                \u2514\u2500\u2500 \ud83d\udcc2 aar\n                    \u2514\u2500\u2500 \ud83d\udcc4 myfirstandroidproject-debug.aar\n</code></pre> <p>Copy this file. Then, in your Android Studio project, navigate to your app module's directory (e.g., <code>app/</code>) and create a folder named <code>libs</code> right next to the <code>build.gradle.kts</code> file. Paste the <code>.aar</code> file into this new <code>libs</code> folder.</p>"},{"location":"lib/structure/","title":"Library Project Structure","text":"<p>At its heart, the project integrates both Swift Package Manager (SPM) for Swift code and Gradle for Android library code.</p> <pre><code>\ud83d\udce6 Project Root\n\u251c\u2500\u2500 \ud83d\udcc4 Package.swift              # Swift package configuration\n\u251c\u2500\u2500 \ud83d\udcc2 Sources\n\u2502   \u2514\u2500\u2500 \ud83d\udcc2 &lt;target_name&gt;\n\u2502       \u2514\u2500\u2500 \ud83d\udcc4 Library.swift      # Core Swift library source\n\u251c\u2500\u2500 \ud83d\udcc2 Library\n\u2502   \u251c\u2500\u2500 \ud83d\udcc4 settings.gradle.kts    # Android project settings\n\u2502   \u251c\u2500\u2500 \ud83d\udcc4 build.gradle.kts       # Root Android build configuration\n\u2502   \u2514\u2500\u2500 \ud83d\udcc2 &lt;target_name&gt;\n\u2502       \u251c\u2500\u2500 \ud83d\udcc4 build.gradle.kts   # Android module build configuration\n\u2502       \u2514\u2500\u2500 \ud83d\udcc2 src\n\u2502           \u2514\u2500\u2500 \ud83d\udcc2 main\n\u2502               \u251c\u2500\u2500 \ud83d\udcc2 java       # Java/Kotlin source files\n\u2502               \u2514\u2500\u2500 \ud83d\udcc2 jniLibs    # Native libraries for JNI\n\u251c\u2500\u2500 \ud83d\udcc2 .devcontainer\n\u2502   \u2514\u2500\u2500 \ud83d\udcc4 devcontainer.json      # Development container configuration\n\u251c\u2500\u2500 \ud83d\udcc2 .sourcekit-lsp\n\u2502   \u2514\u2500\u2500 \ud83d\udcc4 config.json            # SourceKit-LSP server configuration\n\u2514\u2500\u2500 \ud83d\udcc2 .vscode\n    \u2514\u2500\u2500 \ud83d\udcc4 android-stream.json    # VS Code Android development settings\n</code></pre>"},{"location":"lib/structure/#packageswift","title":"Package.swift","text":"<p>In the root of your project, you have the <code>Package.swift</code> file. This is where you define your Swift package, including its name, platforms, products, dependencies, and targets.</p> <p>The key dependency is <code>JNIKit</code>.</p> <p>Optional dependencies include <code>AndroidLogging</code> and <code>swift-log</code>, which provide logging support for your project.</p>"},{"location":"lib/structure/#sources","title":"Sources","text":"<p>Your Swift source code files are located in the <code>Sources/&lt;target_name&gt;/</code> directory. This is where you implement the functionality of your Swift package.</p> <p>By default target name is the same as your project name, but you can change it in <code>Package.swift</code>.</p> <p>Your Swift code lives in <code>Sources/&lt;target_name&gt;/Library.swift</code> by default.</p>"},{"location":"lib/structure/#library","title":"Library","text":"<p>The Android library (a Gradle project) folder.</p> <p>This folder will be automatically generated after your first Swift build. Alternatively, you can create it manually from the Swift Stream sidebar panel.</p> <p>Its <code>settings.gradle.kts</code> and <code>build.gradle.kts</code> files are partially managed by Swift Stream IDE.</p>"},{"location":"lib/structure/#devcontainer","title":".devcontainer","text":"<p>Contains configuration for your development container.</p> <p><code>devcontainer.json</code> contains Swift, Gradle, SDK, and NDK versions used within the container. You can modify it to fit your needs.</p> <p>It is more convenient to change these settings via the Swift Stream IDE sidebar panel.</p>"},{"location":"lib/structure/#sourcekit-lsp","title":".sourcekit-lsp","text":"<p>Contains configuration for SourceKit-LSP, which provides Swift language support in the IDE. It is necessary for the correct code completion, error highlighting, and other language features.</p>"},{"location":"lib/structure/#vscode","title":".vscode","text":"<p>The most important file here is <code>android-stream.json</code>, which contains the Swift Stream IDE settings to build your project correctly.</p> <p>More about it \u2192 here</p>"},{"location":"lib/swift-project/","title":"Swift Project","text":""},{"location":"lib/swift-project/#configuration","title":"Configuration","text":"<p>All the settings are stored in the <code>.vscode/android-stream.json</code> file.</p>"},{"location":"lib/swift-project/#package-name","title":"Package Name","text":"<p>Defines the namespace for your Java/Kotlin library project.</p> <pre><code>\"packageName\": \"com.mydomain.superlib\"\n</code></pre>"},{"location":"lib/swift-project/#compile-sdk-version","title":"Compile SDK Version","text":"<p>Specifies the Android SDK version used to compile your project. It determines which APIs are available during compilation.</p> <pre><code>\"compileSDK\": 35\n</code></pre>"},{"location":"lib/swift-project/#minimum-sdk-version","title":"Minimum SDK Version","text":"<p>Defines the minimum Android SDK version required to run your library. It determines the range of devices that can use your library.</p> <pre><code>\"minSDK\": 28\n</code></pre>"},{"location":"lib/swift-project/#java-version","title":"Java Version","text":"<p>Sets the Java version used to compile your project.</p> <pre><code>\"javaVersion\": 11\n</code></pre>"},{"location":"lib/swift-project/#swift-compiler-arguments","title":"Swift Compiler Arguments","text":"<p>You can pass additional arguments to the Swift compiler using the <code>swiftArgs</code> property in each scheme. This allows fine-grained control over the build process.</p> <pre><code>\"schemes\": [\n    {\n        \"title\": \"Debug\",\n        \"swiftArgs\": []\n    }\n]\n</code></pre>"},{"location":"lib/swift-project/#so-mode","title":"So Mode","text":"<p>This setting controls how the required <code>.so</code> (shared library) files are included in your Android library project.</p> <p>There are three modes available, let's look at each in detail.</p>"},{"location":"lib/swift-project/#packed","title":"Packed","text":"<p>This is the default setting.</p> <pre><code>\"soMode\": \"Packed\"\n</code></pre> <p>This mode analyzes your compiled <code>.so</code> target file to identify all linked libraries. It automatically determines which \u2192 runtime-libs modules provide the required <code>.so</code> dependencies, and then adds the corresponding entries to your <code>build.gradle.kts</code> file.</p> <p>These dependencies are hosted in the SwifDroid \u2192 runtime-libs JitPack repository, which is maintained for each supported Swift version.</p> <p>This mode keeps your library lightweight, as all required libraries are added as Gradle dependencies rather than copied into your project.</p>"},{"location":"lib/swift-project/#pickedautomatically","title":"PickedAutomatically","text":"<pre><code>\"soMode\": \"PickedAutomatically\"\n</code></pre> <p>This mode performs the same dependency scan as <code>Packed</code>, but instead of adding Gradle dependencies, it copies the required <code>.so</code> files directly into your project\u2019s <code>Library/&lt;target&gt;/src/main/jniLibs/&lt;architecture&gt;/</code> folders.</p> <p>Use this mode if you prefer to avoid adding external dependencies to your Gradle project.</p>"},{"location":"lib/swift-project/#pickedmanually","title":"PickedManually","text":"<p>This mode gives you full control over which .so files are included. You can explicitly specify the exact files needed for your library.</p> <p>You can define them globally:</p> <pre><code>\"soMode\": \"PickedManually\",\n\"soFiles\": [\n    \"libBlocksRuntime.so\",\n    \"$sdk/libswiftCore.so\",\n    \"$ndk/libc++_shared.so\",\n    \"$project/localLibs/$arch/libSomeThirdParty.so\"\n]\n</code></pre> <p>Or in each scheme separately.</p> <p>Read about <code>$sdk</code>, <code>$ndk</code>, <code>$project</code> prefixes, and <code>$arch</code> variable in \u2192 fine tuning section.</p> <p>You also can setup each scheme separately:</p> <pre><code>\"soMode\": \"PickedManually\",\n\"schemes\": [\n    {\n        \"title\": \"Debug\",\n        \"soFiles\": [\n            \"libBlocksRuntime.so\",\n            \"$sdk/libswiftCore.so\",\n            \"$ndk/libc++_shared.so\",\n            \"$project/hoho/$arch/trololo.so\"\n        ]\n    }\n]\n</code></pre> <p>You can also exclude certain <code>.so</code> files from a specific scheme:</p> <pre><code>\"soMode\": \"PickedManually\",\n\"soFiles\": [\n    \"libBlocksRuntime.so\",\n    \"libswiftCore.so\"\n],\n\"schemes\": [\n    {\n        \"title\": \"Debug\",\n        \"excludeSoFiles\": [\n            \"libBlocksRuntime.so\"\n        ]\n    },\n    {\n        \"title\": \"Release\",\n        \"excludeSoFiles\": [\n            \"libswiftCore.so\"\n        ]\n    }\n]\n</code></pre> <p>In the example above <code>libBlocksRuntime.so</code> will be excluded from <code>Debug</code> scheme, while <code>libswiftCore.so</code> will be excluded from <code>Release</code> scheme (don\u2019t actually do this, it\u2019s just an example).</p>"},{"location":"lib/swift-project/#local-so-files","title":"Local .so files","text":"<p>Sometimes you may need to include .so libraries from a third-party SDK that isn\u2019t available via Maven.</p> <p>To do so, place your <code>.so</code> files somewhere within your project, for example, in a <code>localLibs</code> folder at the same level as your <code>Package.swift</code>.</p> <p>You must provide <code>.so</code> files for each architecture you intend to support:</p> <pre><code>\ud83d\udce6 Project Root\n\u251c\u2500\u2500 \ud83d\udcc4 Package.swift                 # Swift package configuration\n\u2514\u2500\u2500 \ud83d\udcc2 localLibs\n    \u251c\u2500\u2500 \ud83d\udcc2 arm64-v8a\n    \u2502   \u2514\u2500\u2500 \ud83d\udcc4 libSomeThirdParty.so  # ARM 64-bit native library\n    \u251c\u2500\u2500 \ud83d\udcc2 armeabi-v7a\n    \u2502   \u2514\u2500\u2500 \ud83d\udcc4 libSomeThirdParty.so  # ARM 32-bit native library\n    \u2514\u2500\u2500 \ud83d\udcc2 x86_64\n        \u2514\u2500\u2500 \ud83d\udcc4 libSomeThirdParty.so  # x86_64 native library\n</code></pre> <p>Then reference them in the configuration file :</p> <pre><code>\"soFiles\": [\n    \"$project/localLibs/$arch/libSomeThirdParty.so\"\n]\n</code></pre>"},{"location":"lib/swift-project/#prefixes-and-variables","title":"Prefixes and Variables","text":"<p>Here\u2019s how <code>.so</code> file prefixes and variables work:</p> <pre><code>\"soFiles\": [\n    \"libBlocksRuntime.so\",\n    \"$sdk/libswiftCore.so\",\n    \"$ndk/libc++_shared.so\",\n    \"$project/localLibs/$arch/libSomeThirdParty.so\",\n    \"/some/absolute/path/to/file.so\"\n]\n</code></pre> <p>No prefix (e.g. libBlocksRuntime.so) Swift Stream IDE will search first in the SDK folder, then in the NDK folder.</p> <p><code>$sdk</code> \u2014 explicitly points to the Swift Android SDK folder only.</p> <p><code>$ndk</code> \u2014 explicitly points to the NDK folder only.</p> <p><code>$project</code> \u2014 resolves paths relative to the root of your Swift project (where <code>Package.swift</code> is located).</p> <p><code>$arch</code> \u2014 dynamically resolves to the current architecture (<code>arm64-v8a</code>, <code>armeabi-v7a</code>, <code>x86_64</code>).</p> <p>Absolute paths are supported as well, just make sure they are valid within your Docker container environment (e.g. pointing to a shared volume).</p>"},{"location":"lib/swift-project/#building","title":"Building","text":"<p>Alright, time to build!</p> <p>Switch to the <code>Swift Stream</code> tab on the left sidebar and hit <code>Project -&gt; Build</code>.</p> <p></p> <p>You'll be prompted to choose a <code>Debug</code> or <code>Release</code> scheme. </p> <p>Let's go with <code>Debug</code>. The building process will begin.</p> <p>In Swift Stream, you can choose the <code>Log Level</code> to control how much detail you see:</p> <ul> <li>Normal</li> <li>Detailed (This is the default)</li> <li>Verbose</li> <li>Unbearable (For when you really need to see everything)</li> </ul> <p>With the default Detailed level, you'll see an output similar to this during the build:</p> <pre><code>\ud83c\udfd7\ufe0f Started building debug\n\ud83d\udc81\u200d\u2642\ufe0f it will try to build each phase\n\ud83d\udd26 Resolving Swift dependencies for native\n\ud83d\udd26 Resolved in 772ms\n\ud83d\udd26 Resolving Swift dependencies for droid\n\ud83d\udd26 Resolved in 2s918ms\n\ud83e\uddf1 Building `MyFirstAndroidProject` swift target for arm64-v8a\n\ud83e\uddf1 Built `MyFirstAndroidProject` swift target for `.droid` in 10s184ms\n\ud83e\uddf1 Building `MyFirstAndroidProject` swift target for armeabi-v7a\n\ud83e\uddf1 Built `MyFirstAndroidProject` swift target for `.droid` in 7s202ms\n\ud83e\uddf1 Building `MyFirstAndroidProject` swift target for x86_64\n\ud83e\uddf1 Built `MyFirstAndroidProject` swift target for `.droid` in 7s135ms\n\ud83e\uddf1 Preparing gradle wrapper\n\ud83e\uddf1 Prepared gradle wrapper in 1m50s\n\u2705 Build Succeeded in 2m20s\n</code></pre> <p>As you can see, the initial Swift compilation itself was pretty fast, about ~30 seconds total for all three architecture targets (arm64-v8a, armeabi-v7a, and x86_64). The bulk of the time (1m50s) was spent on the initial <code>gradle wrapper</code> setup, which is a one-time cost.</p> <p>The great news is that subsequent builds will be super fast, taking only about 3 seconds for all three targets! This is because everything gets cached.</p> <p>This build command also automatically generates the Java Library Gradle project for you. It's now ready to use in the <code>Library</code> folder.</p> <p>Now continue to \u2192 Kotlin Library Project</p>"},{"location":"lib/code/class-loader/","title":"Class Loader and Cache","text":"<p>Here's a common gotcha: by default, when you try to find a Java class via JNI, it uses a system class loader. This system loader (surprise, surprise!) can't see dynamically loaded classes from your app, meaning it misses your own classes and any Gradle dependencies.</p> <p>The solution? We need to get the application's class loader, which is available from any Java object via <code>.getClass().getClassLoader()</code>. The best practice is to grab this class loader once during initialization, create a global reference to it, store it in JNIKit's cache, and use it everywhere. It remains valid for the entire app lifecycle.</p> <p>Here\u2019s how to cache it inside your \u2192 entry point method:</p> <pre><code>// Access current environment\nlet localEnv = JEnv(envPointer)\n\n// Convert caller's local ref into global ref\nlet callerBox = callerRef.box(localEnv)\n\n// Defer block to clean up local references\ndefer {\n    // Release local ref to caller object\n    localEnv.deleteLocalRef(callerRef)\n}\n\n// Initialize `JObject` from boxed global reference to the caller object\nguard let callerObject = callerBox?.object() else { return }\n\n// Cache the class loader from the caller object\n// it is important to load non-system classes later\n// e.g. your own Java/Kotlin classes\nif let classLoader = callerObject.getClassLoader(localEnv) {\n    JNICache.shared.setClassLoader(classLoader)\n    logger.info(\"\ud83d\ude80 class loader cached successfully\")\n}\n</code></pre> <p>You should use <code>thizRef</code> instead of <code>callerRef</code> if your native method was an instance method.</p> <p>The <code>getClassLoader</code> method retrieves the class loader associated with that object, and <code>JNICache.shared.setClassLoader</code> caches it for future use.</p> <p>So later, when you will call <code>JClass.load(...)</code> it will use the right class loader from the cache.</p>"},{"location":"lib/code/development-loop/","title":"Development Loop","text":"<p>In order to test your coode in the real Android project please consider \u2192 importing this Library project as a module into your Android app project.</p> <p>The Loop</p> <ol> <li>Make changes to your Swift code</li> <li>Hit <code>Swift Project</code> -&gt; <code>Build</code></li> <li>Hit <code>Java Library Project -&gt; Assemble</code></li> <li>Run your Android app project</li> <li>Repeat</li> </ol> <p>With Standalone AAR</p> <ol> <li>Make changes to your Swift code</li> <li>Hit <code>Swift Project</code> -&gt; <code>Build</code></li> <li>Hit <code>Java Library Project -&gt; Assemble</code></li> <li>Copy the new <code>.aar</code> file from the <code>outputs/aar</code> folder into your Android project's <code>app/libs</code> folder, replacing the old one.</li> <li>Run your Android app project</li> <li>Repeat</li> </ol>"},{"location":"lib/code/entry-point/","title":"Entry Point","text":"<p>Everything starts with an <code>initialize</code> method. This method is exposed to the Java/Kotlin side and must be called before any other native methods.</p>"},{"location":"lib/code/entry-point/#on-the-swift-side","title":"On the Swift Side","text":"<p>The following code shows how to use <code>@_cdecl</code> to expose this method for JNI.</p> <p>The <code>@_cdecl</code> naming convention is critical, as it follows the JNI pattern:</p> <pre><code>Java_&lt;package&gt;_&lt;class&gt;_&lt;method&gt;\n</code></pre> <ul> <li><code>package</code> is the fully qualified package name with underscores instead of dots</li> <li><code>class</code> is the class name</li> <li><code>method</code> is the method name</li> </ul> <p>The method's arguments also follow JNI convention. The first two are required and are passed automatically by the JNI:</p> <ol> <li><code>envPointer</code>: This never changes. It's a pointer to the JNI environment, your main interface for interacting with the JVM.</li> <li><code>clazzRef</code> or <code>thizRef</code>: You get <code>clazzRef</code> if the Java method is static (like in our case, where the method is inside a Kotlin <code>object</code>). You get <code>thizRef</code> if it's an instance method. The first is a pointer to a class; the second is a pointer to an instance.</li> </ol> <p>Any arguments after these represent the parameters of the Java/Kotlin method itself. In our case, the method has one extra argument: a <code>caller</code> object.</p> <p>We pass this from the app to provide Swift with the necessary context, such as the class loader or application context.</p> <p>This <code>caller</code> instance is necessary to cache the app's class loader, which is required for JNI interop to dynamically resolve and load Java classes from Swift code.</p> <p>Note</p> <p>If we had <code>thizRef</code> instead of <code>clazzRef</code>, we might not need to pass this extra <code>caller</code> object.</p> <pre><code>#if os(Android)\n// Official Swift bindings for Android NDK\nimport Android\n// JNI Kit with a lot of conveniences\nimport JNIKit\n\n@_cdecl(\"Java_com_mydomain_superlib_myfirstandroidproject_SwiftInterface_initialize\")\npublic func initialize(\n    envPointer: UnsafeMutablePointer&lt;JNIEnv?&gt;,\n    clazzRef: jobject,\n    callerRef: jobject\n) {\n    // ALSO: Activate Android logger\n    // Initialize JVM\n    let jvm = envPointer.jvm()\n    JNIKit.shared.initialize(with: jvm)\n    // ALSO: Activate class loader cache\n}\n#endif\n</code></pre> <p>Learn more about \u2192 logging and \u2192 class loader.</p> <p>The method body shows we first bootstrap the Swift logging system with the Android logger (this only needs to be done once).</p> <p>After that, we can use the logger anywhere, simply like this:</p> <pre><code>let logger = Logger(label: \"\ud83d\udc26\u200d\ud83d\udd25 SWIFT\")\nlogger.info(\"\ud83d\ude80 Hello World!\")\n</code></pre> <p>Then, we initialize the connection to the JVM.</p>"},{"location":"lib/code/entry-point/#on-the-other-side","title":"On the Other Side","text":""},{"location":"lib/code/entry-point/#java","title":"Java","text":"<pre><code>public final class SwiftInterface {\n    static {\n        System.loadLibrary(\"MyFirstAndroidProject\");\n    }\n    private SwiftInterface() {}\n    public static native void initialize(Object caller);\n}\n</code></pre>"},{"location":"lib/code/entry-point/#kotlin","title":"Kotlin","text":"<pre><code>object SwiftInterface {\n    init {\n        System.loadLibrary(\"MyFirstAndroidProject\")\n    }\n    external fun initialize(caller: Any)\n}\n</code></pre> <p>Now, from your Android app, just call:</p> <pre><code>SwiftInterface.initialize(this)\n</code></pre> <p>where <code>this</code> is an instance of an Activity, Fragment, or Application class.</p> <p>And we're done! Your Swift library is now initialized and ready to use.</p>"},{"location":"lib/code/logging/","title":"Logging","text":"<p>You have two options: <code>swift-log</code> for full LogCat experience or classic <code>print</code>.</p>"},{"location":"lib/code/logging/#using-swift-log","title":"Using <code>swift-log</code>","text":"<p>Add the following dependencies to your <code>Package.swift</code>:</p> <pre><code>.package(url: \"https://github.com/swifdroid/AndroidLogging.git\", from: \"0.1.0\"),\n.package(url: \"https://github.com/apple/swift-log.git\", from: \"1.6.2\"),\n// target\n.product(name: \"Logging\", package: \"swift-log\"),\n.product(name: \"AndroidLogging\", package: \"AndroidLogging\", condition: .when(platforms: [.android])),\n</code></pre> <p>Import the necessary modules at the top of your Swift file:</p> <pre><code>#if os(Android)\n// Official Swift bindings for Android NDK\nimport Android\n// Specific logging handler for Android platform\nimport AndroidLogging\n#endif\n// Lightweight and fast logging system\nimport Logging\n</code></pre> <p>Add the following code to your library's entry point (e.g., in the <code>initialize</code> function):</p> <pre><code>// Activate logger\nLoggingSystem.bootstrap(AndroidLogHandler.taggedBySource)\n</code></pre> <p>This will let you use the <code>swift-log</code> API to log messages, which will be directed to LogCat.</p> <pre><code>let logger = Logger(label: \"\ud83d\udc26\u200d\ud83d\udd25 SWIFT\")\nlogger.info(\"\ud83d\ude80 Hello World!\")\n</code></pre>"},{"location":"lib/code/logging/#using-print","title":"Using <code>print</code>","text":"<p>Built-in <code>print</code> function doesn't work out of the box on Android. To use it, you have to adopt <code>PrintRedirector</code>. </p> <p>Info</p> <p>It was originally made by Sergey Romanenko \u2192 here</p> <p>It is the part of <code>Droid</code> package which is for Android GUI applications, but not a part of <code>JNIKit</code> library, so you have to copy this code into your library project manually.</p> <p>Once you \u2192 copied it from the <code>Droid</code> package add the following code to your library's entry point (e.g., in the <code>initialize</code> function):</p> <pre><code>// Enable `print` redirect into LogCat\n#if os(Android)\ntry? PrintRedirector.shared.redirectPrint()\n#endif\n</code></pre> <p>And then feel free to use <code>print</code> anywhere in your code:</p> <pre><code>print(\"Hello from Swift for Android!\")\n</code></pre> <p>Note</p> <p>It will always print to LogCat with the <code>Swift</code> tag and the <code>INFO</code> log level.</p>"},{"location":"lib/code/examples/async-await/","title":"Executing Async/Await Swift Code from Kotlin","text":""},{"location":"lib/code/examples/async-await/#with-callback","title":"With Callback","text":"<p>This is the recommended way to call async Swift code from Kotlin.</p> <p>Declare the method with a callback in <code>SwiftInterface.kt</code>:</p> <pre><code>interface FetchCallback {\n    fun onResult(result: String)\n}\nexternal fun fetchAsyncDataWithCallback(callback: FetchCallback)\n</code></pre> <p>On the Swift side, implement it:</p> <pre><code>#if os(Android)\n@_cdecl(\"Java_to_dev_myandroidlib_myfirstandroidproject_SwiftInterface_fetchAsyncDataWithCallback\")\npublic func fetchAsyncDataWithCallback(env: UnsafeMutablePointer&lt;JNIEnv?&gt;, obj: jobject, callback: jobject) {\n    let env = JEnv(env)\n    defer { env.deleteLocalRef(callback) }\n    guard let object = callback.box(env)?.object() else { return }\n    Task {\n        // Simulate async operation\n        try? await Task.sleep(nanoseconds: 5_000_000_000) // 5 seconds\n        // Call callback.onResult method\n        object.callVoidMethod(name: \"onResult\", args: \"Async data fetched successfully!\")\n    }\n}\n#endif\n</code></pre> <p>Call it from your Java/Kotlin app:</p> <pre><code>SwiftInterface.fetchAsyncDataWithCallback(object : SwiftInterface.FetchCallback {\n    override fun onResult(result: String) {\n        Log.i(\"ASYNC\", \"fetchAsyncDataWithCallback result: $result\")\n    }\n})\n</code></pre> <p>Check LogCat:</p> <pre><code> I  fetchAsyncDataWithCallback result: Async data fetched successfully!\n</code></pre>"},{"location":"lib/code/examples/async-await/#with-semaphore","title":"With Semaphore","text":"<p>This way is not recommended. Make sure to call this method off the main thread to avoid deadlocks.</p> <p>Declare the method in <code>SwiftInterface.kt</code>:</p> <pre><code>external fun fetchAsyncData(): String\n</code></pre> <p>You need to know that the <code>@_cdecl</code> attribute doesn't work with the async operator. That's why we're using a <code>semaphore</code> here to execute our Swift code in a way that feels asynchronous. This approach is totally fine, but only for <code>non-UI</code> code. If you try this on the main thread, you'll face a complete and total deadlock, so just don't do it. I'll show you how to deal with UI in the next articles.</p> <pre><code>#if os(Android)\n@_cdecl(\"Java_to_dev_myandroidlib_myfirstandroidproject_SwiftInterface_fetchAsyncData\")\npublic func fetchAsyncData(env: UnsafeMutablePointer&lt;JNIEnv&gt;, obj: jobject) -&gt; jstring? {\n    // Create semaphore to wait for async task\n    let semaphore = DispatchSemaphore(value: 0)\n    // Create result variable\n    final class AtomicResult: @unchecked Sendable {\n        var value: String? = nil\n    }\n    let atomicResult = AtomicResult()\n    // Start async task\n    Task { @Sendable in\n        // Simulate async operation\n        try? await Task.sleep(nanoseconds: 5_000_000_000) // 5 seconds\n        // Set result\n        atomicResult.value = \"Async data fetched successfully!\"\n        // Release semaphore\n        semaphore.signal()\n    }\n    // Wait for async task to complete by blocking current thread\n    semaphore.wait()\n    // Check if result is available\n    guard let result = atomicResult.value else { return nil }\n    // Wrap Swift string into `JSString` and return its JNI reference\n    return result.wrap().reference()\n}\n#endif\n</code></pre> <p>Call it from your Java/Kotlin app (off the main thread!):</p> <pre><code>CoroutineScope(Dispatchers.IO).launch {\n    Log.i(\"ASYNC\", \"Swift async call started\")\n    try {\n        val result = SwiftInterface.fetchAsyncData()\n        Log.i(\"ASYNC\", \"Swift returned: $result\")\n    } catch (e: Exception) {\n        // Handle error\n    }\n    Log.i(\"ASYNC\", \"Swift async call finished\")\n}\n</code></pre> <p>Check LogCat:</p> <pre><code> I  Swift async call started\n I  Swift returned: Async data fetched successfully!\n I  Swift async call finished\n</code></pre>"},{"location":"lib/code/examples/receiving-string/","title":"Receiving a String from Swift in Kotlin","text":"<p>Declare a method in <code>SwiftInterface.kt</code> that returns a value:</p> <pre><code>external fun ping(): String\n</code></pre> <p>On the Swift side, return a string:</p> <pre><code>#if os(Android)\n@_cdecl(\"Java_to_dev_myandroidlib_myfirstandroidproject_SwiftInterface_ping\")\npublic func ping(envPointer: UnsafeMutablePointer&lt;JNIEnv?&gt;, clazzRef: jobject) -&gt; jobject? {\n    // Wrap Swift string into `JSString` and return its JNI reference\n    return \"\ud83c\udfd3 Pong from Swift!\".wrap().reference()\n}\n#endif\n</code></pre> <p>Call it from your Java/Kotlin app:</p> <pre><code>Log.i(\"HELLO\", \"Pinging: ${SwiftInterface.ping()}\")\n</code></pre> <p>Check LogCat:</p> <pre><code> I  Pinging: \ud83c\udfd3 Pong from Swift!\n</code></pre>"},{"location":"lib/code/examples/sending-date/","title":"Sending a <code>Date</code> Object from Kotlin to Swift","text":"<p>Declare the method in <code>SwiftInterface.kt</code>:</p> <pre><code>external fun sendDate(date: Date)\n</code></pre> <p>On the Swift side:</p> <pre><code>#if os(Android)\n@_cdecl(\"Java_to_dev_myandroidlib_myfirstandroidproject_SwiftInterface_sendDate\")\npublic func sendDate(envPointer: UnsafeMutablePointer&lt;JNIEnv?&gt;, clazzRef: jobject, dateRef: jobject) {\n    // Create lightweight logger object\n    let logger = Logger(label: \"\ud83d\udc26\u200d\ud83d\udd25 SWIFT\")\n    // Access current environment\n    let localEnv = JEnv(envPointer)\n    // Defer block to clean up local references\n    defer {\n        // Release local ref to date object\n        localEnv.deleteLocalRef(dateRef)\n    }\n    // Wrap JNI date reference into `JObjectBox`\n    logger.info(\"\ud83d\udcc5 sendDate 1\")\n    guard let box = dateRef.box(localEnv) else {\n        logger.info(\"\ud83d\udcc5 sendDate 1.1 exit: unable to box Date object\")\n        return\n    }\n    // Initialize `JObject` from boxed global reference to the date\n    logger.info(\"\ud83d\udcc5 sendDate 2\")\n    guard let dateObject = box.object() else {\n        logger.info(\"\ud83d\udcc5 sendDate 2.1 exit: unable to unwrap Date object\")\n        return\n    }\n    // Call `getTime` method to get milliseconds since epoch\n    logger.info(\"\ud83d\udcc5 sendDate 3\")\n    guard let milliseconds = dateObject.callLongMethod(name: \"getTime\") else {\n        logger.info(\"\ud83d\udcc5 sendDate 3.1 exit: getTime returned nil, maybe wrong method\")\n        return\n    }\n    // Now you can use `milliseconds` as a regular Swift Int64 value\n    logger.info(\"\ud83d\udcc5 sendDate 4: \\(milliseconds)\")\n}\n#endif\n</code></pre> <p>Call it from your Java/Kotlin app:</p> <pre><code>SwiftInterface.sendDate(Date())\n</code></pre> <p>Check LogCat:</p> <pre><code> I  [\ud83d\udc26\u200d\ud83d\udd25 SWIFT] \ud83d\udcc5 sendDate 1\n I  [\ud83d\udc26\u200d\ud83d\udd25 SWIFT] \ud83d\udcc5 sendDate 2\n I  [\ud83d\udc26\u200d\ud83d\udd25 SWIFT] \ud83d\udcc5 sendDate 3\n I  [\ud83d\udc26\u200d\ud83d\udd25 SWIFT] \ud83d\udcc5 sendDate 4: 1757533833096\n</code></pre>"},{"location":"lib/code/examples/sending-int-array/","title":"Sending an <code>IntArray</code> from Kotlin to Swift","text":"<p>Declare the method in <code>SwiftInterface.kt</code>:</p> <pre><code>external fun sendIntArray(array: IntArray)\n</code></pre> <p>On the Swift side, handle the array:</p> <pre><code>#if os(Android)\n@_cdecl(\"Java_to_dev_myandroidlib_myfirstandroidproject_SwiftInterface_sendIntArray\")\npublic func sendIntArray(\n    envPointer: UnsafeMutablePointer&lt;JNIEnv?&gt;,\n    clazzRef: jobject,\n    arrayRef: jintArray\n) {\n    // Create lightweight logger object\n    let logger = Logger(label: \"\ud83d\udc26\u200d\ud83d\udd25 SWIFT\")\n    // Access current environment\n    let localEnv = JEnv(envPointer)\n    // Defer block to clean up local references\n    defer {\n        // Release local ref to array object\n        localEnv.deleteLocalRef(arrayRef)\n    }\n    // Get array length\n    logger.info(\"\ud83d\udd22 sendIntArray 1\")\n    let length = localEnv.getArrayLength(arrayRef)\n    logger.info(\"\ud83d\udd22 sendIntArray 2 length: \\(length)\")\n    // Get array elements\n    var swiftArray = [Int32](repeating: 0, count: Int(length))\n    localEnv.getIntArrayRegion(arrayRef, start: 0, length: length, buffer: &amp;swiftArray)\n    // Now you can use `swiftArray` as a regular Swift array\n    logger.info(\"\ud83d\udd22 sendIntArray 3 swiftArray: \\(swiftArray)\")\n}\n#endif\n</code></pre> <p>Call it from your Java/Kotlin app:</p> <pre><code>SwiftInterface.sendIntArray(intArrayOf(7, 6, 5))\n</code></pre> <p>Check LogCat:</p> <pre><code> I  [\ud83d\udc26\u200d\ud83d\udd25 SWIFT] \ud83d\udd22 sendIntArray: 1\n I  [\ud83d\udc26\u200d\ud83d\udd25 SWIFT] \ud83d\udd22 sendIntArray: 2 length: 3\n I  [\ud83d\udc26\u200d\ud83d\udd25 SWIFT] \ud83d\udd22 sendIntArray: 3 swiftArray: [7, 6, 5]\n</code></pre>"},{"location":"lib/code/examples/sending-int/","title":"Sending an <code>Int</code> from Kotlin to Swift","text":"<p>Declare a method in <code>SwiftInterface.kt</code>:</p> <pre><code>external fun sendInt(number: Int)\n</code></pre> <p>On the Swift side, implement it:</p> <pre><code>#if os(Android)\n@_cdecl(\"Java_to_dev_myandroidlib_myfirstandroidproject_SwiftInterface_sendInt\")\npublic func sendInt(\n    envPointer: UnsafeMutablePointer&lt;JNIEnv?&gt;,\n    clazzRef: jobject,\n    number: jint\n) {\n    let logger = Logger(label: \"\ud83d\udc26\u200d\ud83d\udd25 SWIFT\")\n    logger.info(\"#\ufe0f\u20e3 sendInt: \\(number)\")\n}\n#endif\n</code></pre> <p>Call it from your Java/Kotlin app:</p> <pre><code>SwiftInterface.sendInt(123)\n</code></pre> <p>Check LogCat:</p> <pre><code> I  [\ud83d\udc26\u200d\ud83d\udd25 SWIFT] #\ufe0f\u20e3 sendInt: 123\n</code></pre>"},{"location":"lib/code/examples/sending-string/","title":"Sending a <code>String</code> from Kotlin to Swift","text":"<p>Declare the method in <code>SwiftInterface.kt</code>:</p> <pre><code>external fun sendString(string: String)\n</code></pre> <p>On the Swift side:</p> <pre><code>#if os(Android)\n@_cdecl(\"Java_to_dev_myandroidlib_myfirstandroidproject_SwiftInterface_sendString\")\npublic func sendString(envPointer: UnsafeMutablePointer&lt;JNIEnv?&gt;, clazzRef: jobject, strRef: jobject) {\n    // Create lightweight logger object\n    let logger = Logger(label: \"\ud83d\udc26\u200d\ud83d\udd25 SWIFT\")\n    // Access current environment\n    let localEnv = JEnv(envPointer)\n    // Defer block to clean up local references\n    defer {\n        // Release local ref to string object\n        localEnv.deleteLocalRef(strRef)\n    }\n    // Wrap JNI string reference into `JString` and get Swift string\n    logger.info(\"\u270d\ufe0f sendString 1\")\n    guard let string = strRef.wrap().string() else {\n        logger.info(\"\u270d\ufe0f sendString 1.1 exit: unable to unwrap jstring\")\n        return\n    }\n    // Now you can use `string` as a regular Swift string\n    logger.info(\"\u270d\ufe0f sendString 2: \\(string)\")\n}\n#endif\n</code></pre> <p>Call it from your Java/Kotlin app:</p> <pre><code>SwiftInterface.sendString(\"With love from Java\")\n</code></pre> <p>Check LogCat:</p> <pre><code> I  [\ud83d\udc26\u200d\ud83d\udd25 SWIFT] \u270d\ufe0f sendString 1\n I  [\ud83d\udc26\u200d\ud83d\udd25 SWIFT] \u270d\ufe0f sendString 2: With love from Java\n</code></pre>"},{"location":"lib/code/examples/wrapping-class/","title":"Wrapping a Class","text":"<p>To use Java classes swiftly, we need wrappers.</p> <p>A wrapper is a Swift class that internally holds a reference to a Java object and exposes its methods and properties in a swiftly way.</p> <p>Learn more about it in JNIKit \u2192 wrapping java class</p>"},{"location":"lib/distribution/jitpack/","title":"JitPack Distribution","text":"<p>This guide explains how to distribute your Android library via JitPack, making it easy for others to include it as a Gradle dependency.</p> <p>JitPack is the easiest way to distribute your Android library. It builds your project directly from a public GitHub repository and hosts the artifacts for you.</p>"},{"location":"lib/distribution/jitpack/#publishing","title":"Publishing","text":""},{"location":"lib/distribution/jitpack/#project-configuration","title":"Project Configuration","text":"<p>Open your library project's <code>build.gradle.kts</code>.</p> <p>Add the <code>maven-publish</code> plugin at the top:</p> <pre><code>plugins {\n    id(\"com.android.library\")\n    id(\"maven-publish\")\n}\n</code></pre> <p>Configure the <code>release</code> build type to disable code minification:</p> <pre><code>android {\n\n    buildTypes {\n        release {\n            isMinifyEnabled = false\n        }\n    }\n\n}\n</code></pre> <p>Set up the publishing block to create a Maven publication for the <code>release</code> variant:</p> <pre><code>android {\n\n    publishing {\n        singleVariant(\"release\") {\n            withSourcesJar()\n        }\n    }\n}\n</code></pre> <p>Add the following publishing configuration at the bottom of the file:</p> <pre><code>publishing {\n    publications {\n        afterEvaluate {\n        val releaseComponent = components.findByName(\"release\")\n        if (releaseComponent != null) {\n            create&lt;MavenPublication&gt;(\"release\") {\n                from(releaseComponent)\n\n                // Replace with your GitHub username\n                groupId = \"com.github.username\"\n                // Replace with your repository name\n                artifactId = \"repository\"\n                // Replace with your release tag\n                version = \"1.0.0\"\n\n                pom {\n                    // Replace with your library details\n                    name.set(\"My Swift Android Library\")\n                    description.set(\"An Android library written in Swift.\")\n                    url.set(\"https://github.com/username/repository\")\n\n                    licenses {\n                        license {\n                            // Replace with your chosen license\n                            name.set(\"MIT License\")\n                            url.set(\"http://www.opensource.org/licenses/mit-license.php\")\n                        }\n                    }\n\n                    developers {\n                        developer {\n                            // Replace with your details\n                            id.set(\"imike\")\n                            name.set(\"Mikhail Isaev\")\n                            email.set(\"imike@swift.stream\")\n                        }\n                    }\n\n                    scm {\n                        // Replace with your repository\n                        connection.set(\"scm:git:https://github.com/username/repository.git\")\n                        developerConnection.set(\"scm:git:ssh://git@github.com/username/repository.git\")\n                        url.set(\"https://github.com/username/repository\")\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"lib/distribution/jitpack/#push-to-github","title":"Push to GitHub","text":"<p>JitPack builds your project directly from a public GitHub repository. Make sure to push all your changes to GitHub.</p>"},{"location":"lib/distribution/jitpack/#tag-a-release","title":"Tag a Release","text":"<p>JitPack uses Git tags to identify versions of your library. </p> <p>Tag your last commit with a version number e.g. <code>1.0.0</code>.</p> <pre><code>git tag v1.0.0\ngit push origin v1.0.0\n</code></pre>"},{"location":"lib/distribution/jitpack/#checking-the-release","title":"Checking the Release","text":"<p>Go to JitPack.io, enter your repository URL, and click \"Look up\".</p> <p>Find your tagged release in the list, the log icon should be green.</p> <p>If it is red, click on it to see the build logs and fix any issues. Then, re-tag and push again.</p> <p>If it is green, click on \"Get it\" to see the dependency instructions.</p>"},{"location":"lib/distribution/jitpack/#using-the-library","title":"Using the Library","text":""},{"location":"lib/distribution/jitpack/#add-jitpack","title":"Add JitPack","text":"<p>In your Android project's <code>settings.gradle.kts</code>, add JitPack as a repository:</p> <pre><code>dependencyResolutionManagement {\n    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\n    repositories {\n        google()\n        maven { url = uri(\"https://jitpack.io\") }\n        mavenCentral()\n    }\n}\n</code></pre>"},{"location":"lib/distribution/jitpack/#add-dependency","title":"Add Dependency","text":"<p>In your app module's <code>build.gradle.kts</code> file (<code>app/build.gradle.kts</code>), add the dependency for your library:</p> <pre><code>dependencies {\n    implementation(\"com.github.username:repository:tag\")\n}\n</code></pre> <p>Replace <code>username</code>, <code>repository</code>, and <code>tag</code> with your GitHub username, repository name, and the release tag you created.</p> <p>If your GitHub username is <code>myuser</code>, your repository is <code>myrepo</code>, and your release tag is <code>v1.0.0</code>, your dependency would look like this:</p> <pre><code>dependencies {\n    implementation(\"com.github.myuser:myrepo:v1.0.0\")\n}\n</code></pre> <p>Sync Gradle, and you should be able to use your Swift-based Android library in your project!</p>"},{"location":"lib/distribution/library-import/","title":"Library Import","text":"<p>If your end users have the project source code, or you simply want to test your library right away during development.</p> <p>This method is intended for development and testing purposes. For production use, consider distributing your library via JitPack or as a standalone AAR file.</p> <p>Include your Library project directly into Android project, without needing to build an <code>.aar</code> file.</p> <p>In the <code>settings.gradle.kts</code> of your Android project, at the very bottom:</p> <pre><code>include(\":myandroidlibrary\")\nproject(\":myandroidlibrary\").projectDir = file(\"../Library/myandroidlibrary\")\n</code></pre> <p>Ensure the path points to the correct location of your Library project.</p> <p>This will include your Library project as a module.</p> <p>In your app module's <code>build.gradle.kts</code> file (<code>app/build.gradle.kts</code>), add a dependency on the library module:</p> <pre><code>dependencies {\n    implementation(project(\":myandroidlibrary\"))\n}\n</code></pre> <p>Sync Gradle project, and you can now use the library's classes and functions directly in your Android app code.</p>"},{"location":"lib/distribution/standalone-aar/","title":"Standalone AAR Integration","text":"<p>Once you have built your Android library <code>.aar</code> file, you can integrate it into your Android project using only the AAR file and the correct configuration.</p> <p>This approach can be challenging for end users, as they must manually place the AAR file and add the required dependencies.</p> <p>Open your existing Android project or create a new one in Android Studio.</p> <p>Once your project is open, the first step is to add the JitPack repository. Navigate to your <code>settings.gradle.kts</code> file and ensure it includes the JitPack repository:</p> <pre><code>dependencyResolutionManagement {\n    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\n    repositories {\n        google()\n        maven { url = uri(\"https://jitpack.io\") }\n        mavenCentral()\n    }\n}\n</code></pre> <p>You must add JitPack repository if you used <code>soMode</code> set to <code>Packed</code> \u2192 learn more</p> <p>Next, add the dependencies to your app module's <code>build.gradle.kts</code> file (<code>app/build.gradle.kts</code>). Ensure you include both the <code>.aar</code> file and all the required runtime libraries:</p> <pre><code>dependencies {\n    implementation(files(\"libs/myfirstandroidproject-debug.aar\"))\n    implementation(\"com.github.swifdroid.runtime-libs:core:6.2.0\")\n    implementation(\"com.github.swifdroid.runtime-libs:foundation:6.2.0\")\n    implementation(\"com.github.swifdroid.runtime-libs:i18n:6.2.0\")\n    // the rest of dependencies\n}\n</code></pre> <p>You must manually specify the <code>runtime-libs</code> dependencies when using <code>soMode</code> set to <code>Packed</code>, as Android cannot automatically detect them from within the <code>.aar</code> file.</p>"},{"location":"setup/","title":"Setup","text":"<p>You are on your way of writing real native Swift code for Android. It's going to be an interesting journey, so grab a cup of tea and let's begin.</p>"},{"location":"setup/#what-youll-need","title":"What You'll Need:","text":"<ol> <li>Docker</li> <li>VSCode with Dev Containers extension</li> <li>The Swift Stream IDE extension for VSCode</li> </ol> <p>Yeah yeah, that's easy, right?</p> <p>Your operating system doesn't matter as long as it can run Docker and VSCode.</p> <p>Anyway, detailed instructions for each OS:</p> <p>\u2192 macOS Setup \u2192 Linux Setup \u2192 Windows Setup</p> <p>Once you have everything set up, head to the \u2192 Application Getting Started guide to create your first SwifDroid project!</p>"},{"location":"setup/linux/","title":"Setup on Linux","text":""},{"location":"setup/linux/#docker","title":"Docker","text":"<p>Install Docker Desktop for Linux by following the instructions from here.</p> <p>Arch users knows what to do even without any instructions.</p>"},{"location":"setup/linux/#vscode","title":"VSCode","text":"<p>Download and install Visual Studio Code from here or via your package manager.</p> <p>If your VSCode installation is sandboxed (i.e. via flatpak), you'll need to uninstall and download directly from the official website. Otherwise, Dev Containers won't have access to Docker.</p> <p>Once installed, open VSCode and head to extensions tab (Ctrl+Shift+X) to install the following extensions:</p> <p>Dev Containers</p> <p></p> <p>When you try to create your first project, the Dev Containers extension may ask to download additional Docker components, even though Docker is already installed. Allow it to do so.</p> <p>Swift Stream IDE</p> <p></p> <p>Aaaaaand... you are all set!</p> <p>Now check out our \u2192 Application and \u2192 Library guides.</p>"},{"location":"setup/macos/","title":"Setup on macOS","text":""},{"location":"setup/macos/#docker","title":"Docker","text":"<p>Install Docker Desktop for Mac by following the instructions from here.</p> <p>Docker Desktop is supported on the current and two previous major macOS releases. As new major versions of macOS are made generally available, Docker stops supporting the oldest version and supports the newest version of macOS (in addition to the previous two releases).</p>"},{"location":"setup/macos/#vscode","title":"VSCode","text":"<p>Download and install Visual Studio Code from here.</p> <p>Once installed, open VSCode and head to extensions tab (\u21e7\u2318X) to install the following extensions:</p> <p>Dev Containers</p> <p></p> <p>When you try to create your first project, the Dev Containers extension may ask to download additional Docker components, even though Docker is already installed. Allow it to do so.</p> <p>Swift Stream IDE</p> <p></p> <p>Aaaaaand... you are all set!</p> <p>Now check out our \u2192 Application and \u2192 Library guides.</p>"},{"location":"setup/windows/","title":"Setup on Windows","text":""},{"location":"setup/windows/#docker","title":"Docker","text":"<p>Install Docker for Windows by following the instructions from here.</p> <p>Choose the WSL 2 backend when prompted during installation.</p>"},{"location":"setup/windows/#vscode","title":"VSCode","text":"<p>Download and install Visual Studio Code from here.</p> <p>Once installed, open VSCode and head to extensions tab (Ctrl+Shift+X) to install the following extensions:</p> <p>Dev Containers</p> <p></p> <p>When you try to create your first project, the Dev Containers extension may ask to download additional Docker components, even though Docker is already installed. Allow it to do so.</p> <p>Swift Stream IDE</p> <p></p> <p>Aaaaaand... you are all set!</p> <p>Now check out our \u2192 Application and \u2192 Library guides.</p>"}]}